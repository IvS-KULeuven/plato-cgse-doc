<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="author" content="Rik Huygen">
<title>Common-EGSE : Interface Control Document</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/*! Asciidoctor Tabs | Copyright (c) 2018-present Dan Allen | MIT License */
.tabs > ul {
  display: flex;
  flex-wrap: wrap;
  list-style: none;
  margin: 0 -0.25em 0 0;
  padding: 0;
}

.tabs > ul li {
  align-items: center;
  border: 1px solid black;
  border-bottom: 0;
  cursor: pointer;
  display: flex;
  font-weight: bold;
  height: 2em;
  line-height: 1;
  margin-right: 0.25em;
  padding: 0 1em;
  position: relative;
}

.tabs > ul li, .tabs > ul p {
  margin-bottom: 0;
}

.tabs > ul li + li[id] {
  margin-top: 0;
}

.tabset {
  margin-bottom: 1.25em;
}

.tabset.is-loading .tabs li:not(:first-child),
.tabset:not(.is-loading) .tabs li:not(.is-active) {
  background-color: black;
  color: white;
}

.tabset.is-loading .tabs li:first-child::after,
.tabs li.is-active::after {
  background-color: white;
  content: "";
  display: block;
  height: 3px; /* Chrome doesn't always paint the line accurately, so add a little extra */
  position: absolute;
  bottom: -1.5px;
  left: 0;
  right: 0;
}

.tabset > .content {
  border: 1px solid gray;
  padding: 1.25em;
}

.tabset.is-loading .tab-pane:not(:first-child),
.tabset:not(.is-loading) .tab-pane:not(.is-active) {
  display: none;
}

.tab-pane > :first-child {
  margin-top: 0;
}

.tab-pane > :last-child > :last-child {
  margin-bottom: 0;
}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Common-EGSE : Interface Control Document</h1>
<div class="details">
<span id="author" class="author">Rik Huygen</span><br>
<span id="revnumber">version 0.3,</span>
<span id="revdate">19/06/2023</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_changelog">Changelog</a></li>
<li><a href="#_colophon">Colophon</a></li>
<li><a href="#_conventions_used_in_this_book">Conventions used in this Book</a></li>
<li><a href="#_todo">1. TODO</a></li>
<li><a href="#_introduction">2. Introduction</a></li>
<li><a href="#_software_interfaces">3. Software Interfaces</a>
<ul class="sectlevel2">
<li><a href="#_the_storage_data_interface">3.1. The Storage Data Interface</a></li>
</ul>
</li>
<li><a href="#_data_format">4. Data Format</a>
<ul class="sectlevel2">
<li><a href="#_the_format_of_the_fits_files">4.1. The format of the FITS files</a></li>
<li><a href="#hdf5-format">4.2. The format of the HDF5 files</a></li>
<li><a href="#hdf5-inspection">4.3. Inspecting HDF5 files with the toolset from the CGSE</a></li>
<li><a href="#_the_telemetry_tm_dictionary">4.4. The Telemetry (TM) Dictionary</a></li>
<li><a href="#csv-data-files">4.5. The format of the CSV data files</a></li>
</ul>
</li>
<li><a href="#obsid-table">5. The OBSID Table file</a></li>
<li><a href="#list-of-files">6. List of Files</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="sidebarblock">
<div class="content">
Backlink &#8594; <a href="https://ivs-kuleuven.github.io/plato-cgse-doc/">CGSE Documentation web site</a>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_changelog">Changelog</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">18/06/2023 — v0.3</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Added description of the N-FEE-HK CSV file, see <a href="#n-fee-hk">Section 4.5.2</a></p>
</li>
<li>
<p>Added a table with a description of all files that are used by the CGSE and test scripts, see <a href="#list-of-files">Chapter 6</a></p>
</li>
<li>
<p>Added a description of the <code>obsid-table.txt</code>, see <a href="#obsid-table">Chapter 5</a></p>
</li>
<li>
<p>added a backlink to the CGSE Documentation web site for your convenience. It&#8217;s at the top of the HTML page.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">04/05/2023 — v0.2</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Updated the HDF5 format version information, see <a href="#format-version">[format-version]</a>.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">21/02/2023 — v0.1</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Introduce Changelog, this section</p>
</li>
<li>
<p>Added section on the format of the HDF5 files, see <a href="#hdf5-format">Section 4.2</a></p>
</li>
<li>
<p>Added section on inspecting an HDF5 file, see <a href="#hdf5-inspection">Section 4.3</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_colophon">Colophon</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright &#169; 2022, 2023 by the KU Leuven PLATO CGSE Team</p>
</div>
<div class="paragraph">
<p>1<sup>st</sup> Edition — February 2023</p>
</div>
<div class="paragraph">
<p>This manual is written in PyCharm using the AsciiDoc plugin. The PDF Book version is processed with asciidoctor-pdf.</p>
</div>
<div class="paragraph">
<p>The manual is available as HTML from <a href="http://ivs-kuleuven.github.io/plato-cgse-doc">ivs-kuleuven/github.io</a>. The HTML pages are generated with Hugo which is an OSS static web-pages generator. From this site, you can also download the PDF books.</p>
</div>
<div class="paragraph">
<p>The source code is available in a GitHub repository at <a href="https://github.com/ivs-kuleuven/plato-cgse-doc">ivs-kuleuven/plato-cgse-doc</a>.</p>
</div>
<div class="paragraph">
<p>When you find an error or inconsistency or you have some improvements to the text, feel free to raise an issue or create a pull request. Any contribution is greatly appreciated and will be mentioned in the acknowledgement section.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conventions_used_in_this_book">Conventions used in this Book</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We try to be consistent with the following typographical conventions:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Italic</dt>
<dd>
<p>Indicates a new term or &#8230;&#8203;</p>
</dd>
<dt class="hdlist1">Constant width</dt>
<dd>
<p>Used for code listings, as well as within paragraphs to refer to program elements like variable and function names, data type, environment variables (<code>ALL_CAPS</code>), statements and keywords.</p>
</dd>
<dt class="hdlist1">Constant width between angle brackets <code>&lt;text&gt;</code></dt>
<dd>
<p>Indicates <code>text</code> that should be replaced with user-supplied values or by values determined by context. The brackets should thereby be omitted.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>When you see a <code>$ &#8230;&#8203;</code> in code listings, this is a command you need to execute in a terminal (omitting the dollar sign itself). When you see <code>&gt;&gt;&gt; &#8230;&#8203;</code> in code listings, that is a Python expression that you need to execute in a Python REPL (here omitting the three brackets).</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Setup versus setup</dt>
<dd>
<p>I make a distinction between Setup (with a capital C) and setup (with a small c). The Setup is used when I talk about the object as defined in a Python environment, i.e. the entity itself that contains all the definitions, configuration and calibration parameters of the equipment that make up the complete test setup (notice the small letter 'c' here).</p>
<div class="paragraph">
<p>(sometimes you may find setup in the document which really should be 'set up')</p>
</div>
</dd>
<dt class="hdlist1">Using TABs</dt>
<dd>
<p>Some of the manuals use TABs in their HTML version. Below, you can find an example of tabbed information. You can select between FM and EM info and you should see the text change with the TAB.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This feature is only available in the HTML version of the documents. If you are looking at the PDF version of the document, the TABs are shown in a frame where all TABs are presented successively.
</td>
</tr>
</table>
</div>
<div id="_tabset_1" class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li id="_tabset_1_fm">
<p>FM</p>
</li>
<li id="_tabset_1_em">
<p>EM</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="_tabset_1_fm">
<div class="paragraph">
<p>In this TAB we present <em>FM specific information</em>.</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="_tabset_1_em">
<div class="paragraph">
<p>In this TAB we present <strong>EM specific information</strong>.</p>
</div>
</div>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Using Collapse</dt>
<dd>
<p>Sometimes, information we need to display is too long and will make the document hard to read. This happens mostly with listings or terminal output and we will make that information collapsible. By default, the info will be collapsed, press the small triangle before the title (or the title itself) to expand it.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In the PDF document, all collapsible sections will be expanded.
</td>
</tr>
</table>
</div>
<details>
<summary class="title">A collapsible listing</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">plato-data@strawberry:/data/CSL1/obs/01151_CSL1_chimay$ ls -l
total 815628
-rw-r--r-- 1 plato-data plato-data      7961 Jun 20 10:38 01151_CSL1_chimay_AEU-AWG1_20230620_095819.csv
-rw-r--r-- 1 plato-data plato-data      9306 Jun 20 10:38 01151_CSL1_chimay_AEU-AWG2_20230620_095819.csv
-rw-r--r-- 1 plato-data plato-data    309375 Jun 20 10:38 01151_CSL1_chimay_AEU-CRIO_20230620_095819.csv
-rw-r--r-- 1 plato-data plato-data     42950 Jun 20 10:38 01151_CSL1_chimay_AEU-PSU1_20230620_095819.csv
-rw-r--r-- 1 plato-data plato-data     43239 Jun 20 10:38 01151_CSL1_chimay_AEU-PSU2_20230620_095819.csv
-rw-r--r-- 1 plato-data plato-data     42175 Jun 20 10:38 01151_CSL1_chimay_AEU-PSU3_20230620_095819.csv
-rw-r--r-- 1 plato-data plato-data     42327 Jun 20 10:38 01151_CSL1_chimay_AEU-PSU4_20230620_095819.csv
-rw-r--r-- 1 plato-data plato-data     42242 Jun 20 10:38 01151_CSL1_chimay_AEU-PSU5_20230620_095819.csv
-rw-r--r-- 1 plato-data plato-data     42269 Jun 20 10:38 01151_CSL1_chimay_AEU-PSU6_20230620_095819.csv
-rw-r--r-- 1 plato-data plato-data     67149 Jun 20 10:38 01151_CSL1_chimay_CM_20230620_095819.csv
-rw-r--r-- 1 plato-data plato-data     20051 Jun 20 10:38 01151_CSL1_chimay_DAQ6510_20230620_095819.csv
-rw-r--r-- 1 plato-data plato-data       105 Jun 20 10:38 01151_CSL1_chimay_DAS-DAQ6510_20230620_095819.csv
-rw-r--r-- 1 plato-data plato-data     19721 Jun 20 10:38 01151_CSL1_chimay_DPU_20230620_095819.csv
-rw-r--r-- 1 plato-data plato-data     22833 Jun 20 10:38 01151_CSL1_chimay_FOV_20230620_095819.csv
-rw-rw-r-- 1 plato-data plato-data 833754240 Jun 20 10:34 01151_CSL1_chimay_N-FEE_CCD_00001_20230620_cube.fits
-rw-r--r-- 1 plato-data plato-data    292859 Jun 20 10:38 01151_CSL1_chimay_N-FEE-HK_20230620_095819.csv
-rw-r--r-- 1 plato-data plato-data      8877 Jun 20 10:38 01151_CSL1_chimay_OGSE_20230620_095819.csv
-rw-r--r-- 1 plato-data plato-data     19841 Jun 20 10:38 01151_CSL1_chimay_PM_20230620_095819.csv
-rw-r--r-- 1 plato-data plato-data    188419 Jun 20 10:38 01151_CSL1_chimay_PUNA_20230620_095819.csv
-rw-r--r-- 1 plato-data plato-data      7662 Jun 20 10:38 01151_CSL1_chimay_SMC9300_20230620_095819.csv
-rw-r--r-- 1 plato-data plato-data     19781 Jun 20 10:38 01151_CSL1_chimay_SYN_20230620_095819.csv
-rw-r--r-- 1 plato-data plato-data    147569 Jun 20 10:38 01151_CSL1_chimay_SYN-HK_20230620_095819.csv
plato-data@strawberry:/data/CSL1/obs/01151_CSL1_chimay$</pre>
</div>
</div>
</div>
</details>
</div>
</div>
<div class="sect1">
<h2 id="_todo">1. TODO</h2>
<div class="sectionbody">
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-square-o"></i> Describe the format of the FITS files containing CCD data</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> Describe the format of the HDF5 files containing SpaceWire data from the N-FEE</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Describe the interface to the Storage, i.e. the expected keys for the dictionaries that are passed like <code>prep</code> and <code>item</code>&#8230;&#8203;</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">2. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document describes the software and hardware interfaces for the PLATO Common-EGSE, which is used at CSL and the test houses at IAS, INTA and SRON.</p>
</div>
<div class="paragraph">
<p>This ICD defines all the connections between the components in the instrument test setup that interface with the Common-EGSE. It defines these interface in terms of hardware, i.e. cables, connectors, electrical properties, and in terms of software, i.e. communication protocols, message buffers, timing, data formats etc.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_software_interfaces">3. Software Interfaces</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_the_storage_data_interface">3.1. The Storage Data Interface</h3>
<div class="paragraph">
<p>The Storage Manager &#8230;&#8203; TBW</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Top-level keys that are mandatory or optional in the 'item' argument of the following Storage methods.</caption>
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2858%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code>key</code></th>
<th class="tableblock halign-center valign-top">register</th>
<th class="tableblock halign-center valign-top">unregister</th>
<th class="tableblock halign-center valign-top">new_registration</th>
<th class="tableblock halign-center valign-top">read</th>
<th class="tableblock halign-center valign-top">save</th>
<th class="tableblock halign-center valign-top">get_filenames</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>origin</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prep</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>persistence_class</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>persistence_objects</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">created <sup>1</sup></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">used<sup>2</sup></p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">used<sup>2</sup></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">used<sup>2</sup></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">used<sup>2</sup></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>persistence_count</code><sup>3</sup></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>data</code></p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-center valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>filename</code><sup>4</sup></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>select</code></p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><sup>1</sup> — The <code>persistence_objects</code> key is created during registration and used internally to manage all the persistent objects that are associated to the item.<br>
<sup>2</sup> — This key which was created during registration is used to perform an action on the persistent objects associated with this item.<br>
<sup>3</sup> — When the <code>persistent_count</code> is provided in the <code>item</code>, the file is treated specially. The file will not be cloned when an observation is started, nor will it be cycled when a new day is started. Basically, the file is created once and not cloned, cycled or closed. An example is the <code>obsid-table.txt</code> which is used by the configuration manager.<br>
<sup>4</sup> — When the <code>filename</code> key is present, the file will be created with the given name in the folder provided by the <code>FILE_STORAGE_LOCATION</code> field for the Storage manager in the Settings. By default, this is the <code>$PLATO_DATA_STORAGE_LOCATION</code> environment variable, but that can be changed in the local settings (which is not preferred!).</p>
</div>
<hr>
<div class="paragraph">
<p>In the following example you can see how to check the registrations on the Storage Manager and which <code>persistence_objects</code> are associated with each of the registered items. This particular example is during an observation run and therefore each registered item has a persistent object in the <code>daily</code> folder, and one in the <code>obs</code> folder for the observation 299. It is also clear that the <code>obsid-table.txt</code> is only in the top-level data folder because it was created with the <code>persistence_count</code> key.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">[plato-data@plato-arrakis 20220701]$ sm_cs status --full
Storage Manager:
  Status: active
  Hostname: 129.175.66.182
  Monitoring port: 6101
  Commanding port: 6100
  Service port: 6102
  Storage location: /data/IAS
  Registrations: ['SYN-HK', 'SYN', 'obsid', 'CM', 'PM', 'CDAQ9184', 'FOV', 'DAQ6510', 'ZONDA',
    'KSC101', 'PTC10', 'EQ99', 'TCS', 'TCS-HK', 'DAS-PTC10', 'AEU-CRIO', 'AEU-PSU1', 'AEU-PSU2',
    'AEU-PSU3', 'AEU-PSU4', 'AEU-PSU5', 'AEU-PSU6', 'AEU-AWG1', 'AEU-AWG2', 'N-FEE_SPW', 'DPU',
    'N-FEE-HK', 'FW8SMC4']
Filenames for all registered items:
  SYN-HK     -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_SYN-HK.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_SYN-HK_20220701_132613.csv')]
  SYN        -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_SYN.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_SYN_20220701_132613.csv')]
  obsid      -&gt;  [PosixPath('/data/IAS/obsid-table.txt')]
  CM         -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_CM.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_CM_20220701_132613.csv')]
  PM         -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_PM.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_PM_20220701_132613.csv')]
  CDAQ9184   -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_CDAQ9184.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_CDAQ9184_20220701_132613.csv')]
  FOV        -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_FOV.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_FOV_20220701_132613.csv')]
  DAQ6510    -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_DAQ6510.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_DAQ6510_20220701_132613.csv')]
  ZONDA      -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_ZONDA.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_ZONDA_20220701_132613.csv')]
  KSC101     -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_KSC101.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_KSC101_20220701_132613.csv')]
  PTC10      -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_PTC10.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_PTC10_20220701_132613.csv')]
  EQ99       -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_EQ99.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_EQ99_20220701_132613.csv')]
  TCS        -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_TCS.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_TCS_20220701_132613.csv')]
  TCS-HK     -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_TCS-HK.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_TCS-HK_20220701_132613.csv')]
  DAS-PTC10  -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_DAS-PTC10.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_DAS-PTC10_20220701_132613.csv')]
  AEU-CRIO   -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_AEU-CRIO.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_AEU-CRIO_20220701_132613.csv')]
  AEU-PSU1   -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_AEU-PSU1.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_AEU-PSU1_20220701_132613.csv')]
  AEU-PSU2   -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_AEU-PSU2.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_AEU-PSU2_20220701_132613.csv')]
  AEU-PSU3   -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_AEU-PSU3.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_AEU-PSU3_20220701_132613.csv')]
  AEU-PSU4   -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_AEU-PSU4.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_AEU-PSU4_20220701_132613.csv')]
  AEU-PSU5   -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_AEU-PSU5.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_AEU-PSU5_20220701_132613.csv')]
  AEU-PSU6   -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_AEU-PSU6.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_AEU-PSU6_20220701_132613.csv')]
  AEU-AWG1   -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_AEU-AWG1.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_AEU-AWG1_20220701_132613.csv')]
  AEU-AWG2   -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_AEU-AWG2.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_AEU-AWG2_20220701_132613.csv')]
  N-FEE_SPW  -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_N-FEE_SPW_01903.hdf5')]
  DPU        -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_DPU.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_DPU_20220701_132613.csv')]
  N-FEE-HK   -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_N-FEE-HK.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_N-FEE-HK_20220701_132613.csv')]
  FW8SMC4    -&gt;  [PosixPath('/data/IAS/daily/20220701/20220701_IAS_FW8SMC4.csv'), PosixPath('/data/IAS/obs/00299_IAS/00299_IAS_FW8SMC4_20220701_132613.csv')]
An observation is registered: IAS_00062_00299
Total disk space: 1.718 TiB
Used disk space: 183.215 GiB (10.41%)
Free disk space: 1.452 TiB (84.50%)
[plato-data@plato-arrakis 20220701]$</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_data_format">4. Data Format</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_the_format_of_the_fits_files">4.1. The format of the FITS files</h3>
<div class="paragraph">
<p>During the camera tests, the DPU will be configured such that a specific part of the E- and/or F-side of the selected CCDs will be transmitted (in the form of SpW packets) for a specified number of cycles.  The following information will be reconstructed from these SpW packets and stored in FITS files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>transmitted image data of the selected side(s) of the selected CCDs, for all cycles;</p>
</li>
<li>
<p>transmitted serial pre-scan data of the selected side(s) of the selected CCDs, for all cycles;</p>
</li>
<li>
<p>transmitted serial over-scan data of the selected side(s) of the selected CCDs, for all cycles;</p>
</li>
<li>
<p>transmitted parallel over-scan data (if any) of the selected side(s) of the selected CCDs, for all cycles.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>While the SpW packets come in, the individual exposures are stored in individual extensions in FITS files that carry "images" in their name.  This type of data arrangement is called a "flat structure".  When there&#8217;s a change in crucial parameters, a new FITS file will be constructed (with "cube" in its name), based on the flat-structure FITS file, in which the exposures are aggregated into cubes.  The original, flat-structure file will be removed from the system.
For analysis, only the FITS files with the cubes will be available, and therefore only the structure of these will be discussed in the section below.</p>
</div>
<div class="paragraph">
<p>Each of the extensions (apart from the <code>PRIMARY</code> extension) will occur only once and comprise a 3D data array and a header with the metadata that is specific to that extension.   The name of an extension will reflect what type of data product it comprises (e.g. image data of the F-side of CCD2, serial pre-scan data of the E-side of CCD3, etc.).
The following extensions can be included in the FITS files:</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-square-o"></i> descibe the slicing strategy and how this is handled in the commanding</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_crucial_parameters">4.1.1. Crucial Parameters</h4>

</div>
<div class="sect3">
<h4 id="_fits_filenames">4.1.2. FITS Filenames</h4>

</div>
<div class="sect3">
<h4 id="_slicing_strategy">4.1.3. Slicing Strategy</h4>

</div>
</div>
<div class="sect2">
<h3 id="hdf5-format">4.2. The format of the HDF5 files</h3>
<div class="paragraph">
<p>The HDF5 files contain the raw data that is read out from the camera through the spacewire interface that is connected to the front-end-electronics (FEE).</p>
</div>
<div class="paragraph">
<p>In contrast to the FITS files, which are organised around the image data, the HDF5 files are organised around the readout sequence and the telemetry that is sent out by the camera. Each HDF5 file contains exactly one readout sequence, i.e. four frames in external sync mode and one frame for internal sync. The data is not processed, but the raw data packets are saved as an Numpy array of type <code>uint8</code>, all values are unsigned integers of 8 bits, i.e. a byte.</p>
</div>
<div class="paragraph">
<p>Inspecting the HDF5 files can be done with the <code>h5py</code> module or you can use the CGSE module <code>egse.h5</code> which provides convenience functions to work with HDF5 files. We normally use the CGSE module to explore the HDF5 files, but will provide equivalent code for inspection with the <code>h5py</code> module where possible.</p>
</div>
<div id="_tabset_2" class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li id="_tabset_2_egse_h5">
<p>egse.h5</p>
</li>
<li id="_tabset_2_h5py">
<p>h5py</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="_tabset_2_egse_h5">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; from egse import h5</pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="_tabset_2_h5py">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; import h5py</pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s take an example file from IAS taken on 7th February 2023. The file is loaded with the <code>h5.get_file()</code> function and we can visualize the top level structure as follows:</p>
</div>
<div id="_tabset_3" class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li id="_tabset_3_egse_h5">
<p>egse.h5</p>
</li>
<li id="_tabset_3_h5py">
<p>h5py</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="_tabset_3_egse_h5">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; h5_fd = h5.get_file("20230207_IAS_N-FEE_SPW_06174.hdf5")
&gt;&gt;&gt; h5.show_file(h5_fd)
[G] 0
[G] 1
[G] 2
[G] 3
[D] dpu (104 bytes)
[D] obsid (104 bytes)
[D] register (2.109 KB)
[G] versions
Total size of Group = 159.597 MB
Total size of attributes: 0 bytes</pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="_tabset_3_h5py">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; h5_fd = h5py.File("20230207_IAS_N-FEE_SPW_06174.hdf5")
&gt;&gt;&gt; [x for x in h5_fd]
['0', '1', '2', '3', 'dpu', 'obsid', 'register', 'versions']</pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>We can see that there are five top-level groups and three datasets. This is data taken in external sync mode, so we have four readouts per cycle. The data from each readout is in the groups 0, 1, 2, and 3. These numbers correspond to the frame number. Each of these groups has the following structure:</p>
</div>
<div id="_tabset_4" class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li id="_tabset_4_egse_h5">
<p>egse.h5</p>
</li>
<li id="_tabset_4_h5py">
<p>h5py</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="_tabset_4_egse_h5">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; h5.show_groups(h5_fd["/0"], max_level=1)
[G] data
[D] hk (266 bytes)
[D] timecode (104 bytes)
Total size of Group = 39.899 MB</pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="_tabset_4_h5py">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; [x for x in h5_fd["/0"]]
['data', 'hk', 'timecode']</pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>data</code> group contains all the SpaceWire packets that have image data, i.e. normal data packets and overscan packets. The <code>data</code> group also has the following attributes that are used to decode the SpaceWire packets into image data arrays. We will describe the <code>data</code> groups into more detail later in this section.</p>
</div>
<div id="_tabset_5" class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li id="_tabset_5_egse_h5">
<p>egse.h5</p>
</li>
<li id="_tabset_5_h5py">
<p>h5py</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="_tabset_5_egse_h5">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; h5.show_attributes(h5_fd["/0/data"])
DG_en: 0 (32 bytes)
ccd_mode_config: 5 (32 bytes)
ccd_read_en: 1 (32 bytes)
ccd_readout_order: 228 (32 bytes)
digitise_en: 1 (32 bytes)
h_end: 2294 (32 bytes)
int_sync_period: 2500 (32 bytes)
n_final_dump: 0 (32 bytes)
sensor_sel: 3 (32 bytes)
sync_sel: 0 (32 bytes)
v_end: 4539 (32 bytes)
v_start: 0 (32 bytes)
Total size of attributes: 384 bytes</pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="_tabset_5_h5py">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; [x for x in h5_fd["/0/data"].attrs]
[
    'DG_en',
    'ccd_mode_config',
    'ccd_read_en',
    'ccd_readout_order',
    'digitise_en',
    'h_end',
    'int_sync_period',
    'n_final_dump',
    'sensor_sel',
    'sync_sel',
    'v_end',
    'v_start'
]</pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The two datasets in group <code>'/0'</code> contain the timecode and the housekeeping information that is sent on every sync pulse. The <code>timecode</code> dataset contains the timecode itself and the timestamp when this timecode was received by the DPU Processor. Remember the timecode is an integer from 0 to 63. The <code>timecode</code> dataset is an array with one integer element, the timestamp is an attribute of the <code>timecode</code> dataset. The <code>timecode</code> dataset and the timestamp can be visualised as follows.</p>
</div>
<div id="_tabset_6" class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li id="_tabset_6_egse_h5">
<p>egse.h5</p>
</li>
<li id="_tabset_6_h5py">
<p>h5py</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="_tabset_6_egse_h5">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; h5.get_data(h5_fd["/0/timecode"])
array(53)
&gt;&gt;&gt; h5.get_attribute_value(h5_fd["/0/timecode"], "timestamp")
'2023-02-07T15:13:10.397+0000'</pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="_tabset_6_h5py">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; h5_fd["/0/timecode"][()]
53
&gt;&gt;&gt; h5_fd["/0/timecode"].attrs["timestamp"]
'2023-02-07T15:13:10.397+0000'</pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The raw content of the <code>hk</code> dataset can be shown as follows. The <code>hk</code> dataset has no attributes currently.</p>
</div>
<div id="_tabset_7" class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li id="_tabset_7_egse_h5">
<p>egse.h5</p>
</li>
<li id="_tabset_7_h5py">
<p>h5py</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="_tabset_7_egse_h5">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; h5.get_data(h5_fd["/0/hk"])
array([ 80, 240,   0, 144,   5, 130,  24,  29,   0,   0, 128,   0, 128,
         0, 128,   0, 128,   0, 128,   0, 128,   0, 127, 255, 127, 255,
       127, 255, 127, 255, 127, 255, 127, 255, 127, 255, 127, 255, 127,
       255, 128,  21,   0,   0, 128,  88, 128,  87, 128,  88, 128,  88,
       128,  88, 128,  87, 128,  88, 128,  88, 128,  85, 128,  86, 128,
        86,  57, 191, 252, 138, 250, 233, 128,  87, 128,  88,  26, 159,
       231,  93,  25, 121, 231, 110,  26, 140, 223,  53,  26, 128,  83,
       191,  64, 186,   7,  68, 251, 124,  58, 236,  10, 181,   0,   0,
       128,  87, 128,  88, 148, 193, 128,  85, 128,  89, 148, 193, 128,
        88, 128,  88, 148, 186, 128,  86, 128,  89, 148, 202, 128,  86,
       128,  87, 128,  85, 128,  89, 128,  90,   0,  53,   0,   1,  24,
        29,   0,   0,   0,   0,   0,   0,   0,   0,   0,  24], dtype=uint8)</pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="_tabset_7_h5py">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; h5_fd["/0/hk"][()]
array([ 80, 240,   0, 144,   5, 130,  24,  29,   0,   0, 128,   0, 128,
         0, 128,   0, 128,   0, 128,   0, 128,   0, 127, 255, 127, 255,
       127, 255, 127, 255, 127, 255, 127, 255, 127, 255, 127, 255, 127,
       255, 128,  21,   0,   0, 128,  88, 128,  87, 128,  88, 128,  88,
       128,  88, 128,  87, 128,  88, 128,  88, 128,  85, 128,  86, 128,
        86,  57, 191, 252, 138, 250, 233, 128,  87, 128,  88,  26, 159,
       231,  93,  25, 121, 231, 110,  26, 140, 223,  53,  26, 128,  83,
       191,  64, 186,   7,  68, 251, 124,  58, 236,  10, 181,   0,   0,
       128,  87, 128,  88, 148, 193, 128,  85, 128,  89, 148, 193, 128,
        88, 128,  88, 148, 186, 128,  86, 128,  89, 148, 202, 128,  86,
       128,  87, 128,  85, 128,  89, 128,  90,   0,  53,   0,   1,  24,
        29,   0,   0,   0,   0,   0,   0,   0,   0,   0,  24], dtype=uint8)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The CGSE provides a module to inspect and work with PLATO SpaceWire packets. The above housekeeping packet can be inspected using the <code>HousekeepingPacket</code> class from the <code>egse.spw</code> package:</p>
</div>
<div id="_tabset_8" class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li id="_tabset_8_egse_h5">
<p>egse.h5</p>
</li>
<li id="_tabset_8_h5py">
<p>h5py</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="_tabset_8_egse_h5">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; from egse.spw import HousekeepingPacket
&gt;&gt;&gt; hk_data = h5.get_data(h5_fd["/0/hk"])
&gt;&gt;&gt; hk = HousekeepingPacket(hk_data)
&gt;&gt;&gt; print(hk)
print(hk)
HousekeepingPacket:
  Logical Address = 0x50
  Protocol ID = 0xF0
  Length = 144
  Type = mode:FULL_IMAGE_MODE, last_packet:True, CCD side:E, CCD number:0, Frame number:0, Packet Type:HOUSEKEEPING_DATA
  Frame Counter = 6173
  Sequence Counter = 0
  Data =
b'\x80\x00\x80\x00\x80\x00\x80\x00\x80\x00\x80\x00\x7f\xff\x7f\xff\x7f\xff\x7f\xff\x7f\xff\x7f\xff\x7f\xff\x7f\xff\x7f\xff\x80\x15\x00\x00\x80X\x80W\x80X\x80X\x80X\x80W\x80X\x80X\x80U\x80V\x80V9\xbf\xfc\x8a\xfa\xe9\x80W\x80X\x1a\x9f\xe7]\x19y\xe7n\x1a\x8c\xdf5\x1a\x80S\xbf@\xba\x07D\xfb|:\xec\n\xb5\x00\x00\x80W\x80X\x94\xc1\x80U\x80Y\x94\xc1\x80X\x80X\x94\xba\x80V\x80Y\x94\xca\x80V\x80W\x80U\x80Y\x80Z\x005\x00\x01\x18\x1d\x00\x00\x00\x00\x00\x00\x00\x00\x00\x18'</pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="_tabset_8_h5py">
<div class="paragraph">
<p>In this case only the retrieving of the <code>hk_data</code> is different:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; hk_data = h5_fd["/0/hk"][()]</pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Thus far we have explored the following format of the HDF5 file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>h5_file
  ├──── 0
  │     ├──── data
  │     ├──── hk
  │     └──── timecode
  ├──── 1
  │     ├──── data
  │     ├──── hk
  │     └──── timecode
  ├──── 2
  │     ├──── data
  │     ├──── hk
  │     └──── timecode
  ├──── 3
  │     ├──── data
  │     ├──── hk
  │     └──── timecode
  ├──── dpu
  ├──── obsid
  ├──── register
  └──── versions
        └──── format_version</pre>
</div>
</div>
<div class="paragraph">
<p>We haven&#8217;t inspected the <code>versions</code> group yet, it currently contains only one dataset, <code>format_version</code>. This version describes the changes in the HDF5 file with respect to available groups, datasets and attributes. The format version can be accessed as follows.</p>
</div>
<div id="_tabset_9" class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li id="_tabset_9_egse_h5">
<p>egse.h5</p>
</li>
<li id="_tabset_9_h5py">
<p>h5py</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="_tabset_9_egse_h5">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; h5.show_attributes(h5_fd["/versions/format_version"])
major_version: 2 (32 bytes)
minor_version: 4 (32 bytes)
Total size of attributes: 64 bytes</pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="_tabset_9_h5py">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; list(h5_fd["/versions/format_version"].attrs)
['major_version', 'minor_version']
&gt;&gt;&gt; h5_fd["/versions/format_version"].attrs["major_version"]
2
&gt;&gt;&gt; h5_fd["/versions/format_version"].attrs["minor_version"]
4</pre>
</div>
</div>
</div>
</div>
</div>
<div id="format-version" class="paragraph">
<p>Up to now, the format versions have changed from 2.0 to 2.5<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>2.0 - introduced the format_version
2.1 - Added obsid as a dataset to the HDF5 file
2.2 - Multiple commands can now be saved under the same frame number
2.3 - introduced /dpu/num_cycles attribute
2.4 - introduced /dpu/slicing_num_cycles attribute
2.5 - introduced /{frame number}/hk_data dataset</pre>
</div>
</div>
<div class="paragraph">
<p>Before we dive into the <code>data</code> groups, let&#8217;s first inspect the three remaining datasets <code>dpu</code>, <code>obsid</code> and <code>register</code>. The <code>obsid</code> dataset contains the full observation identifier where this HDF5 file belongs to as a bytes object. If the <code>obsid</code> is empty, no observation was running.</p>
</div>
<div id="_tabset_10" class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li id="_tabset_10_egse_h5">
<p>egse.h5</p>
</li>
<li id="_tabset_10_h5py">
<p>h5py</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="_tabset_10_egse_h5">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; h5.get_data(h5_fd["/obsid"]).item()
b'IAS_00088_00938'</pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="_tabset_10_h5py">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; h5_fd["/obsid"][()]
b'IAS_00088_00938'</pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>dpu</code> dataset contains DPU Processor specific parameters that are needed to properly process the data. These parameters are available as attributes to this dataset and are mainly used by the FITS generation process.</p>
</div>
<div id="_tabset_11" class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li id="_tabset_11_egse_h5">
<p>egse.h5</p>
</li>
<li id="_tabset_11_h5py">
<p>h5py</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="_tabset_11_egse_h5">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; h5.show_attributes(h5_fd["/dpu"])
num_cycles: 10 (32 bytes)
slicing_num_cycles: 0 (32 bytes)
Total size of attributes: 64 bytes</pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="_tabset_11_h5py">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; list(h5_fd["/dpu"].attrs)
['num_cycles', 'slicing_num_cycles']
&gt;&gt;&gt; h5_fd["/dpu"].attrs["num_cycles"]
10</pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Finally, the <code>register</code> dataset is a Numpy array that is a mirror of the register memory map in the N-FEE at the time of the sync pulse.</p>
</div>
<div id="_tabset_12" class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li id="_tabset_12_egse_h5">
<p>egse.h5</p>
</li>
<li id="_tabset_12_h5py">
<p>h5py</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="_tabset_12_egse_h5">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; h5.get_data(h5_fd["/register"])
array([ 17, 187,   0, ...,   0,   0,   0], dtype=uint8)</pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="_tabset_12_h5py">
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; h5_fd["/register"][()]
array([ 17, 187,   0, ...,   0,   0,   0], dtype=uint8)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The content of the <code>register</code> dataset can be inspected using the <code>RegisterMap</code> class from the CGSE. If you are using a slightly older version of the CGSE, your output might looks different, i.e. not in a nicely formatted table. The content is however the same.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; import rich
&gt;&gt;&gt; from egse.reg import RegisterMap
&gt;&gt;&gt; reg_data = h5.get_data(h5_fd["/register"])
&gt;&gt;&gt; reg = RegisterMap(name="N-FEE", memory_map=reg_data)
&gt;&gt;&gt; rich.print(reg)
┏━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━┓
┃ Register      ┃ Parameter                    ┃ HEX    ┃
┡━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━┩
│ reg_0_config  │ v_start                      │ 0x0    │
│ reg_0_config  │ v_end                        │ 0x11bb │
│ reg_1_config  │ charge_injection_width       │ 0x64   │
│ reg_1_config  │ charge_injection_gap         │ 0x64   │
│ reg_2_config  │ parallel_toi_period          │ 0x36b  │
│ reg_2_config  │ parallel_clk_overlap         │ 0xfa   │
│ reg_2_config  │ ccd_readout_order            │ 0xe4   │
│ reg_3_config  │ n_final_dump                 │ 0x0    │
│ reg_3_config  │ h_end                        │ 0x8f6  │
│ reg_3_config  │ charge_injection_en          │ 0x0    │
│ reg_3_config  │ tri_level_clk_en             │ 0x0    │
│ reg_3_config  │ img_clk_dir                  │ 0x0    │
│ reg_3_config  │ reg_clk_dir                  │ 0x0    │
│ reg_4_config  │ packet_size                  │ 0x7d8c │
│ reg_4_config  │ int_sync_period              │ 0x9c4  │
│ reg_5_config  │ Trap_Pumping_Dwell_counter   │ 0x30d4 │
│ reg_5_config  │ sync_sel                     │ 0x0    │
│ reg_5_config  │ sensor_sel                   │ 0x3    │
│ reg_5_config  │ digitise_en                  │ 0x1    │
│ reg_5_config  │ DG_en                        │ 0x0    │
│ reg_5_config  │ ccd_read_en                  │ 0x1    │
│ reg_5_config  │ conv_dly                     │ 0xf    │
│ reg_5_config  │ High_precision_HK_en         │ 0x0    │
│ reg_6_config  │ ccd1_win_list_ptr            │ 0x0    │
│ reg_7_config  │ ccd1_pktorder_list_ptr       │ 0x0    │
│ reg_8_config  │ ccd1_win_list_length         │ 0x0    │
│ reg_8_config  │ ccd1_win_size_x              │ 0x0    │
│ reg_8_config  │ ccd1_win_size_y              │ 0x0    │
│ reg_8_config  │ reg_8_config_reserved        │ 0x0    │
│ reg_9_config  │ ccd2_win_list_ptr            │ 0x0    │
│ reg_10_config │ ccd2_pktorder_list_ptr       │ 0x0    │
│ reg_11_config │ ccd2_win_list_length         │ 0x0    │
│ reg_11_config │ ccd2_win_size_x              │ 0x0    │
│ reg_11_config │ ccd2_win_size_y              │ 0x0    │
│ reg_11_config │ reg_11_config_reserved       │ 0x0    │
│ reg_12_config │ ccd3_win_list_ptr            │ 0x0    │
│ reg_13_config │ ccd3_pktorder_list_ptr       │ 0x0    │
│ reg_14_config │ ccd3_win_list_length         │ 0x0    │
│ reg_14_config │ ccd3_win_size_x              │ 0x0    │
│ reg_14_config │ ccd3_win_size_y              │ 0x0    │
│ reg_14_config │ reg_14_config_reserved       │ 0x0    │
│ reg_15_config │ ccd4_win_list_ptr            │ 0x0    │
│ reg_16_config │ ccd4_pktorder_list_ptr       │ 0x0    │
│ reg_17_config │ ccd4_win_list_length         │ 0x0    │
│ reg_17_config │ ccd4_win_size_x              │ 0x0    │
│ reg_17_config │ ccd4_win_size_y              │ 0x0    │
│ reg_17_config │ reg_17_config_reserved       │ 0x0    │
│ reg_18_config │ ccd_vod_config               │ 0xeef  │
│ reg_18_config │ ccd1_vrd_config              │ 0xe65  │
│ reg_18_config │ ccd2_vrd_config              │ 0x65   │
│ reg_19_config │ ccd2_vrd_config              │ 0xe    │
│ reg_19_config │ ccd3_vrd_config              │ 0xe65  │
│ reg_19_config │ ccd4_vrd_config              │ 0xe65  │
│ reg_19_config │ ccd_vgd_config               │ 0x9    │
│ reg_20_config │ ccd_vgd_config               │ 0xb1   │
│ reg_20_config │ ccd_vog_config               │ 0x19a  │
│ reg_20_config │ ccd_ig_hi_config             │ 0xfff  │
│ reg_21_config │ ccd_ig_lo_config             │ 0x0    │
│ reg_21_config │ trk_hld_hi                   │ 0x4    │
│ reg_21_config │ trk_hld_lo                   │ 0xe    │
│ reg_21_config │ cont_rst_on                  │ 0x0    │
│ reg_21_config │ cont_cdsclp_on               │ 0x0    │
│ reg_21_config │ ccd_mode_config              │ 0x5    │
│ reg_21_config │ cont_rowclp_on               │ 0x0    │
│ reg_21_config │ reg_21_config_reserved       │ 0x0    │
│ reg_21_config │ clear_error_flag             │ 0x1    │
│ reg_22_config │ r_cfg1                       │ 0x7    │
│ reg_22_config │ r_cfg2                       │ 0xb    │
│ reg_22_config │ cdsclp_lo                    │ 0x9    │
│ reg_22_config │ adc_pwrdn_en                 │ 0x1    │
│ reg_22_config │ reg_22_config_reserved_1     │ 0x0    │
│ reg_22_config │ cdsclp_hi                    │ 0x0    │
│ reg_22_config │ rowclp_hi                    │ 0x0    │
│ reg_22_config │ rowclp_lo                    │ 0x2    │
│ reg_22_config │ reg_22_config_reserved_2     │ 0x0    │
│ reg_23_config │ ccd1_last_Epacket            │ 0x0    │
│ reg_23_config │ ccd1_last_Fpacket            │ 0x0    │
│ reg_23_config │ ccd2_last_Epacket            │ 0x0    │
│ reg_23_config │ reg_23_config_reserved       │ 0x0    │
│ reg_24_config │ ccd2_last_Fpacket            │ 0x0    │
│ reg_24_config │ ccd3_last_Epacket            │ 0x0    │
│ reg_24_config │ ccd3_last_Fpacket            │ 0x0    │
│ reg_24_config │ reg_24_config_reserved       │ 0x0    │
│ reg_25_config │ ccd4_last_Epacket            │ 0x0    │
│ reg_25_config │ ccd4_last_Fpacket            │ 0x0    │
│ reg_25_config │ Surface_Inversion_counter    │ 0x64   │
│ reg_25_config │ reg_25_config_reserved       │ 0x0    │
│ reg_26_config │ Readout_pause_counter        │ 0x7d0  │
│ reg_26_config │ Trap_Pumping_Shuffle_counter │ 0x3e8  │
└───────────────┴──────────────────────────────┴────────┘</pre>
</div>
</div>
<div class="paragraph">
<p>The last group to inspect is the <code>data</code> group which is part of each of the readout groups. The <code>data</code> group contains all the SpaceWire packets that contain the CCD image data. The packets contain the serial prescan, serial overscan, the actual image data and the parallel overscan (if present). From the attributes of the <code>dpu</code> dataset we learned that <code>h_end=2294</code>, <code>v_start=0</code> and <code>v_end=4539</code>. The <code>h_end</code> attribute defines what is in the row data. The value <code>h_end=2294</code> means 25 pixels of serial prescan, 2255 pixels of image data, and 15 pixels of serial overscan data. Each packet in the <code>data</code> group is a Numpy array of type <code>uint8</code>, but the actual pixel data is a 16bit integer. The header of a SpW data packet is 10 bytes, so from this information we can calculate that there are 7 lines contained in each packet of length 32140. We also have data packets of 9190 bytes which contain only two rows of data.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; (32140-10)/2/2295
7.0
&gt;&gt;&gt; (9190-10)/2/2295
2.0</pre>
</div>
</div>
<div class="paragraph">
<p>We requested 4540 rows (<code>v_end - v_start + 1</code>) which is a full CCD of 4510 rows + 30 rows parallel overscan data. Image data and overscan data are sent in separate packets, so we have 644 + 1 packets of image data and 4 + 1 packets of parallel overscan data.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; 644*7 + 1*2  # 644 packets of 32140 bytes + 1 packet of 9190 bytes
4510
&gt;&gt;&gt; 4*7 + 1*2  # 4 packets of 32140 bytes + 1 packet of 9190 bytes
30</pre>
</div>
</div>
<div class="paragraph">
<p>This gives us a total of 650 packets for one side of the CCD, but since we requested both sides of the CCD (see <code>sensor_sel=3</code> in the <code>dpu</code> attributes or the <code>register</code> dataset above), we end up with a total of 1300 packets (datasets) in each of the <code>data</code> groups in <code>/0</code>, <code>/1</code>, <code>/2</code>, and <code>/3</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; len(h5_fd["/0/data"])
1300</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="hdf5-inspection">4.3. Inspecting HDF5 files with the toolset from the CGSE</h3>
<div class="paragraph">
<p>So far, we have been inspecting the HDF5 files using code entered in the Python REPL. The Common-EGSE however also provides a nice GUI to visualise all groups, datasets and attributes from the PLATO HDF5 files. If you were involved in camera testing, you have probably seen the DPU Image Display GUI that in real-time updates the image data and other metadata received from the camera. The life data is constructed from the SpaceWire data packets on-the-fly, not from an HDF5 file. An example of a measurement at CSL during alignment is given in the screenshot below.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../images/dpu_ui.png" alt="dpu ui" width="80%">
</div>
</div>
<div class="paragraph">
<p>The same visualisation is provided by the stand-alone application <code>hdf5_ui</code> that can be started from the terminal. This N-FEE Data Inspector GUI re-uses parts of the code from the DPU Image Display GUI, only the data that is shown is now read from an HDF5 file. Let&#8217;s explore the functionality provided by the HDF5 GUI using a dataset that was taken at CSL during Short Functional Tests (SFT), i.e. data taken with the N-FEE simulator instead of the real instrument. When the GUI starts up, select the dataset '3' which will show the simulated image data as in the screenshot below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ hdf5_ui 20221222_CSL1_N-FEE_SPW_00433.hdf5</pre>
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../images/hdf5_ui-01.png" alt="hdf5 ui 01" width="80%">
</div>
</div>
<div class="paragraph">
<p>Now you can start navigating through the data by clicking and unfolding items in the upper-left panel. The screenshots below show typically some of the actions you can do and what type of data is presented.</p>
</div>
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="../images/hdf5_ui-02.png" alt="hdf5 ui 02">
</div>
<div class="title">Screenshot 1 – Inspecting the Register Map</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="../images/hdf5_ui-03.png" alt="hdf5 ui 03">
</div>
<div class="title">Screenshot 2 – The Housekeeping Packet</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="../images/hdf5_ui-04.png" alt="hdf5 ui 04">
</div>
<div class="title">Screenshot 3 – Image zoom and data attributes</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="../images/hdf5_ui-05.png" alt="hdf5 ui 05">
</div>
<div class="title">Screenshot 4 – Inspection of individual data packets</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Screenshot 1</strong> shows the Register Map for this cycle. There is only one Register Map per HDF5 file. The register map is the status at the time the timecode is sent for the first readout frame. Commanding is possible at the end of any readout, but the changes are only activated in the FPGA on a long pulse of 400ms. That is when also the register map is stored in the HDF5 file. There are two register parameters<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup> that are updated on every pulse, long and short pulse. Those parameters are <code>sensor_sel</code> and <code>ccd_readout_order</code> and because of this more regular update possibility these parameters are also available as attributes in each of the <code>data</code> groups. So, in principle, the CCD side can be changed at every readout, and this will be recorded in the <code>sensor_sel</code> attribute to the <code>data</code> group. Above the register map table, you can see an empty text field. In this field you can type a string pattern to filter the parameters shown in the table. The string pattern shall be a simple string or a regular expression and it will match either the register name or the parameter name. For example, to list only parameters for register '3' enter 'reg_3_config' in this search field, to see all windowing size parameters you can enter something like <code>win.*size</code>.</p>
</div>
<div class="paragraph">
<p><strong>Screenshot 2</strong> shows the view of the housekeeping packet for that readout frame. The housekeeping packet is sent for each sync pulse (long and short) right after the timecode. So, you will find a <code>hk</code> dataset for each of the readout frames. The housekeeping view currently only shows the data as raw values, no conversion to engineering values like voltages or temperatures is done at this stage.</p>
</div>
<div class="paragraph">
<p><strong>Screenshot 3</strong> shows a combination of information. The images are zoomed in to show (1) that we have 25 serial prescan pixels, these are the pixels before the red line in the left part of the screenshot (F-side), and (2) we have 30 parallel overscan pixels, above the red horizontal line in the right part of the screenshot (E-side). We can now also clearly see that we have image pattern data (XXXX add reference here). The cross that is visible in the image data is put there by the N-FEE simulator to ease the validation of the image coordinates and pixel positions. Clicking the '3' group in the tree view will show the image data, if you expand the entry by clicking the small handle before the '3', you can then click the <code>data</code> group. This will not change the image display, but will update the details panel in the lower-left part of the screenshot. Select 'attributes' to see the specific parameters attached to this 'data' group.</p>
</div>
<div class="paragraph">
<p>In <strong>Screenshot 4</strong> I have further expanded the <code>data</code> group and the tree view now shows the individual SpaceWire data packets. If you click on one of them, the content of the packet is printed in different formats and also the header is printed in a human readable format. The parameter 'w' is the number of pixels in the data part of the SpW packet. As said above, we have 7 rows per packet &#8594; 16065 / 7 = 2295, which is the number op pixels per row. This view is mainly there for debugging and can change in the future.</p>
</div>
<hr>
<div class="paragraph">
<p>TBW</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-square-o"></i> How can we inspect the content of the data packets &#8594; DataPackets class</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Explain when we have a commands group and what it contains</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> What is the relation between the number of HDF5 files and the <code>num_cycles</code> value?</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> How to visualize the HDF5 files with the GUI <code>hdf5_ui</code></p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Which scripts do we have to inspect and check HDF5 files?</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_telemetry_tm_dictionary">4.4. The Telemetry (TM) Dictionary</h3>
<div class="paragraph">
<p>The <code>tm-dicionary.csv</code> file (further referred to as the "telemetry &#8482; dictionary") provides an overview of all housekeeping (HK) and metrics parameters in the EGSE system.  It is used:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>By the <code>get_housekeeping</code> function (in <code>egse.hk</code>) to know in which file the values of the requested HK parameter should be looked for;</p>
</li>
<li>
<p>To create a translation table to convert — in the <code>get_housekeeping</code> function of the device protocols — the original names from the device itself to the EGSE-conform name (see further);</p>
</li>
<li>
<p>For the HK that should be included in the synoptics: to create a translation table to convert the original device-specific (but EGSE-conform) names to the corresponding synoptical name in the Synoptics Manager (in <code>egse.synoptics</code>).</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_the_files_content">4.4.1. The File&#8217;s Content</h4>
<div class="paragraph">
<p>For each device we need to add all HK parameters to the TM dictionary.  For each of these parameters you need to add one line with the following information (in the designated columns):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column name</th>
<th class="tableblock halign-left valign-top">Expected content</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TM source</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arbitrary (but clear) name for the device.  Ideally this name is short but clear enough for outsiders to understand what the device/process is for.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage mnemonic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage mnemonic of the device.  This will show up in the filename of the device HK file and can be found in the settings file (<code>settings.yaml</code>) in the block for that specific device/process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CAM EGSE mnemonic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EGSE-conform parameter name (see next Sect.) for the parameter.  Note that the same name should be used for the HK parameter and the corresponding metrics.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original name in EGSE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In the <code>get_housekeeping</code> method of the device protocols, it is - in some cases (e.g. for the N-FEE HK) - possible that you have a dictionary with all/most of the required HK parameters, but with a non-EGSE-conform name.  The latter should go in this column.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of corresponding timestamp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In the device HK files, one of the columns holds the timestamp for the considered HK parameter.  The name of that timestamp column should go in this column of the TM dictionary.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Origin of synoptics at CSL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should only be filled for the entries in the TM dictionary for the Synoptics Manager.  This is the original EGSE-conform name of the synoptical parameter in the CSL-specific HK file comprising this HK parameter.  Leave empty for all other devices!</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Origin of synoptics at SRON</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should only be filled for the entries in the TM dictionary for the Synoptics Manager.  This is the original EGSE-conform name of the synoptical parameter in the SRON-specific HK file comprising this HK parameter.  Leave empty for all other devices!</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Origin of synoptics at IAS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should only be filled for the entries in the TM dictionary for the Synoptics Manager.  This is the original EGSE-conform name of the synoptical parameter in the IAS-specific HK file comprising this HK parameter.  Leave empty for all other devices!</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Origin of synoptics at INTA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should only be filled for the entries in the TM dictionary for the Synoptics Manager.  This is the original EGSE-conform name of the synoptical parameter in the INTA-specific HK file comprising this HK parameter.  Leave empty for all other devices!</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Short description of what the parameter represents.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MON screen</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the Grafana dashboard in which the parameter can be inspected.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unit cal1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unit in which the parameter is expressed.  Try to be consistent in the use of the names (e.g. Volts, Ampère, Seconds, Degrees, DegCelsius, etc.).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">offset b cal1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For raw parameters that can be calibrated with a linear relationship, this column holds the offset <code>b</code> in the relation <code>calibrated = a * raw + b</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">slope a cal1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For raw parameters that can be calibrated with a linear relationship, this column holds the slope <code>a</code> in the relation <code>calibrated = a * raw + b</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">calibration function</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not used at the moment.  Can be left emtpy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MAX nonops</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum non-operational value.  Should be expressed in the same unit as the parameter itself.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MIN nonops</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum non-operational value.  Should be expressed in the same unit as the parameter itself.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MAX ops</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum operational value.  Should be expressed in the same unit as the parameter itself.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MIN ops</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum operational value.  Should be expressed in the same unit as the parameter itself.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any additional comment about the parameter that is interesting enough to be mentioned but not interesting enough for it to be included in the description of the parameter.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Since the TM dictionary grows longer and longer, the included devices/processes are ordered as follows (so it is easier to find back the telemetry parameters that apply to your TH):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Devices/processes that all test houses have in common: AEU, N-FEE, TCS, Synoptics Manager, etc.</p>
</li>
<li>
<p>Devices that are CSL-specific;</p>
</li>
<li>
<p>Devices that are SRON-specific;</p>
</li>
<li>
<p>Devices that are IAS-specific;</p>
</li>
<li>
<p>Devices that are INTA-specific.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_egse_conform_parameter_names">4.4.2. EGSE-Conform Parameter Names</h4>
<div class="paragraph">
<p>The correct (i.e. EGSE-conform) naming of the telemetry should be taken care of in the <code>get_housekeeping</code> method of the device protocols.</p>
</div>
<div class="sect4">
<h5 id="_common_parameters">Common Parameters</h5>
<div class="paragraph">
<p>A limited set of devices/processes is shared by (almost) all test houses.  Their telemetry should have the following prefix:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 50%;">
<colgroup>
<col style="width: 80%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Device/process</th>
<th class="tableblock halign-left valign-top">Prefix</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuration Manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CM_</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AEU (Ancillary Electrical Unit)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GAEU_</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">N-FEE (Normal Front-End Electronics)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NFEE_</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCS (Thermal Control System)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GTCS_</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FOV (source position)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FOV_</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Synoptics Manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GSYN_</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_th_specific_parameters">TH-Specific Parameters</h5>
<div class="paragraph">
<p>Some devices are used in only one or two test houses.  Their telemetry should have TH-specific prefix:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 50%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">TH</th>
<th class="tableblock halign-left valign-top">Prefix</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GCSL_</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSL1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GCSL1_</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSL2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GCSL2_</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SRON</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GSRON_</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IAS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GIAS_</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GINTA_</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_synoptics">4.4.3. Synoptics</h4>
<div class="paragraph">
<p>The Synoptics Manager groups a pre-defined set of HK values in a single file.  It&#8217;s not the original EGSE-conform names that are use in the synoptics, but names with the prefix <code>GSYN_</code>.  The following information is comprised in the synoptics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Acquired by common devices/processes:</p>
</li>
<li>
<p>Calibrated temperatures from the N-FEE;</p>
</li>
<li>
<p>Calibrated temperatures from the TCS;</p>
</li>
<li>
<p>Source position (commanded + actual).</p>
</li>
<li>
<p>Acquired by TH-specific devices:</p>
</li>
<li>
<p>Calibrated temperatures from the TH DAQs;</p>
</li>
<li>
<p>Information about the OGSE (intensity, lamp and laser status, shutter status, measured power).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For the first type of telemetry parameters, their original EGSE-conform name should be put into the column <code>CAM EGSE mnemonic</code>, as they are not TH-specific.</p>
</div>
<div class="paragraph">
<p>The second type of telemetry parameters is measured with TH-specific devices.  The original TH-specific  EGSE-conform name should go in the column <code>Origin of synoptics at ...</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_translation_tables">4.4.4. Translation Tables</h4>
<div class="paragraph">
<p>The translation tables that were mentioned in the introduction, can be created by the <code>read_conversion_dict</code> function in <code>egse.hk</code>.  It takes the following input parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>storage_mnemonic</code>: Storage mnemonic of the device/process generating the HK;</p>
</li>
<li>
<p><code>use_site</code>: Boolean indicating whether you want the translation table for the TH-specific telemetry rather than the common telemetry (<code>False</code> by default).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To apply the actual translation, you can use the <code>convert_hk_names</code> function from <code>egse.hk</code>, which takes the following input parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>original_hk</code>: HK dictionary with the original names;</p>
</li>
<li>
<p><code>conversion_dict</code>: Conversion table you got as output from the <code>read_conversion_dict</code> function.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_sending_hk_to_synoptics">4.4.5. Sending HK to Synoptics</h4>
<div class="paragraph">
<p>When you want to include HK of your devices, you need to take the following actions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Make sure that the TM dictionary is complete (as described above);</p>
</li>
<li>
<p>In the device protocol:</p>
<div class="ulist">
<ul>
<li>
<p>At initialisation: establish a connection with the Synoptics Manager: <code>self.synoptics = SynopticsManagerProxy()</code></p>
</li>
<li>
<p>In <code>get_housekeeping</code> (both take the dictionary with HK as input):</p>
<div class="ulist">
<ul>
<li>
<p>For TH-specific HK: <code>self.synoptics.store_th_synoptics(hk_for_synoptics)</code>;</p>
</li>
<li>
<p>For common HK: <code>self.synoptics.store_common_synoptics(hk_for_synoptics)</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please, do not introduce new synoptics without further discussion!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="csv-data-files">4.5. The format of the CSV data files</h3>
<div class="paragraph">
<p>All regular housekeeping is stored in CSV files by the storage manager. This section will describe the general format of the CSV files and more detailed information on the content for a number of specific files. For an in-depth description of where, when and how the CSV files are created, have a look into the developer manual, section XXXXX.</p>
</div>
<div class="paragraph">
<p>The CSV files are comma (',') separated and have a one-line header that contains the column names. All CSV files have at least one mandatory column, which is the 'timestamp' column. This column holds the timestamp of the data in that row and has the following format <code>YYYY-mm-ddTHH:MM:SS.μs+0000</code>. Note that the order of the columns is undetermined and the timestamp column is therefore not always the first column. When reading and processing the CSV files, use the column name instead of the column index.</p>
</div>
<div class="paragraph">
<p>The CVS file can be read with the Pandas <code>read_csv()</code> function. That will read all the housekeeping data into a Pandas DataFrame.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>import pandas as pd
df = pd.read_csv(filename)</pre>
</div>
</div>
<div class="paragraph">
<p>The timestamp string can be parsed into a datetime object with the format <code>%Y-%m-%dT%H:%M:%S.%f%z</code> (see <a href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes">format-codes</a> for an explanation of the format).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>import datetime
TIME_FORMAT = '%Y-%m-%dT%H:%M:%S.%f%z'
dt = datetime.datetime.strptime(dt_string, TIME_FORMAT)</pre>
</div>
</div>
<div class="paragraph">
<p>The CGSE has a function defined in the <code>egse.system</code> module that does this for you consistently. Note that the <code>format_datetime()</code> is the function used to create the timestamp string for the CSV file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>from egse.system import format_datetime, str_to_datetime
dt = str_to_datetime(format_datetime())</pre>
</div>
</div>
<div class="paragraph">
<p>The time resolution of the timestamps is 1μs and the timezone is UTC.</p>
</div>
<div class="paragraph">
<p>If you need to convert the timestamp into a unix timestamp, use the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ts = str_to_datetime(format_datetime()).timestamp()</pre>
</div>
</div>
<div class="paragraph">
<p>This will return a float similar to that returned by <a href="https://docs.python.org/3/library/time.html#time.time"><code>time.time()</code></a>.</p>
</div>
<div class="sect3">
<h4 id="_the_device_housekeeping">4.5.1. The Device Housekeeping</h4>
<div class="paragraph">
<p>TBW</p>
</div>
</div>
<div class="sect3">
<h4 id="n-fee-hk">4.5.2. The N-FEE Housekeeping</h4>
<div class="paragraph">
<p>The N-FEE sends out a housekeeping packet on every sync pulse, right after it sends the timecode. This housekeeping packet contains temperature sensor values, voltages, currents, some status parameters and error codes. Sensor values, voltages and currents are raw measures and are converted into calibrated values by the <code>n_fee_hk</code> process. The conversion is defined in the Setup for that camera (in the <code>setup.camera.fee.calibration</code> entry).</p>
</div>
<div class="paragraph">
<p>All raw and calibrated housekeeping values are stored in the N-FEE-HK CSV file. There are currently about 154 columns in that file. The timestamp of each row is the reception time of the HK packet by the DPU Processor.</p>
</div>
<div class="paragraph">
<p>Actually, since release 2023.20.0+CGSE of the Common-EGSE, there are two rows of HK values per timecode. The DPU Processor requests all HK data from the N-FEE immediately after receiving the image data from the N-FEE and before sending any RMAP requests. Even if no image data is generated, e.g. in STANDBY or DUMP mode, the additional updated housekeeping is requested. This additional information is needed because the housekeeping contains information, especially error codes, on the readout and data transfer. Also interesting to know is that the first housekeeping packet sent by the N-FEE contains information about the previous readout, while the updated HK data that was requested from the N-FEE contains information about the current readout.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_synoptics_housekeeping">4.5.3. The Synoptics Housekeeping</h4>
<div class="paragraph">
<p>TBW</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="obsid-table">5. The OBSID Table file</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>obsid-table.txt</code> file contains an ordered list of all observations that are started. I say <em>started</em> and not <em>run</em> because the list also contains observations that were interrupted due to an exception or for whatever reason.</p>
</div>
<div class="paragraph">
<p>Each line in the file describes one observation with the following fields: test_id, site_id, setup_id, timestamp, function, and description. The fields are separated by a space, but a simple split will not work<sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup> because of (1) the 'function' field that also contains spaces between the arguments and (2) the 'description' field.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The test_id is a successive number that is assigned to each test and is unique for each site.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">site_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the site, or test house where this observation ran. For CSL the site_id represents the cleanroom and has a number attached to identify the room, i.e. CSL1 and CSL2.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">setup_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The identifier of the Setup that was active during the observation. The Setup can not be changed when an observation is running, so each observation has one Setup ID only.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">timestamp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The timestamp of the start of an observation. This timestamp has the format <code>YYYY-mm-ddTHH:MM:SS.μs+0000</code> and is a UTC time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">function</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The function that was executed including a stringification of the arguments. When the observation is started and ended with the <code>start__observation()</code> and <code>end_observation()</code> functions, no function is identified since any python code between the two marker functions is part of the observation. In this case, the field contains <code>unknown_function()</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This last field is optional and contains a description for the observation. The description is provided by either the developer of a building block, or the user. The <code>description</code> parameter is a keyword argument for both the <code>start_observation()</code> and the <code>execute()</code> functions. The description field is always enclosed within square brackets, i.e. '[description]'.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The fields <code>test_id</code>, <code>site_id</code>, and <code>setup_id</code> together form the observation identifier, i.e. <code>OBSID</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="list-of-files">6. List of Files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section will list all files that are relevant for the proper working of the Common-egse (CGSE) and test scripts (TS).</p>
</div>
<div class="paragraph">
<p>The configuration files are described in <a href="#XXXXX">[XXXXX]</a>. The data files are described in the previous sections.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Filename</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Location</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>obsid-table.txt</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a sorted list of  all observations that have been started with <code>start_observation</code> or the <code>execute</code> command.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">data storage location, inside &lt;site&gt; folder</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>last_setup_id.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">contains just one integer, i.e. the last Setup ID that was/is loaded in the configuration control manager. The file is used by the <code>cm_cs</code> when restarted.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">data storage location, inside &lt;site&gt; folder</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hdf5_queue</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a directory containing an SQLite database with processed and to-be-processed HDF5 files, used by the FITS generation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">data storage location, inside &lt;site&gt; folder</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>startup.py</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a Python startup file loaded when a Python session is started or when the Jupyter kernel is started from the Operator Task GUI. There is such a file for the CGSE and for the test scripts. This requires the PYTHONSTARTUP environment variable to be defined.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">installation folder of the project, usually <code>~/git/plato-common-egse</code> or <code>~/git/plato-test-scripts</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>env.txt</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">contains the definitions of all environment variables that are required by the core services when they are started by Systemd.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the location is set by the <code>EnvironmentFile</code> variable in the service file, default location is <code>/cgse</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>local_settings.yaml</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">contains the local site-specific settings that overwrite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">set by the <code>PLATO_LOCAL_SETTINGS</code> environment variable, usually <code>/cgse</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bbid.yaml</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">contains the MD5 sums for all the building blocks. This file is dynamically updated, but not used yet. The idea was to have a unique identifier for all building block regardless where they are crated/defined.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in the folder where the <code>camtest.core</code> is located, usually <code>~/git/plato-test-scripts/src/camtest/core</code>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Format version 2.5 was introduced on 24/04/2023, so the HDF5 examples are not yet updated for this format version.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. There are actually more register parameters that are updated on every sync pulse, but those are all windowing parameters that are not used in camera testing.
</div>
<div class="footnote" id="_footnotedef_3">
<a href="#_footnoteref_3">3</a>. Because of this we are rethinking the format and content of the <code>obsid-table.txt</code> file, see e.g. <a href="https://github.com/IvS-KULeuven/plato-test-scripts/issues/1002">TS issue #1002</a>.
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.3<br>
Last updated 2023-06-19 16:38:04 +0200
</div>
</div>
<script>
/*! Asciidoctor Tabs | Copyright (c) 2018-present Dan Allen | MIT License */
;(function () {
  'use strict'

  var hash = window.location.hash
  find('.tabset').forEach(function (tabset) {
    var active
    var tabs = tabset.querySelector('.tabs')
    if (tabs) {
      var first
      find('li', tabs).forEach(function (tab, idx) {
        var id = (tab.querySelector('a[id]') || tab).id
        if (!id) return
        var pane = tabset.querySelector('.tab-pane[aria-labelledby~="' + id + '"]')
        if (!pane) return
        if (!idx) first = { tab: tab, pane: pane }
        if (!active && hash === '#' + id && (active = true)) {
          tab.classList.add('is-active')
          if (pane) pane.classList.add('is-active')
        } else if (!idx) {
          tab.classList.remove('is-active')
          if (pane) pane.classList.remove('is-active')
        }
        tab.addEventListener('click', activateTab.bind({ tabset: tabset, tab: tab, pane: pane }))
      })
      if (!active && first) {
        first.tab.classList.add('is-active')
        if (first.pane) first.pane.classList.add('is-active')
      }
    }
    tabset.classList.remove('is-loading')
  })

  function activateTab (e) {
    var tab = this.tab
    var pane = this.pane
    find('.tabs li, .tab-pane', this.tabset).forEach(function (it) {
      it === tab || it === pane ? it.classList.add('is-active') : it.classList.remove('is-active')
    })
    e.preventDefault()
  }

  function find (selector, from) {
    return Array.prototype.slice.call((from || document).querySelectorAll(selector))
  }
})()
</script>
</body>
</html>