<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>egse.env API documentation</title>
<meta name="description" content="This module provides functionality to work with and check your Python environment." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>egse.env</code></h1>
</header>
<section id="section-intro">
<p>This module provides functionality to work with and check your Python environment.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;
This module provides functionality to work with and check your Python environment.
&#34;&#34;&#34;
from pathlib import Path

from egse.system import all_logging_disabled
from egse.system import ignore_m_warning

ENV_PLATO_COMMON_EGSE = &#34;PLATO_COMMON_EGSE_PATH&#34;
ENV_PLATO_INSTALL = &#34;PLATO_INSTALL_LOCATION&#34;
ENV_PLATO_CONF_DATA = &#34;PLATO_CONF_DATA_LOCATION&#34;
ENV_PLATO_CONF_REPO = &#34;PLATO_CONF_REPO_LOCATION&#34;
ENV_PLATO_STORAGE_DATA = &#34;PLATO_DATA_STORAGE_LOCATION&#34;
ENV_PLATO_LOG_DATA = &#34;PLATO_LOG_FILE_LOCATION&#34;
ENV_PLATO_LOCAL_SETTINGS = &#34;PLATO_LOCAL_SETTINGS&#34;

PLATO_ENV_VARIABLES = [globals()[x] for x in globals() if x.startswith(&#39;ENV_PLATO_&#39;)]

__all__ = [
    &#34;get_data_storage_location&#34;,
    &#34;get_conf_data_location&#34;,
    &#34;get_log_file_location&#34;,
    *PLATO_ENV_VARIABLES
]


def get_data_storage_location(setup=None, site_id: str = None) -&gt; str:
    &#34;&#34;&#34;
    Returns the full path of the data storage location for the Site as
    in the given Setup. If the Setup is not given, it is requested from the
    configuration manager unless the `site_id` argument is given.

    Note: when you specify the `site_id` as an argument, it takes precedence
          over the site_id that is specified in the Setup.

    Args:
        setup: the Setup from which the Camera name and Site ID are taken
        site_id: the site identifier (to be used instead of the site_id in the Setup)

    Returns:
        The full path of data storage location as a string.

    Raises:
        A ValueError when no Setup can be loaded.
    &#34;&#34;&#34;

    import os

    if site_id is None:

        from egse.setup import Setup
        from egse.state import GlobalState
        setup: Setup = setup or GlobalState.setup

        if setup is None:
            raise ValueError(&#34;Could not determine Setup, which is None, even after loading from the configuration manager.&#34;)

        site = setup.site_id
    else:
        site = site_id

    data_root = os.environ[ENV_PLATO_STORAGE_DATA]
    data_root = data_root.rstrip(&#39;/&#39;)

    return data_root if data_root.endswith(site) else f&#34;{data_root}/{site}&#34;


def get_conf_data_location(setup=None) -&gt; str:
    &#34;&#34;&#34;
    Returns the full path of the location of the Setups for the Site.
    If the Setup is not given, it is requested from the configuration manager.

    Args:
        setup: the Setup from which the Camera name and Site ID are taken

    Returns:
        The full path of location of the Setups as a string.

    Raises:
        A ValueError when no Setup can be loaded.
    &#34;&#34;&#34;

    data_root = get_data_storage_location(setup=setup)

    return f&#34;{data_root}/conf&#34;


def get_log_file_location() -&gt; str:
    &#34;&#34;&#34;
    Returns the full path of the location of the log files. The log file location is read from the environment
    variable PLATO_LOG_FILE_LOCATION. The location shall be independent of the Setup, Camera ID or any other
    setting that is subject to change.

    If the environment variable is not set, a default log file location is created from the data storage location as
    follows: $PLATO_DATA_STORAGE_LOCATION/&lt;SITE_ID&gt;/log.

    Returns:
        The full path of location of the log files as a string.

    &#34;&#34;&#34;
    import os

    try:
        log_data_root = os.environ[ENV_PLATO_LOG_DATA]
    except KeyError:
        data_root = os.environ[ENV_PLATO_STORAGE_DATA]
        data_root = data_root.rstrip(&#39;/&#39;)

        from egse.settings import get_site_id
        site = get_site_id()

        log_data_root = f&#34;{data_root}/{site}/log&#34;

    return log_data_root


ignore_m_warning(&#39;egse.env&#39;)

if __name__ == &#34;__main__&#34;:

    import argparse
    import os
    import sys
    import rich

    parser = argparse.ArgumentParser()
    parser.add_argument(
        &#34;--full&#34;,
        default=False,
        action=&#34;store_true&#34;,
        help=&#34;Print a full report on environment variables and paths.&#34;,
    )
    parser.add_argument(
        &#34;--doc&#34;,
        default=False,
        action=&#34;store_true&#34;,
        help=&#34;Print help on the environment variables and paths.&#34;,
    )

    args = parser.parse_args()

    def check_env_dir(env_var: str):

        value = os.environ.get(env_var)

        if value is None:
            value = &#34;[bold red]not set&#34;
        elif not value.startswith(&#39;/&#39;):
            value = f&#34;[default]{value} [bold orange3](this is a relative path!)&#34;
        elif not os.path.exists(value):
            value = f&#34;[default]{value} [bold red](location doesn&#39;t exist!)&#34;
        elif not os.path.isdir(value):
            value = f&#34;[default]{value} [bold red](location is not a directory!)&#34;
        else:
            value = f&#34;[default]{value}&#34;
        return value


    def check_env_file(env_var: str):

        value = os.environ.get(env_var)

        if value is None:
            value = &#34;[bold red]not set&#34;
        elif not os.path.exists(value):
            value = f&#34;[default]{value} [bold red](location doesn&#39;t exist!)&#34;
        else:
            value = f&#34;[default]{value}&#34;
        return value

    rich.print(&#34;Environment variables:&#34;)

    for var in PLATO_ENV_VARIABLES:
        if var.endswith(&#34;_SETTINGS&#34;):
            rich.print(f&#34;    {var} = {check_env_file(var)}&#34;)
        else:
            rich.print(f&#34;    {var} = {check_env_dir(var)}&#34;)

    rich.print()
    rich.print(&#34;Generated locations and filenames&#34;)

    with all_logging_disabled():
        try:
            rich.print(f&#34;    {get_data_storage_location() = }&#34;, flush=True)
            location = get_data_storage_location()
            if not Path(location).exists():
                rich.print(&#34;[red]ERROR: The generated data storage location doesn&#39;t exist![/]&#34;)
        except ValueError as exc:
            rich.print(f&#34;    get_data_storage_location() = [red]{exc}[/]&#34;)

        try:
            rich.print(f&#34;    {get_conf_data_location() = }&#34;, flush=True)
            location = get_conf_data_location()
            if not Path(location).exists():
                rich.print(&#34;[red]ERROR: The generated configuration data location doesn&#39;t exist![/]&#34;)
        except ValueError as exc:
            rich.print(f&#34;    get_conf_data_location() = [red]{exc}[/]&#34;)

        try:
            rich.print(f&#34;    {get_log_file_location() = }&#34;, flush=True)
            location = get_log_file_location()
            if not Path(location).exists():
                rich.print(&#34;[red]ERROR: The generated log files location doesn&#39;t exist![/]&#34;)
        except ValueError as exc:
            rich.print(f&#34;    get_log_file_location() = [red]{exc}[/]&#34;)

    if args.full:
        rich.print()
        rich.print(f&#34;    PYTHONPATH=[default]{os.environ.get(&#39;PYTHONPATH&#39;)}&#34;)
        rich.print()
        python_path_msg = &#34;\n      &#34;.join(sys.path)
        rich.print(f&#34;    sys.path=[\n      {python_path_msg}\n    ]&#34;)
        path_msg = &#34;\n      &#34;.join(os.environ.get(&#34;PATH&#34;).split(&#34;:&#34;))
        rich.print(f&#34;    PATH=[\n      {path_msg}\n    ]&#34;)

    help_msg = f&#34;&#34;&#34;
[bold]{ENV_PLATO_COMMON_EGSE}[/bold]:
    This variable should point to the root of the working copy of the &#39;plato-common-egse&#39; 
    project. Its value is usually &#39;~/git/plato-common-egse&#39; which is considered the default 
    location.

[bold]{ENV_PLATO_INSTALL}[/bold]:
    This variable shall point to the location where the CGSE will be installed and is 
    usually set to `/cgse`. The variable is used by the [blue]update_cgse[/blue] script.

[bold]{ENV_PLATO_CONF_DATA}[/bold]:
    This directory is the root folder for all the Setups of the site, the site is part
    of the name. By default, this directory is located in the overall data storage folder.

[bold]{ENV_PLATO_CONF_REPO}[/bold]:
    This variable is the root of the working copy of the &#39;plato-cgse-conf&#39; project. 
    The value is usually set to `~/git/plato-cgse-conf`.

[bold]{ENV_PLATO_STORAGE_DATA}[/bold]:
    This directory contains all the data files from the control servers and other
    components. This folder is the root folder for all data from all cameras and 
    all sites. Below this folder shall be a folder for each of the cameras and in 
    there a sub-folder for each of the sites where that camera was tested. The 
    hierarchy is therefore: `$PLATO_DATA_STORAGE_LOCATION/&lt;camera name&gt;/&lt;site id&gt;.
    Each of those folder shall contain at least the sub-folder [blue]daily[/blue], and [blue]obs[/blue]. 
    
    There is also a file called [blue]obsid-table-&lt;site id&gt;.txt[/blue] which is maintained by 
    the configuration manager and contains information about the observations that
    were run and the commands to start those observation.

[bold]{ENV_PLATO_LOG_DATA}[/bold]:
    This directory contains the log files with all messages that were sent to the 
    logger control server. The log files are rotated on a daily basis at midnight UTC.
    By default, this directory is also located in the overall data storage folder.

[bold]{ENV_PLATO_LOCAL_SETTINGS}[/bold]:
    This file is used for local site-specific settings. When the environment 
    variable is not set, no local settings will be loaded. By default, this variable
    is assumed to be &#39;/cgse/local_settings.yaml&#39;.
&#34;&#34;&#34;

    if args.doc:
        rich.print(help_msg)

    if not args.full:
        rich.print()
        rich.print(&#34;use the &#39;--full&#39; flag to get a more detailed report, &#39;--doc&#39; for help on the variables.&#34;)

    # Do we still use these environment variables?
    #
    # PLATO_WORKDIR
    # PLATO_COMMON_EGSE_PATH - YES</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="egse.env.PLATO_COMMON_EGSE_PATH"><code class="name flex">
<span>def <span class="ident">PLATO_COMMON_EGSE_PATH</span></span>(<span>) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the full path of the location of the log files. The log file location is read from the environment
variable PLATO_LOG_FILE_LOCATION. The location shall be independent of the Setup, Camera ID or any other
setting that is subject to change.</p>
<p>If the environment variable is not set, a default log file location is created from the data storage location as
follows: $PLATO_DATA_STORAGE_LOCATION/<SITE_ID>/log.</p>
<h2 id="returns">Returns</h2>
<p>The full path of location of the log files as a string.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_log_file_location() -&gt; str:
    &#34;&#34;&#34;
    Returns the full path of the location of the log files. The log file location is read from the environment
    variable PLATO_LOG_FILE_LOCATION. The location shall be independent of the Setup, Camera ID or any other
    setting that is subject to change.

    If the environment variable is not set, a default log file location is created from the data storage location as
    follows: $PLATO_DATA_STORAGE_LOCATION/&lt;SITE_ID&gt;/log.

    Returns:
        The full path of location of the log files as a string.

    &#34;&#34;&#34;
    import os

    try:
        log_data_root = os.environ[ENV_PLATO_LOG_DATA]
    except KeyError:
        data_root = os.environ[ENV_PLATO_STORAGE_DATA]
        data_root = data_root.rstrip(&#39;/&#39;)

        from egse.settings import get_site_id
        site = get_site_id()

        log_data_root = f&#34;{data_root}/{site}/log&#34;

    return log_data_root</code></pre>
</details>
</dd>
<dt id="egse.env.PLATO_CONF_DATA_LOCATION"><code class="name flex">
<span>def <span class="ident">PLATO_CONF_DATA_LOCATION</span></span>(<span>) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the full path of the location of the log files. The log file location is read from the environment
variable PLATO_LOG_FILE_LOCATION. The location shall be independent of the Setup, Camera ID or any other
setting that is subject to change.</p>
<p>If the environment variable is not set, a default log file location is created from the data storage location as
follows: $PLATO_DATA_STORAGE_LOCATION/<SITE_ID>/log.</p>
<h2 id="returns">Returns</h2>
<p>The full path of location of the log files as a string.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_log_file_location() -&gt; str:
    &#34;&#34;&#34;
    Returns the full path of the location of the log files. The log file location is read from the environment
    variable PLATO_LOG_FILE_LOCATION. The location shall be independent of the Setup, Camera ID or any other
    setting that is subject to change.

    If the environment variable is not set, a default log file location is created from the data storage location as
    follows: $PLATO_DATA_STORAGE_LOCATION/&lt;SITE_ID&gt;/log.

    Returns:
        The full path of location of the log files as a string.

    &#34;&#34;&#34;
    import os

    try:
        log_data_root = os.environ[ENV_PLATO_LOG_DATA]
    except KeyError:
        data_root = os.environ[ENV_PLATO_STORAGE_DATA]
        data_root = data_root.rstrip(&#39;/&#39;)

        from egse.settings import get_site_id
        site = get_site_id()

        log_data_root = f&#34;{data_root}/{site}/log&#34;

    return log_data_root</code></pre>
</details>
</dd>
<dt id="egse.env.PLATO_CONF_REPO_LOCATION"><code class="name flex">
<span>def <span class="ident">PLATO_CONF_REPO_LOCATION</span></span>(<span>) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the full path of the location of the log files. The log file location is read from the environment
variable PLATO_LOG_FILE_LOCATION. The location shall be independent of the Setup, Camera ID or any other
setting that is subject to change.</p>
<p>If the environment variable is not set, a default log file location is created from the data storage location as
follows: $PLATO_DATA_STORAGE_LOCATION/<SITE_ID>/log.</p>
<h2 id="returns">Returns</h2>
<p>The full path of location of the log files as a string.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_log_file_location() -&gt; str:
    &#34;&#34;&#34;
    Returns the full path of the location of the log files. The log file location is read from the environment
    variable PLATO_LOG_FILE_LOCATION. The location shall be independent of the Setup, Camera ID or any other
    setting that is subject to change.

    If the environment variable is not set, a default log file location is created from the data storage location as
    follows: $PLATO_DATA_STORAGE_LOCATION/&lt;SITE_ID&gt;/log.

    Returns:
        The full path of location of the log files as a string.

    &#34;&#34;&#34;
    import os

    try:
        log_data_root = os.environ[ENV_PLATO_LOG_DATA]
    except KeyError:
        data_root = os.environ[ENV_PLATO_STORAGE_DATA]
        data_root = data_root.rstrip(&#39;/&#39;)

        from egse.settings import get_site_id
        site = get_site_id()

        log_data_root = f&#34;{data_root}/{site}/log&#34;

    return log_data_root</code></pre>
</details>
</dd>
<dt id="egse.env.PLATO_DATA_STORAGE_LOCATION"><code class="name flex">
<span>def <span class="ident">PLATO_DATA_STORAGE_LOCATION</span></span>(<span>) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the full path of the location of the log files. The log file location is read from the environment
variable PLATO_LOG_FILE_LOCATION. The location shall be independent of the Setup, Camera ID or any other
setting that is subject to change.</p>
<p>If the environment variable is not set, a default log file location is created from the data storage location as
follows: $PLATO_DATA_STORAGE_LOCATION/<SITE_ID>/log.</p>
<h2 id="returns">Returns</h2>
<p>The full path of location of the log files as a string.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_log_file_location() -&gt; str:
    &#34;&#34;&#34;
    Returns the full path of the location of the log files. The log file location is read from the environment
    variable PLATO_LOG_FILE_LOCATION. The location shall be independent of the Setup, Camera ID or any other
    setting that is subject to change.

    If the environment variable is not set, a default log file location is created from the data storage location as
    follows: $PLATO_DATA_STORAGE_LOCATION/&lt;SITE_ID&gt;/log.

    Returns:
        The full path of location of the log files as a string.

    &#34;&#34;&#34;
    import os

    try:
        log_data_root = os.environ[ENV_PLATO_LOG_DATA]
    except KeyError:
        data_root = os.environ[ENV_PLATO_STORAGE_DATA]
        data_root = data_root.rstrip(&#39;/&#39;)

        from egse.settings import get_site_id
        site = get_site_id()

        log_data_root = f&#34;{data_root}/{site}/log&#34;

    return log_data_root</code></pre>
</details>
</dd>
<dt id="egse.env.PLATO_INSTALL_LOCATION"><code class="name flex">
<span>def <span class="ident">PLATO_INSTALL_LOCATION</span></span>(<span>) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the full path of the location of the log files. The log file location is read from the environment
variable PLATO_LOG_FILE_LOCATION. The location shall be independent of the Setup, Camera ID or any other
setting that is subject to change.</p>
<p>If the environment variable is not set, a default log file location is created from the data storage location as
follows: $PLATO_DATA_STORAGE_LOCATION/<SITE_ID>/log.</p>
<h2 id="returns">Returns</h2>
<p>The full path of location of the log files as a string.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_log_file_location() -&gt; str:
    &#34;&#34;&#34;
    Returns the full path of the location of the log files. The log file location is read from the environment
    variable PLATO_LOG_FILE_LOCATION. The location shall be independent of the Setup, Camera ID or any other
    setting that is subject to change.

    If the environment variable is not set, a default log file location is created from the data storage location as
    follows: $PLATO_DATA_STORAGE_LOCATION/&lt;SITE_ID&gt;/log.

    Returns:
        The full path of location of the log files as a string.

    &#34;&#34;&#34;
    import os

    try:
        log_data_root = os.environ[ENV_PLATO_LOG_DATA]
    except KeyError:
        data_root = os.environ[ENV_PLATO_STORAGE_DATA]
        data_root = data_root.rstrip(&#39;/&#39;)

        from egse.settings import get_site_id
        site = get_site_id()

        log_data_root = f&#34;{data_root}/{site}/log&#34;

    return log_data_root</code></pre>
</details>
</dd>
<dt id="egse.env.PLATO_LOCAL_SETTINGS"><code class="name flex">
<span>def <span class="ident">PLATO_LOCAL_SETTINGS</span></span>(<span>) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the full path of the location of the log files. The log file location is read from the environment
variable PLATO_LOG_FILE_LOCATION. The location shall be independent of the Setup, Camera ID or any other
setting that is subject to change.</p>
<p>If the environment variable is not set, a default log file location is created from the data storage location as
follows: $PLATO_DATA_STORAGE_LOCATION/<SITE_ID>/log.</p>
<h2 id="returns">Returns</h2>
<p>The full path of location of the log files as a string.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_log_file_location() -&gt; str:
    &#34;&#34;&#34;
    Returns the full path of the location of the log files. The log file location is read from the environment
    variable PLATO_LOG_FILE_LOCATION. The location shall be independent of the Setup, Camera ID or any other
    setting that is subject to change.

    If the environment variable is not set, a default log file location is created from the data storage location as
    follows: $PLATO_DATA_STORAGE_LOCATION/&lt;SITE_ID&gt;/log.

    Returns:
        The full path of location of the log files as a string.

    &#34;&#34;&#34;
    import os

    try:
        log_data_root = os.environ[ENV_PLATO_LOG_DATA]
    except KeyError:
        data_root = os.environ[ENV_PLATO_STORAGE_DATA]
        data_root = data_root.rstrip(&#39;/&#39;)

        from egse.settings import get_site_id
        site = get_site_id()

        log_data_root = f&#34;{data_root}/{site}/log&#34;

    return log_data_root</code></pre>
</details>
</dd>
<dt id="egse.env.PLATO_LOG_FILE_LOCATION"><code class="name flex">
<span>def <span class="ident">PLATO_LOG_FILE_LOCATION</span></span>(<span>) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the full path of the location of the log files. The log file location is read from the environment
variable PLATO_LOG_FILE_LOCATION. The location shall be independent of the Setup, Camera ID or any other
setting that is subject to change.</p>
<p>If the environment variable is not set, a default log file location is created from the data storage location as
follows: $PLATO_DATA_STORAGE_LOCATION/<SITE_ID>/log.</p>
<h2 id="returns">Returns</h2>
<p>The full path of location of the log files as a string.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_log_file_location() -&gt; str:
    &#34;&#34;&#34;
    Returns the full path of the location of the log files. The log file location is read from the environment
    variable PLATO_LOG_FILE_LOCATION. The location shall be independent of the Setup, Camera ID or any other
    setting that is subject to change.

    If the environment variable is not set, a default log file location is created from the data storage location as
    follows: $PLATO_DATA_STORAGE_LOCATION/&lt;SITE_ID&gt;/log.

    Returns:
        The full path of location of the log files as a string.

    &#34;&#34;&#34;
    import os

    try:
        log_data_root = os.environ[ENV_PLATO_LOG_DATA]
    except KeyError:
        data_root = os.environ[ENV_PLATO_STORAGE_DATA]
        data_root = data_root.rstrip(&#39;/&#39;)

        from egse.settings import get_site_id
        site = get_site_id()

        log_data_root = f&#34;{data_root}/{site}/log&#34;

    return log_data_root</code></pre>
</details>
</dd>
<dt id="egse.env.get_conf_data_location"><code class="name flex">
<span>def <span class="ident">get_conf_data_location</span></span>(<span>setup=None) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the full path of the location of the Setups for the Site.
If the Setup is not given, it is requested from the configuration manager.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>setup</code></strong></dt>
<dd>the Setup from which the Camera name and Site ID are taken</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>The full path of location of the Setups as a string.</p>
<h2 id="raises">Raises</h2>
<p>A ValueError when no Setup can be loaded.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_conf_data_location(setup=None) -&gt; str:
    &#34;&#34;&#34;
    Returns the full path of the location of the Setups for the Site.
    If the Setup is not given, it is requested from the configuration manager.

    Args:
        setup: the Setup from which the Camera name and Site ID are taken

    Returns:
        The full path of location of the Setups as a string.

    Raises:
        A ValueError when no Setup can be loaded.
    &#34;&#34;&#34;

    data_root = get_data_storage_location(setup=setup)

    return f&#34;{data_root}/conf&#34;</code></pre>
</details>
</dd>
<dt id="egse.env.get_data_storage_location"><code class="name flex">
<span>def <span class="ident">get_data_storage_location</span></span>(<span>setup=None, site_id: str = None) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the full path of the data storage location for the Site as
in the given Setup. If the Setup is not given, it is requested from the
configuration manager unless the <code>site_id</code> argument is given.</p>
<p>Note: when you specify the <code>site_id</code> as an argument, it takes precedence
over the site_id that is specified in the Setup.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>setup</code></strong></dt>
<dd>the Setup from which the Camera name and Site ID are taken</dd>
<dt><strong><code>site_id</code></strong></dt>
<dd>the site identifier (to be used instead of the site_id in the Setup)</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>The full path of data storage location as a string.</p>
<h2 id="raises">Raises</h2>
<p>A ValueError when no Setup can be loaded.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_data_storage_location(setup=None, site_id: str = None) -&gt; str:
    &#34;&#34;&#34;
    Returns the full path of the data storage location for the Site as
    in the given Setup. If the Setup is not given, it is requested from the
    configuration manager unless the `site_id` argument is given.

    Note: when you specify the `site_id` as an argument, it takes precedence
          over the site_id that is specified in the Setup.

    Args:
        setup: the Setup from which the Camera name and Site ID are taken
        site_id: the site identifier (to be used instead of the site_id in the Setup)

    Returns:
        The full path of data storage location as a string.

    Raises:
        A ValueError when no Setup can be loaded.
    &#34;&#34;&#34;

    import os

    if site_id is None:

        from egse.setup import Setup
        from egse.state import GlobalState
        setup: Setup = setup or GlobalState.setup

        if setup is None:
            raise ValueError(&#34;Could not determine Setup, which is None, even after loading from the configuration manager.&#34;)

        site = setup.site_id
    else:
        site = site_id

    data_root = os.environ[ENV_PLATO_STORAGE_DATA]
    data_root = data_root.rstrip(&#39;/&#39;)

    return data_root if data_root.endswith(site) else f&#34;{data_root}/{site}&#34;</code></pre>
</details>
</dd>
<dt id="egse.env.get_log_file_location"><code class="name flex">
<span>def <span class="ident">get_log_file_location</span></span>(<span>) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the full path of the location of the log files. The log file location is read from the environment
variable PLATO_LOG_FILE_LOCATION. The location shall be independent of the Setup, Camera ID or any other
setting that is subject to change.</p>
<p>If the environment variable is not set, a default log file location is created from the data storage location as
follows: $PLATO_DATA_STORAGE_LOCATION/<SITE_ID>/log.</p>
<h2 id="returns">Returns</h2>
<p>The full path of location of the log files as a string.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_log_file_location() -&gt; str:
    &#34;&#34;&#34;
    Returns the full path of the location of the log files. The log file location is read from the environment
    variable PLATO_LOG_FILE_LOCATION. The location shall be independent of the Setup, Camera ID or any other
    setting that is subject to change.

    If the environment variable is not set, a default log file location is created from the data storage location as
    follows: $PLATO_DATA_STORAGE_LOCATION/&lt;SITE_ID&gt;/log.

    Returns:
        The full path of location of the log files as a string.

    &#34;&#34;&#34;
    import os

    try:
        log_data_root = os.environ[ENV_PLATO_LOG_DATA]
    except KeyError:
        data_root = os.environ[ENV_PLATO_STORAGE_DATA]
        data_root = data_root.rstrip(&#39;/&#39;)

        from egse.settings import get_site_id
        site = get_site_id()

        log_data_root = f&#34;{data_root}/{site}/log&#34;

    return log_data_root</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="egse" href="index.html">egse</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="egse.env.PLATO_COMMON_EGSE_PATH" href="#egse.env.PLATO_COMMON_EGSE_PATH">PLATO_COMMON_EGSE_PATH</a></code></li>
<li><code><a title="egse.env.PLATO_CONF_DATA_LOCATION" href="#egse.env.PLATO_CONF_DATA_LOCATION">PLATO_CONF_DATA_LOCATION</a></code></li>
<li><code><a title="egse.env.PLATO_CONF_REPO_LOCATION" href="#egse.env.PLATO_CONF_REPO_LOCATION">PLATO_CONF_REPO_LOCATION</a></code></li>
<li><code><a title="egse.env.PLATO_DATA_STORAGE_LOCATION" href="#egse.env.PLATO_DATA_STORAGE_LOCATION">PLATO_DATA_STORAGE_LOCATION</a></code></li>
<li><code><a title="egse.env.PLATO_INSTALL_LOCATION" href="#egse.env.PLATO_INSTALL_LOCATION">PLATO_INSTALL_LOCATION</a></code></li>
<li><code><a title="egse.env.PLATO_LOCAL_SETTINGS" href="#egse.env.PLATO_LOCAL_SETTINGS">PLATO_LOCAL_SETTINGS</a></code></li>
<li><code><a title="egse.env.PLATO_LOG_FILE_LOCATION" href="#egse.env.PLATO_LOG_FILE_LOCATION">PLATO_LOG_FILE_LOCATION</a></code></li>
<li><code><a title="egse.env.get_conf_data_location" href="#egse.env.get_conf_data_location">get_conf_data_location</a></code></li>
<li><code><a title="egse.env.get_data_storage_location" href="#egse.env.get_data_storage_location">get_data_storage_location</a></code></li>
<li><code><a title="egse.env.get_log_file_location" href="#egse.env.get_log_file_location">get_log_file_location</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>