<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>egse.dpu.ccd_ui API documentation</title>
<meta name="description" content="This module defines widgets that are common to the DPU GUI and the HDF5 GUI." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>egse.dpu.ccd_ui</code></h1>
</header>
<section id="section-intro">
<p>This module defines widgets that are common to the DPU GUI and the HDF5 GUI.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;This module defines widgets that are common to the DPU GUI and the HDF5 GUI.&#34;&#34;&#34;
import logging
from datetime import datetime
from typing import Optional

import numpy as np
import pyqtgraph as pg
from PyQt5 import QtGui
from PyQt5.QtCore import QAbstractTableModel
from PyQt5.QtCore import QSize
from PyQt5.QtCore import Qt
from PyQt5.QtCore import pyqtSignal
from PyQt5.QtWidgets import QFrame
from PyQt5.QtWidgets import QGridLayout
from PyQt5.QtWidgets import QHBoxLayout
from PyQt5.QtWidgets import QLabel
from PyQt5.QtWidgets import QSizePolicy
from PyQt5.QtWidgets import QVBoxLayout
from PyQt5.QtWidgets import QWidget
from numpy import unravel_index

from egse.gui.buttons import ToolTouchButton
from egse.resource import get_resource
from egse.spw import DataPacket

LOGGER = logging.getLogger(__name__)


class ImageCreator1:

    # The original design where the image is build up by concatenating rows as they come in through data packets

    def __init__(self, nr_lines: int, nr_columns: int, n_fee_side):
        self.nr_lines = nr_lines
        self.nr_columns = nr_columns
        self.image_E = np.empty((0,), dtype=np.uint16)
        self.image_F = np.empty((0,), dtype=np.uint16)

        self.n_fee_side = n_fee_side

    def add_data(self, data_packet: DataPacket):
        if data_packet.type.ccd_side == self.n_fee_side.E_SIDE:
            self.image_E = np.concatenate((self.image_E, data_packet.data_as_ndarray))
        else:
            self.image_F = np.concatenate((self.image_F, data_packet.data_as_ndarray))

    def get_image(self, side: int):
        if side == self.n_fee_side.E_SIDE:
            return self.image_E.reshape(self.nr_lines, self.nr_columns).T
        else:
            return self.image_F.reshape(self.nr_lines, self.nr_columns).T


class ImageCreator:

    # This version allocates a partial CCD image and fills the data when it comes in through data packets

    def __init__(self, nr_lines: int, nr_columns: int, n_fee_side):
        self.nr_lines = nr_lines
        self.nr_columns = nr_columns
        self.index_E = self.index_F = 0
        self.image_E = np.empty((nr_lines * nr_columns,), dtype=np.uint16)
        self.image_F = np.empty((nr_lines * nr_columns,), dtype=np.uint16)

        self.n_fee_side = n_fee_side

    def add_data(self, data_packet: DataPacket):
        data = data_packet.data_as_ndarray
        data_length = len(data)
        if data_packet.type.ccd_side == self.n_fee_side.E_SIDE:
            self.image_E[self.index_E:self.index_E+data_length] = data
            self.index_E += data_length
        else:
            self.image_F[self.index_F:self.index_F+data_length] = data
            self.index_F += data_length

    def get_image(self, side: int):
        if side == self.n_fee_side.LEFT_SIDE:
            return self.image_E.reshape(self.nr_lines, self.nr_columns).T
        else:
            return np.fliplr(self.image_F.reshape(self.nr_lines, self.nr_columns)).T


class ImageCreatorFullSize:

    # This version creates the full CCD images and fills the data when it comes in through data packets

    MAX_NR_LINES = 4540
    MAX_NR_COLUMNS = 2295

    def __init__(self, v_start: int, v_end: int, h_end: int, n_fee_side):
        # LOGGER.debug(f&#34;{v_start=}, {v_end=}, {h_end=}, {id(self)=}&#34;)

        self.n_fee_side = n_fee_side

        self.nr_lines = v_end - v_start + 1
        self.nr_columns = h_end + 1
        self.index_left = self.index_right = v_start * self.MAX_NR_COLUMNS
        # self.image_E = np.empty((self.MAX_NR_LINES * self.MAX_NR_COLUMNS,), dtype=np.uint16)
        # self.image_F = np.empty((self.MAX_NR_LINES * self.MAX_NR_COLUMNS,), dtype=np.uint16)
        self.image_left = np.full((self.MAX_NR_LINES * self.MAX_NR_COLUMNS,), fill_value=np.nan, dtype=np.uint16)
        self.image_right = np.full((self.MAX_NR_LINES * self.MAX_NR_COLUMNS,), fill_value=np.nan, dtype=np.uint16)

    def add_data(self, data_packet: DataPacket):
        data = data_packet.data_as_ndarray
        data_length = len(data)
        if data_packet.type.ccd_side == self.n_fee_side.LEFT_SIDE:
            self.image_left[self.index_left:self.index_left + data_length] = data
            self.index_left += data_length
        else:
            self.image_right[self.index_right:self.index_right + data_length] = data
            self.index_right += data_length

    def get_image(self, side: int):
        if side == self.n_fee_side.LEFT_SIDE:
            return self.image_left.reshape(self.MAX_NR_LINES, self.MAX_NR_COLUMNS).T
        else:
            return np.fliplr(self.image_right.reshape(self.MAX_NR_LINES, self.MAX_NR_COLUMNS)).T


class CCDImageWidget(QWidget):
    def __init__(self, *args, axisItems=None, **kwargs):
        super().__init__(*args, **kwargs)

        vbox = QVBoxLayout()
        self.image_view = CCDImageView(view=pg.PlotItem(axisItems=axisItems))
        self.image_view.ui.histogram.gradient.loadPreset(&#39;viridis&#39;)
        self.label = QLabel()

        vbox.addWidget(self.label)
        vbox.addWidget(self.image_view)

        vbox.setSpacing(5)
        vbox.setContentsMargins(0, 0, 0, 0)

        self.setLayout(vbox)

        self.mouse_hover_update = pg.SignalProxy(self.image_view.scene.sigMouseMoved, rateLimit=60,
                                                 slot=self.mouse_moved)

    def getImageItem(self):
        return self.image_view.getImageItem()

    def getView(self):
        return self.image_view.getView()

    def clearImage(self):
        self.image_view.clear()

    def setImage(self, image_data, *args, **kwargs):
        try:
            self.image_view.setImage(image_data, *args, **kwargs)
        except (Exception, ) as exc:
            # An Exception will be raised when all values are NaN, i.e. when no image was taken
            LOGGER.warning(exc)

    def mouse_moved(self, event):
        pos = event[0]  ## using signal proxy turns original arguments into a tuple
        viewbox = self.image_view.getView().getViewBox()
        if viewbox.sceneBoundingRect().contains(pos):
            mousePoint = viewbox.mapSceneToView(pos)
            x = int(mousePoint.x())
            y = int(mousePoint.y())
            image = self.image_view.image
            try:
                flux = image[x, y] if x &gt;= 0 and y &gt;= 0 else None
            except (IndexError, TypeError):
                flux = None
            self.label.setText(f&#34;{x=}, {y=}, {flux=}&#34;)
        else:
            self.label.clear()


class CCDImageView(pg.ImageView):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.ui.menuBtn.hide()
        self.ui.roiBtn.hide()
        #self.ui.histogram.hide()
        self.getView().getViewBox().invertY(False)

        # Mark the end of the serial pre-scan area

        line = pg.InfiniteLine((25, 0), pen={&#39;color&#39;: &#39;r&#39;, &#39;width&#39;: 1})
        self.addItem(line)

        # Mark the start of the serial over-scan area

        line = pg.InfiniteLine((25+2255, 0), pen={&#39;color&#39;: &#39;r&#39;, &#39;width&#39;: 1})
        self.addItem(line)

        # Mark the start of the parallel over-scan

        line = pg.InfiniteLine((0, 4510), angle=0, pen={&#39;color&#39;: &#39;r&#39;, &#39;width&#39;: 1})
        self.addItem(line)

    def set_range_to_brightest_pixel(self, width: int = 50, height: int = 50):
        if self.image is None:
            return
        img = self.image
        try:
            max_value_idx = unravel_index(np.nanargmax(img), img.shape)
            x, y = max_value_idx
            x_offset, y_offset = width // 2, height // 2
            self.view.vb.setXRange(x - x_offset, x + x_offset, padding=0)
            self.view.vb.setYRange(y - y_offset, y + y_offset, padding=0)
        except ValueError as exc:
            LOGGER.warning(exc)


class OffsetAxis(pg.AxisItem):
    &#34;&#34;&#34;This axis item changes the tick mark strings with an offset.&#34;&#34;&#34;
    def __init__(self, offset: float = 0.0):
        super().__init__(orientation=&#39;left&#39;)
        self.offset = offset

    def tickStrings(self, values, scale, spacing):
        values = [value + self.offset for value in values]
        return super().tickStrings(values, scale, spacing)


class NFEECCDWidget(QWidget):
    sig_maximize = pyqtSignal(int)

    def __init__(self, ccd_number: Optional[int], n_fee_side, maximize: bool = True, *args, **kwargs):
        &#34;&#34;&#34;

        Args:
            ccd_number: the CCD number as displayed [1-4] (the CGSE CCD number)
            maximize: if True, the maximize button is shown
            *args:
            **kwargs:
        &#34;&#34;&#34;
        super().__init__(*args, **kwargs)

        self.n_fee_side = n_fee_side

        self._ccd_number = ccd_number  # CGSE CCD number [1-4]
        self.ccd_label = QLabel(f&#34;CCD #{self._ccd_number}&#34;)

        self.graph_left: CCDImageWidget = CCDImageWidget(axisItems={&#39;left&#39;: OffsetAxis()})
        self.graph_right: CCDImageWidget = CCDImageWidget(axisItems={&#39;left&#39;: OffsetAxis()})

        vbox_left = QVBoxLayout()
        vbox_right = QVBoxLayout()

        vbox_left.addWidget(self.graph_left)
        vbox_right.addWidget(self.graph_right)

        # We used ToolTouchButtons because the buttons are not located in a QToolBar and
        # otherwise the alignment will be messed up.

        self.maximize = ToolTouchButton(
            name=&#34;EXPAND-IMAGE_VIEW&#34;,
            width=25, height=25,
            status_tip=&#34;show the CCD image in a separate screen&#34;,
            selected=get_resource(&#34;:/icons/maximize.svg&#34;),
        )
        self.maximize.clicked.connect(self.maximize_view)

        self.cleaning = ToolTouchButton(
            name=&#34;CLEAN-IMAGE_VIEW&#34;,
            width=25, height=25,
            status_tip=&#34;clear the CCD image&#34;,
            selected=get_resource(&#34;:/icons/sponge.svg&#34;),
        )
        self.cleaning.clicked.connect(self.clear_image_data)

        self.zoom = ToolTouchButton(
            name=&#34;ZOOM_TO_BRIGHTEST_PIXEL&#34;,
            width=25, height=25,
            status_tip=&#34;zoom to the brightest pixel in each half of the CCD&#34;,
            selected=get_resource(&#34;:/icons/zoom-to-pixel-dark.svg&#34;),
        )
        self.zoom.clicked.connect(self.zoom_to_brightest_pixel)

        # spacer widget to help with aligning the icons to the right,
        # it&#39;s equivalent to a stretch ona layout

        spacer = QWidget()
        spacer.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Expanding)

        # Struct is used to add some fixed spacing between the icons

        strut = QWidget()
        strut.setFixedSize(5, 35)

        header_hbox = QHBoxLayout()
        header_hbox.addWidget(self.ccd_label)
        header_hbox.addStretch()
        header_hbox.addWidget(self.zoom)
        header_hbox.addWidget(strut)
        header_hbox.addWidget(self.cleaning)
        if maximize:
            header_hbox.addWidget(strut)
            header_hbox.addWidget(self.maximize)
        header_hbox.addWidget(strut)

        hbox = QHBoxLayout()
        hbox.addLayout(vbox_left)
        hbox.addLayout(vbox_right)

        hbox.setSpacing(0)
        hbox.setContentsMargins(0, 0, 0, 0)

        vbox = QVBoxLayout()

        vbox.addLayout(header_hbox)
        vbox.addLayout(hbox)

        vbox.setSpacing(0)
        vbox.setContentsMargins(0, 0, 0, 0)

        self.setLayout(vbox)

    def mark(self):
        &#34;&#34;&#34;Mark the CCD number label in read. This usually means that CCD is the active CCD.&#34;&#34;&#34;
        self.ccd_label.setStyleSheet(&#34;color: red;&#34;)

    def unmark(self):
        &#34;&#34;&#34;Unmark the CCD number label, i.e. no css style is applied.&#34;&#34;&#34;
        self.ccd_label.setStyleSheet(&#34;&#34;)

    @property
    def ccd_number(self):
        &#34;&#34;&#34;Returns the CGSE CCD number [1-4].&#34;&#34;&#34;
        return self._ccd_number

    @ccd_number.setter
    def ccd_number(self, value: Optional[int]):
        &#34;&#34;&#34;Sets the CGSE CCD number [1-4]. &#34;&#34;&#34;
        if value is None:
            return
        self._ccd_number = value  # CGSE CCD number [1-4]
        self.ccd_label.setText(f&#34;CCD #{value}&#34;)

    def maximize_view(self):
        self.sig_maximize.emit(self._ccd_number)

    def clear_image_data(self):
        if self.graph_left.image_view.image is not None:
            self.graph_left.image_view.clear()
            self.graph_left.image_view.autoRange()

        if self.graph_right.image_view.image is not None:
            self.graph_right.image_view.clear()
            self.graph_right.image_view.autoRange()

    def zoom_to_brightest_pixel(self):
        self.graph_left.image_view.set_range_to_brightest_pixel()
        self.graph_right.image_view.set_range_to_brightest_pixel()

    def show_image_data(self, side: int, image: Optional[np.ndarray]):

        graph_box = self.graph_right if side == self.n_fee_side.RIGHT_SIDE else self.graph_left

        if image is not None:
            graph_box.setImage(image, autoRange=False, autoLevels=True, levelMode=&#39;mono&#39;)


class NFEE4CCDWidget(QWidget):
    def __init__(self, n_fee_side):
        super().__init__()

        self.n_fee_side = n_fee_side

        # CCD numbering here is CGSE CCD number [1-4]

        self.ccd_1 = NFEECCDWidget(1, n_fee_side=self.n_fee_side, parent=self)
        self.ccd_2 = NFEECCDWidget(2, n_fee_side=self.n_fee_side, parent=self)
        self.ccd_3 = NFEECCDWidget(3, n_fee_side=self.n_fee_side, parent=self)
        self.ccd_4 = NFEECCDWidget(4, n_fee_side=self.n_fee_side, parent=self)

        self.ccd_1.sig_maximize.connect(self.maximize_view)
        self.ccd_2.sig_maximize.connect(self.maximize_view)
        self.ccd_3.sig_maximize.connect(self.maximize_view)
        self.ccd_4.sig_maximize.connect(self.maximize_view)

        self.ccds = [self.ccd_1, self.ccd_2, self.ccd_3, self.ccd_4]

        grid_layout = QGridLayout()

        grid_layout.addWidget(self.ccd_1, 0, 0)
        grid_layout.addWidget(self.ccd_2, 1, 0)
        grid_layout.addWidget(self.ccd_4, 0, 1)
        grid_layout.addWidget(self.ccd_3, 1, 1)

        self.setLayout(grid_layout)

        self.image_data = [
            [None, None], [None, None], [None, None], [None, None],
        ]

    def mark(self, ccd_idx: int):
        &#34;&#34;&#34; Set the label of the given CCD to red, the others to black.

        This indicates that the given CCD is active and the others are inactive.

        Args:
            - ccd_idx: Index of the active CCD.
        &#34;&#34;&#34;
        for ccd_widget in self.ccds:
            ccd_widget.unmark()
        self.ccds[ccd_idx].mark()

    def unmark(self):
        &#34;&#34;&#34; Set the CCD labels to black to indicate they are inactive.&#34;&#34;&#34;
        for ccd_widget in self.ccds:
            ccd_widget.unmark()

    def maximize_view(self, ccd_number: int):
        &#34;&#34;&#34;
        Creates a new CCD Widget for the given CCD number in a separate window.

        Args:
            ccd_number: CGSE CCD number [1-4]
        &#34;&#34;&#34;
        widget = NFEECCDWidget(ccd_number, n_fee_side=self.n_fee_side, maximize=False)
        layout = QHBoxLayout()
        layout.addWidget(widget)

        ccd_idx = ccd_number - 1

        if self.image_data[ccd_idx][self.n_fee_side.E_SIDE] is not None:
            widget.show_image_data(self.n_fee_side.E_SIDE, self.image_data[ccd_idx][self.n_fee_side.E_SIDE])
        if self.image_data[ccd_idx][self.n_fee_side.F_SIDE] is not None:
            widget.show_image_data(self.n_fee_side.F_SIDE, self.image_data[ccd_idx][self.n_fee_side.F_SIDE])

        self.frame = QFrame()
        self.frame.resize(QSize(800, 600))
        self.frame.setLayout(layout)
        self.frame.show()

    def clear_image_data(self):
        for ccd in self.ccds:
            ccd.clear_image_data()

    def show_ccd_image(self, ccd_number: int, ccd_side: int, image: np.ndarray):
        &#34;&#34;&#34;
        Show the image data in the CCDImageView.

        Args:
            ccd_number: the CGSE CCD number [1-4]
            ccd_side: 1 = left side, 0 = right side
            image: Numpy array with the CCD image data

        &#34;&#34;&#34;
        # LOGGER.debug(f&#34;{ccd_number=}, {CCD_BIN_TO_ID[ccd_number]}, {ccd_side=}&#34;)

        self.image_data[ccd_number-1][ccd_side] = image
        self.ccds[ccd_number-1].show_image_data(ccd_side, image)


class NFEEStateWidget(QWidget):
    def __init__(self):
        super().__init__()

        states = {
            &#34;N-FEE MODE&#34;: &#34;ON MODE&#34;,
            &#34;N-FEE CYCLE TIME&#34;: 25.0,
            &#34;DUMP MODE&#34;: True,
            &#34;INTERNAL SYNC&#34;: False,
            &#34;External SYNC&#34;: True,
            &#34;row start&#34;: 0,
            &#34;row end&#34;: 4509,
            &#34;col end&#34;: 2295,
            &#34;readout order&#34;: [1, 2, 3, 4],
            &#34;ccd_side&#34;: &#34;BOTH&#34;,
        }
        vbox = QVBoxLayout()

        for name, value in states.items():
            hbox = QHBoxLayout()
            hbox.addWidget(QLabel(name))
            hbox.addWidget(QLabel(value))


class NFEEStateTableModel(QAbstractTableModel):
    def __init__(self, data):
        super().__init__()
        self._data = data

        # Row colors empty by default.
        self._row_colors = {}

    def data(self, index, role):
        if role == Qt.DecorationRole:
            value = self._data[index.row()][index.column()]
            if isinstance(value, bool):
                if value:
                    return QtGui.QIcon(&#34;tick.png&#34;)

                return QtGui.QIcon(&#34;cross.png&#34;)

        if role == Qt.DisplayRole:
            value = self._data[index.row()][index.column()]
            if isinstance(value, datetime):
                return value.strftime(&#34;%Y-%m-%d&#34;)

            return value

        if role == Qt.BackgroundRole:
            color = self._row_colors.get(index.row())  # returns None if not in.
            if color:
                return QtGui.QColor(color)

    def rowCount(self, index):
        return len(self._data)

    def columnCount(self, index):
        return len(self._data[0])

    def set_row_color(self, row, color):
        self._row_colors[row] = color</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="egse.dpu.ccd_ui.CCDImageView"><code class="flex name class">
<span>class <span class="ident">CCDImageView</span></span>
<span>(</span><span>*args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Widget used for display and analysis of image data.
Implements many features:</p>
<ul>
<li>Displays 2D and 3D image data. For 3D data, a z-axis
slider is displayed allowing the user to select which frame is displayed.</li>
<li>Displays histogram of image data with movable region defining the dark/light levels</li>
<li>Editable gradient provides a color lookup table</li>
<li>Frame slider may also be moved using left/right arrow keys as well as pgup, pgdn, home, and end.</li>
<li>
<p>Basic analysis features including:</p>
<ul>
<li>ROI and embedded plot for measuring image values across frames</li>
<li>Image normalization / background subtraction</li>
</ul>
</li>
</ul>
<p>Basic Usage::</p>
<pre><code>imv = pg.ImageView()
imv.show()
imv.setImage(data)
</code></pre>
<p><strong>Keyboard interaction</strong></p>
<ul>
<li>left/right arrows step forward/backward 1 frame when pressed,
seek at 20fps when held.</li>
<li>up/down arrows seek at 100fps</li>
<li>pgup/pgdn seek at 1000fps</li>
<li>home/end seek immediately to the first/last frame</li>
<li>space begins playing frames. If time values (in seconds) are given
for each frame, then playback is in realtime.</li>
</ul>
<p>By default, this class creates an :class:<code>ImageItem &lt;pyqtgraph.ImageItem&gt;</code> to display image data
and a :class:<code>ViewBox &lt;pyqtgraph.ViewBox&gt;</code> to contain the ImageItem.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>parent</code></strong> :&ensp;<code>QWidget</code></dt>
<dd>Specifies the parent widget to which this ImageView will belong. If None, then the ImageView is created with
no parent.</dd>
<dt><strong><code>name</code></strong> :&ensp;<code>str</code></dt>
<dd>The name used to register both the internal ViewBox and the PlotItem used to display ROI data. See the
<em>name</em> argument to :func:<code>ViewBox.__init__() &lt;pyqtgraph.ViewBox.__init__&gt;</code>.</dd>
<dt><strong><code>view</code></strong> :&ensp;<code>ViewBox</code> or <code>PlotItem</code></dt>
<dd>If specified, this will be used as the display area that contains the displayed image. Any
:class:<code>ViewBox &lt;pyqtgraph.ViewBox&gt;</code>, :class:<code>PlotItem &lt;pyqtgraph.PlotItem&gt;</code>, or other compatible object is
acceptable. Note: to display axis ticks inside the ImageView, instantiate it with a PlotItem instance as its
view::<pre><code>pg.ImageView(view=pg.PlotItem())
</code></pre>
</dd>
<dt><strong><code>imageItem</code></strong> :&ensp;<code>ImageItem</code></dt>
<dd>If specified, this object will be used to display the image. Must be an instance of ImageItem or other
compatible object.</dd>
<dt><strong><code>levelMode</code></strong> :&ensp;<code>str</code></dt>
<dd>See the <em>levelMode</em> argument to :func:<code>HistogramLUTItem.__init__() &lt;pyqtgraph.HistogramLUTItem.__init__&gt;</code></dd>
<dt><strong><code>discreteTimeLine</code></strong> :&ensp;<code>bool</code></dt>
<dd>Whether to snap to xvals / frame numbers when interacting with the timeline position.</dd>
<dt><strong><code>roi</code></strong> :&ensp;<code>ROI</code></dt>
<dd>If specified, this object is used as ROI for the plot feature. Must be an instance of ROI.</dd>
<dt><strong><code>normRoi</code></strong> :&ensp;<code>ROI</code></dt>
<dd>If specified, this object is used as ROI for the normalization feature. Must be an instance of ROI.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class CCDImageView(pg.ImageView):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.ui.menuBtn.hide()
        self.ui.roiBtn.hide()
        #self.ui.histogram.hide()
        self.getView().getViewBox().invertY(False)

        # Mark the end of the serial pre-scan area

        line = pg.InfiniteLine((25, 0), pen={&#39;color&#39;: &#39;r&#39;, &#39;width&#39;: 1})
        self.addItem(line)

        # Mark the start of the serial over-scan area

        line = pg.InfiniteLine((25+2255, 0), pen={&#39;color&#39;: &#39;r&#39;, &#39;width&#39;: 1})
        self.addItem(line)

        # Mark the start of the parallel over-scan

        line = pg.InfiniteLine((0, 4510), angle=0, pen={&#39;color&#39;: &#39;r&#39;, &#39;width&#39;: 1})
        self.addItem(line)

    def set_range_to_brightest_pixel(self, width: int = 50, height: int = 50):
        if self.image is None:
            return
        img = self.image
        try:
            max_value_idx = unravel_index(np.nanargmax(img), img.shape)
            x, y = max_value_idx
            x_offset, y_offset = width // 2, height // 2
            self.view.vb.setXRange(x - x_offset, x + x_offset, padding=0)
            self.view.vb.setYRange(y - y_offset, y + y_offset, padding=0)
        except ValueError as exc:
            LOGGER.warning(exc)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>pyqtgraph.imageview.ImageView.ImageView</li>
<li>PyQt5.QtWidgets.QWidget</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>PyQt5.QtGui.QPaintDevice</li>
<li>sip.simplewrapper</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="egse.dpu.ccd_ui.CCDImageView.set_range_to_brightest_pixel"><code class="name flex">
<span>def <span class="ident">set_range_to_brightest_pixel</span></span>(<span>self, width: int = 50, height: int = 50)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_range_to_brightest_pixel(self, width: int = 50, height: int = 50):
    if self.image is None:
        return
    img = self.image
    try:
        max_value_idx = unravel_index(np.nanargmax(img), img.shape)
        x, y = max_value_idx
        x_offset, y_offset = width // 2, height // 2
        self.view.vb.setXRange(x - x_offset, x + x_offset, padding=0)
        self.view.vb.setYRange(y - y_offset, y + y_offset, padding=0)
    except ValueError as exc:
        LOGGER.warning(exc)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="egse.dpu.ccd_ui.CCDImageWidget"><code class="flex name class">
<span>class <span class="ident">CCDImageWidget</span></span>
<span>(</span><span>*args, axisItems=None, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>QWidget(parent: typing.Optional[QWidget] = None, flags: Union[Qt.WindowFlags, Qt.WindowType] = Qt.WindowFlags())</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class CCDImageWidget(QWidget):
    def __init__(self, *args, axisItems=None, **kwargs):
        super().__init__(*args, **kwargs)

        vbox = QVBoxLayout()
        self.image_view = CCDImageView(view=pg.PlotItem(axisItems=axisItems))
        self.image_view.ui.histogram.gradient.loadPreset(&#39;viridis&#39;)
        self.label = QLabel()

        vbox.addWidget(self.label)
        vbox.addWidget(self.image_view)

        vbox.setSpacing(5)
        vbox.setContentsMargins(0, 0, 0, 0)

        self.setLayout(vbox)

        self.mouse_hover_update = pg.SignalProxy(self.image_view.scene.sigMouseMoved, rateLimit=60,
                                                 slot=self.mouse_moved)

    def getImageItem(self):
        return self.image_view.getImageItem()

    def getView(self):
        return self.image_view.getView()

    def clearImage(self):
        self.image_view.clear()

    def setImage(self, image_data, *args, **kwargs):
        try:
            self.image_view.setImage(image_data, *args, **kwargs)
        except (Exception, ) as exc:
            # An Exception will be raised when all values are NaN, i.e. when no image was taken
            LOGGER.warning(exc)

    def mouse_moved(self, event):
        pos = event[0]  ## using signal proxy turns original arguments into a tuple
        viewbox = self.image_view.getView().getViewBox()
        if viewbox.sceneBoundingRect().contains(pos):
            mousePoint = viewbox.mapSceneToView(pos)
            x = int(mousePoint.x())
            y = int(mousePoint.y())
            image = self.image_view.image
            try:
                flux = image[x, y] if x &gt;= 0 and y &gt;= 0 else None
            except (IndexError, TypeError):
                flux = None
            self.label.setText(f&#34;{x=}, {y=}, {flux=}&#34;)
        else:
            self.label.clear()</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt5.QtWidgets.QWidget</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>PyQt5.QtGui.QPaintDevice</li>
<li>sip.simplewrapper</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="egse.dpu.ccd_ui.CCDImageWidget.clearImage"><code class="name flex">
<span>def <span class="ident">clearImage</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def clearImage(self):
    self.image_view.clear()</code></pre>
</details>
</dd>
<dt id="egse.dpu.ccd_ui.CCDImageWidget.getImageItem"><code class="name flex">
<span>def <span class="ident">getImageItem</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getImageItem(self):
    return self.image_view.getImageItem()</code></pre>
</details>
</dd>
<dt id="egse.dpu.ccd_ui.CCDImageWidget.getView"><code class="name flex">
<span>def <span class="ident">getView</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getView(self):
    return self.image_view.getView()</code></pre>
</details>
</dd>
<dt id="egse.dpu.ccd_ui.CCDImageWidget.mouse_moved"><code class="name flex">
<span>def <span class="ident">mouse_moved</span></span>(<span>self, event)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def mouse_moved(self, event):
    pos = event[0]  ## using signal proxy turns original arguments into a tuple
    viewbox = self.image_view.getView().getViewBox()
    if viewbox.sceneBoundingRect().contains(pos):
        mousePoint = viewbox.mapSceneToView(pos)
        x = int(mousePoint.x())
        y = int(mousePoint.y())
        image = self.image_view.image
        try:
            flux = image[x, y] if x &gt;= 0 and y &gt;= 0 else None
        except (IndexError, TypeError):
            flux = None
        self.label.setText(f&#34;{x=}, {y=}, {flux=}&#34;)
    else:
        self.label.clear()</code></pre>
</details>
</dd>
<dt id="egse.dpu.ccd_ui.CCDImageWidget.setImage"><code class="name flex">
<span>def <span class="ident">setImage</span></span>(<span>self, image_data, *args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setImage(self, image_data, *args, **kwargs):
    try:
        self.image_view.setImage(image_data, *args, **kwargs)
    except (Exception, ) as exc:
        # An Exception will be raised when all values are NaN, i.e. when no image was taken
        LOGGER.warning(exc)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="egse.dpu.ccd_ui.ImageCreator"><code class="flex name class">
<span>class <span class="ident">ImageCreator</span></span>
<span>(</span><span>nr_lines: int, nr_columns: int, n_fee_side)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ImageCreator:

    # This version allocates a partial CCD image and fills the data when it comes in through data packets

    def __init__(self, nr_lines: int, nr_columns: int, n_fee_side):
        self.nr_lines = nr_lines
        self.nr_columns = nr_columns
        self.index_E = self.index_F = 0
        self.image_E = np.empty((nr_lines * nr_columns,), dtype=np.uint16)
        self.image_F = np.empty((nr_lines * nr_columns,), dtype=np.uint16)

        self.n_fee_side = n_fee_side

    def add_data(self, data_packet: DataPacket):
        data = data_packet.data_as_ndarray
        data_length = len(data)
        if data_packet.type.ccd_side == self.n_fee_side.E_SIDE:
            self.image_E[self.index_E:self.index_E+data_length] = data
            self.index_E += data_length
        else:
            self.image_F[self.index_F:self.index_F+data_length] = data
            self.index_F += data_length

    def get_image(self, side: int):
        if side == self.n_fee_side.LEFT_SIDE:
            return self.image_E.reshape(self.nr_lines, self.nr_columns).T
        else:
            return np.fliplr(self.image_F.reshape(self.nr_lines, self.nr_columns)).T</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="egse.dpu.ccd_ui.ImageCreator.add_data"><code class="name flex">
<span>def <span class="ident">add_data</span></span>(<span>self, data_packet: <a title="egse.spw.DataPacket" href="../spw.html#egse.spw.DataPacket">DataPacket</a>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_data(self, data_packet: DataPacket):
    data = data_packet.data_as_ndarray
    data_length = len(data)
    if data_packet.type.ccd_side == self.n_fee_side.E_SIDE:
        self.image_E[self.index_E:self.index_E+data_length] = data
        self.index_E += data_length
    else:
        self.image_F[self.index_F:self.index_F+data_length] = data
        self.index_F += data_length</code></pre>
</details>
</dd>
<dt id="egse.dpu.ccd_ui.ImageCreator.get_image"><code class="name flex">
<span>def <span class="ident">get_image</span></span>(<span>self, side: int)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_image(self, side: int):
    if side == self.n_fee_side.LEFT_SIDE:
        return self.image_E.reshape(self.nr_lines, self.nr_columns).T
    else:
        return np.fliplr(self.image_F.reshape(self.nr_lines, self.nr_columns)).T</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="egse.dpu.ccd_ui.ImageCreator1"><code class="flex name class">
<span>class <span class="ident">ImageCreator1</span></span>
<span>(</span><span>nr_lines: int, nr_columns: int, n_fee_side)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ImageCreator1:

    # The original design where the image is build up by concatenating rows as they come in through data packets

    def __init__(self, nr_lines: int, nr_columns: int, n_fee_side):
        self.nr_lines = nr_lines
        self.nr_columns = nr_columns
        self.image_E = np.empty((0,), dtype=np.uint16)
        self.image_F = np.empty((0,), dtype=np.uint16)

        self.n_fee_side = n_fee_side

    def add_data(self, data_packet: DataPacket):
        if data_packet.type.ccd_side == self.n_fee_side.E_SIDE:
            self.image_E = np.concatenate((self.image_E, data_packet.data_as_ndarray))
        else:
            self.image_F = np.concatenate((self.image_F, data_packet.data_as_ndarray))

    def get_image(self, side: int):
        if side == self.n_fee_side.E_SIDE:
            return self.image_E.reshape(self.nr_lines, self.nr_columns).T
        else:
            return self.image_F.reshape(self.nr_lines, self.nr_columns).T</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="egse.dpu.ccd_ui.ImageCreator1.add_data"><code class="name flex">
<span>def <span class="ident">add_data</span></span>(<span>self, data_packet: <a title="egse.spw.DataPacket" href="../spw.html#egse.spw.DataPacket">DataPacket</a>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_data(self, data_packet: DataPacket):
    if data_packet.type.ccd_side == self.n_fee_side.E_SIDE:
        self.image_E = np.concatenate((self.image_E, data_packet.data_as_ndarray))
    else:
        self.image_F = np.concatenate((self.image_F, data_packet.data_as_ndarray))</code></pre>
</details>
</dd>
<dt id="egse.dpu.ccd_ui.ImageCreator1.get_image"><code class="name flex">
<span>def <span class="ident">get_image</span></span>(<span>self, side: int)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_image(self, side: int):
    if side == self.n_fee_side.E_SIDE:
        return self.image_E.reshape(self.nr_lines, self.nr_columns).T
    else:
        return self.image_F.reshape(self.nr_lines, self.nr_columns).T</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="egse.dpu.ccd_ui.ImageCreatorFullSize"><code class="flex name class">
<span>class <span class="ident">ImageCreatorFullSize</span></span>
<span>(</span><span>v_start: int, v_end: int, h_end: int, n_fee_side)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ImageCreatorFullSize:

    # This version creates the full CCD images and fills the data when it comes in through data packets

    MAX_NR_LINES = 4540
    MAX_NR_COLUMNS = 2295

    def __init__(self, v_start: int, v_end: int, h_end: int, n_fee_side):
        # LOGGER.debug(f&#34;{v_start=}, {v_end=}, {h_end=}, {id(self)=}&#34;)

        self.n_fee_side = n_fee_side

        self.nr_lines = v_end - v_start + 1
        self.nr_columns = h_end + 1
        self.index_left = self.index_right = v_start * self.MAX_NR_COLUMNS
        # self.image_E = np.empty((self.MAX_NR_LINES * self.MAX_NR_COLUMNS,), dtype=np.uint16)
        # self.image_F = np.empty((self.MAX_NR_LINES * self.MAX_NR_COLUMNS,), dtype=np.uint16)
        self.image_left = np.full((self.MAX_NR_LINES * self.MAX_NR_COLUMNS,), fill_value=np.nan, dtype=np.uint16)
        self.image_right = np.full((self.MAX_NR_LINES * self.MAX_NR_COLUMNS,), fill_value=np.nan, dtype=np.uint16)

    def add_data(self, data_packet: DataPacket):
        data = data_packet.data_as_ndarray
        data_length = len(data)
        if data_packet.type.ccd_side == self.n_fee_side.LEFT_SIDE:
            self.image_left[self.index_left:self.index_left + data_length] = data
            self.index_left += data_length
        else:
            self.image_right[self.index_right:self.index_right + data_length] = data
            self.index_right += data_length

    def get_image(self, side: int):
        if side == self.n_fee_side.LEFT_SIDE:
            return self.image_left.reshape(self.MAX_NR_LINES, self.MAX_NR_COLUMNS).T
        else:
            return np.fliplr(self.image_right.reshape(self.MAX_NR_LINES, self.MAX_NR_COLUMNS)).T</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="egse.dpu.ccd_ui.ImageCreatorFullSize.MAX_NR_COLUMNS"><code class="name">var <span class="ident">MAX_NR_COLUMNS</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="egse.dpu.ccd_ui.ImageCreatorFullSize.MAX_NR_LINES"><code class="name">var <span class="ident">MAX_NR_LINES</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="egse.dpu.ccd_ui.ImageCreatorFullSize.add_data"><code class="name flex">
<span>def <span class="ident">add_data</span></span>(<span>self, data_packet: <a title="egse.spw.DataPacket" href="../spw.html#egse.spw.DataPacket">DataPacket</a>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_data(self, data_packet: DataPacket):
    data = data_packet.data_as_ndarray
    data_length = len(data)
    if data_packet.type.ccd_side == self.n_fee_side.LEFT_SIDE:
        self.image_left[self.index_left:self.index_left + data_length] = data
        self.index_left += data_length
    else:
        self.image_right[self.index_right:self.index_right + data_length] = data
        self.index_right += data_length</code></pre>
</details>
</dd>
<dt id="egse.dpu.ccd_ui.ImageCreatorFullSize.get_image"><code class="name flex">
<span>def <span class="ident">get_image</span></span>(<span>self, side: int)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_image(self, side: int):
    if side == self.n_fee_side.LEFT_SIDE:
        return self.image_left.reshape(self.MAX_NR_LINES, self.MAX_NR_COLUMNS).T
    else:
        return np.fliplr(self.image_right.reshape(self.MAX_NR_LINES, self.MAX_NR_COLUMNS)).T</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="egse.dpu.ccd_ui.NFEE4CCDWidget"><code class="flex name class">
<span>class <span class="ident">NFEE4CCDWidget</span></span>
<span>(</span><span>n_fee_side)</span>
</code></dt>
<dd>
<div class="desc"><p>QWidget(parent: typing.Optional[QWidget] = None, flags: Union[Qt.WindowFlags, Qt.WindowType] = Qt.WindowFlags())</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class NFEE4CCDWidget(QWidget):
    def __init__(self, n_fee_side):
        super().__init__()

        self.n_fee_side = n_fee_side

        # CCD numbering here is CGSE CCD number [1-4]

        self.ccd_1 = NFEECCDWidget(1, n_fee_side=self.n_fee_side, parent=self)
        self.ccd_2 = NFEECCDWidget(2, n_fee_side=self.n_fee_side, parent=self)
        self.ccd_3 = NFEECCDWidget(3, n_fee_side=self.n_fee_side, parent=self)
        self.ccd_4 = NFEECCDWidget(4, n_fee_side=self.n_fee_side, parent=self)

        self.ccd_1.sig_maximize.connect(self.maximize_view)
        self.ccd_2.sig_maximize.connect(self.maximize_view)
        self.ccd_3.sig_maximize.connect(self.maximize_view)
        self.ccd_4.sig_maximize.connect(self.maximize_view)

        self.ccds = [self.ccd_1, self.ccd_2, self.ccd_3, self.ccd_4]

        grid_layout = QGridLayout()

        grid_layout.addWidget(self.ccd_1, 0, 0)
        grid_layout.addWidget(self.ccd_2, 1, 0)
        grid_layout.addWidget(self.ccd_4, 0, 1)
        grid_layout.addWidget(self.ccd_3, 1, 1)

        self.setLayout(grid_layout)

        self.image_data = [
            [None, None], [None, None], [None, None], [None, None],
        ]

    def mark(self, ccd_idx: int):
        &#34;&#34;&#34; Set the label of the given CCD to red, the others to black.

        This indicates that the given CCD is active and the others are inactive.

        Args:
            - ccd_idx: Index of the active CCD.
        &#34;&#34;&#34;
        for ccd_widget in self.ccds:
            ccd_widget.unmark()
        self.ccds[ccd_idx].mark()

    def unmark(self):
        &#34;&#34;&#34; Set the CCD labels to black to indicate they are inactive.&#34;&#34;&#34;
        for ccd_widget in self.ccds:
            ccd_widget.unmark()

    def maximize_view(self, ccd_number: int):
        &#34;&#34;&#34;
        Creates a new CCD Widget for the given CCD number in a separate window.

        Args:
            ccd_number: CGSE CCD number [1-4]
        &#34;&#34;&#34;
        widget = NFEECCDWidget(ccd_number, n_fee_side=self.n_fee_side, maximize=False)
        layout = QHBoxLayout()
        layout.addWidget(widget)

        ccd_idx = ccd_number - 1

        if self.image_data[ccd_idx][self.n_fee_side.E_SIDE] is not None:
            widget.show_image_data(self.n_fee_side.E_SIDE, self.image_data[ccd_idx][self.n_fee_side.E_SIDE])
        if self.image_data[ccd_idx][self.n_fee_side.F_SIDE] is not None:
            widget.show_image_data(self.n_fee_side.F_SIDE, self.image_data[ccd_idx][self.n_fee_side.F_SIDE])

        self.frame = QFrame()
        self.frame.resize(QSize(800, 600))
        self.frame.setLayout(layout)
        self.frame.show()

    def clear_image_data(self):
        for ccd in self.ccds:
            ccd.clear_image_data()

    def show_ccd_image(self, ccd_number: int, ccd_side: int, image: np.ndarray):
        &#34;&#34;&#34;
        Show the image data in the CCDImageView.

        Args:
            ccd_number: the CGSE CCD number [1-4]
            ccd_side: 1 = left side, 0 = right side
            image: Numpy array with the CCD image data

        &#34;&#34;&#34;
        # LOGGER.debug(f&#34;{ccd_number=}, {CCD_BIN_TO_ID[ccd_number]}, {ccd_side=}&#34;)

        self.image_data[ccd_number-1][ccd_side] = image
        self.ccds[ccd_number-1].show_image_data(ccd_side, image)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt5.QtWidgets.QWidget</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>PyQt5.QtGui.QPaintDevice</li>
<li>sip.simplewrapper</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="egse.dpu.ccd_ui.NFEE4CCDWidget.clear_image_data"><code class="name flex">
<span>def <span class="ident">clear_image_data</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def clear_image_data(self):
    for ccd in self.ccds:
        ccd.clear_image_data()</code></pre>
</details>
</dd>
<dt id="egse.dpu.ccd_ui.NFEE4CCDWidget.mark"><code class="name flex">
<span>def <span class="ident">mark</span></span>(<span>self, ccd_idx: int)</span>
</code></dt>
<dd>
<div class="desc"><p>Set the label of the given CCD to red, the others to black.</p>
<p>This indicates that the given CCD is active and the others are inactive.</p>
<h2 id="args">Args</h2>
<ul>
<li>ccd_idx: Index of the active CCD.</li>
</ul></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def mark(self, ccd_idx: int):
    &#34;&#34;&#34; Set the label of the given CCD to red, the others to black.

    This indicates that the given CCD is active and the others are inactive.

    Args:
        - ccd_idx: Index of the active CCD.
    &#34;&#34;&#34;
    for ccd_widget in self.ccds:
        ccd_widget.unmark()
    self.ccds[ccd_idx].mark()</code></pre>
</details>
</dd>
<dt id="egse.dpu.ccd_ui.NFEE4CCDWidget.maximize_view"><code class="name flex">
<span>def <span class="ident">maximize_view</span></span>(<span>self, ccd_number: int)</span>
</code></dt>
<dd>
<div class="desc"><p>Creates a new CCD Widget for the given CCD number in a separate window.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>ccd_number</code></strong></dt>
<dd>CGSE CCD number [1-4]</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def maximize_view(self, ccd_number: int):
    &#34;&#34;&#34;
    Creates a new CCD Widget for the given CCD number in a separate window.

    Args:
        ccd_number: CGSE CCD number [1-4]
    &#34;&#34;&#34;
    widget = NFEECCDWidget(ccd_number, n_fee_side=self.n_fee_side, maximize=False)
    layout = QHBoxLayout()
    layout.addWidget(widget)

    ccd_idx = ccd_number - 1

    if self.image_data[ccd_idx][self.n_fee_side.E_SIDE] is not None:
        widget.show_image_data(self.n_fee_side.E_SIDE, self.image_data[ccd_idx][self.n_fee_side.E_SIDE])
    if self.image_data[ccd_idx][self.n_fee_side.F_SIDE] is not None:
        widget.show_image_data(self.n_fee_side.F_SIDE, self.image_data[ccd_idx][self.n_fee_side.F_SIDE])

    self.frame = QFrame()
    self.frame.resize(QSize(800, 600))
    self.frame.setLayout(layout)
    self.frame.show()</code></pre>
</details>
</dd>
<dt id="egse.dpu.ccd_ui.NFEE4CCDWidget.show_ccd_image"><code class="name flex">
<span>def <span class="ident">show_ccd_image</span></span>(<span>self, ccd_number: int, ccd_side: int, image: numpy.ndarray)</span>
</code></dt>
<dd>
<div class="desc"><p>Show the image data in the CCDImageView.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>ccd_number</code></strong></dt>
<dd>the CGSE CCD number [1-4]</dd>
<dt><strong><code>ccd_side</code></strong></dt>
<dd>1 = left side, 0 = right side</dd>
<dt><strong><code>image</code></strong></dt>
<dd>Numpy array with the CCD image data</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def show_ccd_image(self, ccd_number: int, ccd_side: int, image: np.ndarray):
    &#34;&#34;&#34;
    Show the image data in the CCDImageView.

    Args:
        ccd_number: the CGSE CCD number [1-4]
        ccd_side: 1 = left side, 0 = right side
        image: Numpy array with the CCD image data

    &#34;&#34;&#34;
    # LOGGER.debug(f&#34;{ccd_number=}, {CCD_BIN_TO_ID[ccd_number]}, {ccd_side=}&#34;)

    self.image_data[ccd_number-1][ccd_side] = image
    self.ccds[ccd_number-1].show_image_data(ccd_side, image)</code></pre>
</details>
</dd>
<dt id="egse.dpu.ccd_ui.NFEE4CCDWidget.unmark"><code class="name flex">
<span>def <span class="ident">unmark</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Set the CCD labels to black to indicate they are inactive.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def unmark(self):
    &#34;&#34;&#34; Set the CCD labels to black to indicate they are inactive.&#34;&#34;&#34;
    for ccd_widget in self.ccds:
        ccd_widget.unmark()</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="egse.dpu.ccd_ui.NFEECCDWidget"><code class="flex name class">
<span>class <span class="ident">NFEECCDWidget</span></span>
<span>(</span><span>ccd_number: Optional[int], n_fee_side, maximize: bool = True, *args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>QWidget(parent: typing.Optional[QWidget] = None, flags: Union[Qt.WindowFlags, Qt.WindowType] = Qt.WindowFlags())</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>ccd_number</code></strong></dt>
<dd>the CCD number as displayed [1-4] (the CGSE CCD number)</dd>
<dt><strong><code>maximize</code></strong></dt>
<dd>if True, the maximize button is shown</dd>
</dl>
<p><em>args:
</em>*kwargs:</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class NFEECCDWidget(QWidget):
    sig_maximize = pyqtSignal(int)

    def __init__(self, ccd_number: Optional[int], n_fee_side, maximize: bool = True, *args, **kwargs):
        &#34;&#34;&#34;

        Args:
            ccd_number: the CCD number as displayed [1-4] (the CGSE CCD number)
            maximize: if True, the maximize button is shown
            *args:
            **kwargs:
        &#34;&#34;&#34;
        super().__init__(*args, **kwargs)

        self.n_fee_side = n_fee_side

        self._ccd_number = ccd_number  # CGSE CCD number [1-4]
        self.ccd_label = QLabel(f&#34;CCD #{self._ccd_number}&#34;)

        self.graph_left: CCDImageWidget = CCDImageWidget(axisItems={&#39;left&#39;: OffsetAxis()})
        self.graph_right: CCDImageWidget = CCDImageWidget(axisItems={&#39;left&#39;: OffsetAxis()})

        vbox_left = QVBoxLayout()
        vbox_right = QVBoxLayout()

        vbox_left.addWidget(self.graph_left)
        vbox_right.addWidget(self.graph_right)

        # We used ToolTouchButtons because the buttons are not located in a QToolBar and
        # otherwise the alignment will be messed up.

        self.maximize = ToolTouchButton(
            name=&#34;EXPAND-IMAGE_VIEW&#34;,
            width=25, height=25,
            status_tip=&#34;show the CCD image in a separate screen&#34;,
            selected=get_resource(&#34;:/icons/maximize.svg&#34;),
        )
        self.maximize.clicked.connect(self.maximize_view)

        self.cleaning = ToolTouchButton(
            name=&#34;CLEAN-IMAGE_VIEW&#34;,
            width=25, height=25,
            status_tip=&#34;clear the CCD image&#34;,
            selected=get_resource(&#34;:/icons/sponge.svg&#34;),
        )
        self.cleaning.clicked.connect(self.clear_image_data)

        self.zoom = ToolTouchButton(
            name=&#34;ZOOM_TO_BRIGHTEST_PIXEL&#34;,
            width=25, height=25,
            status_tip=&#34;zoom to the brightest pixel in each half of the CCD&#34;,
            selected=get_resource(&#34;:/icons/zoom-to-pixel-dark.svg&#34;),
        )
        self.zoom.clicked.connect(self.zoom_to_brightest_pixel)

        # spacer widget to help with aligning the icons to the right,
        # it&#39;s equivalent to a stretch ona layout

        spacer = QWidget()
        spacer.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Expanding)

        # Struct is used to add some fixed spacing between the icons

        strut = QWidget()
        strut.setFixedSize(5, 35)

        header_hbox = QHBoxLayout()
        header_hbox.addWidget(self.ccd_label)
        header_hbox.addStretch()
        header_hbox.addWidget(self.zoom)
        header_hbox.addWidget(strut)
        header_hbox.addWidget(self.cleaning)
        if maximize:
            header_hbox.addWidget(strut)
            header_hbox.addWidget(self.maximize)
        header_hbox.addWidget(strut)

        hbox = QHBoxLayout()
        hbox.addLayout(vbox_left)
        hbox.addLayout(vbox_right)

        hbox.setSpacing(0)
        hbox.setContentsMargins(0, 0, 0, 0)

        vbox = QVBoxLayout()

        vbox.addLayout(header_hbox)
        vbox.addLayout(hbox)

        vbox.setSpacing(0)
        vbox.setContentsMargins(0, 0, 0, 0)

        self.setLayout(vbox)

    def mark(self):
        &#34;&#34;&#34;Mark the CCD number label in read. This usually means that CCD is the active CCD.&#34;&#34;&#34;
        self.ccd_label.setStyleSheet(&#34;color: red;&#34;)

    def unmark(self):
        &#34;&#34;&#34;Unmark the CCD number label, i.e. no css style is applied.&#34;&#34;&#34;
        self.ccd_label.setStyleSheet(&#34;&#34;)

    @property
    def ccd_number(self):
        &#34;&#34;&#34;Returns the CGSE CCD number [1-4].&#34;&#34;&#34;
        return self._ccd_number

    @ccd_number.setter
    def ccd_number(self, value: Optional[int]):
        &#34;&#34;&#34;Sets the CGSE CCD number [1-4]. &#34;&#34;&#34;
        if value is None:
            return
        self._ccd_number = value  # CGSE CCD number [1-4]
        self.ccd_label.setText(f&#34;CCD #{value}&#34;)

    def maximize_view(self):
        self.sig_maximize.emit(self._ccd_number)

    def clear_image_data(self):
        if self.graph_left.image_view.image is not None:
            self.graph_left.image_view.clear()
            self.graph_left.image_view.autoRange()

        if self.graph_right.image_view.image is not None:
            self.graph_right.image_view.clear()
            self.graph_right.image_view.autoRange()

    def zoom_to_brightest_pixel(self):
        self.graph_left.image_view.set_range_to_brightest_pixel()
        self.graph_right.image_view.set_range_to_brightest_pixel()

    def show_image_data(self, side: int, image: Optional[np.ndarray]):

        graph_box = self.graph_right if side == self.n_fee_side.RIGHT_SIDE else self.graph_left

        if image is not None:
            graph_box.setImage(image, autoRange=False, autoLevels=True, levelMode=&#39;mono&#39;)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt5.QtWidgets.QWidget</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>PyQt5.QtGui.QPaintDevice</li>
<li>sip.simplewrapper</li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="egse.dpu.ccd_ui.NFEECCDWidget.ccd_number"><code class="name">var <span class="ident">ccd_number</span></code></dt>
<dd>
<div class="desc"><p>Returns the CGSE CCD number [1-4].</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def ccd_number(self):
    &#34;&#34;&#34;Returns the CGSE CCD number [1-4].&#34;&#34;&#34;
    return self._ccd_number</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="egse.dpu.ccd_ui.NFEECCDWidget.clear_image_data"><code class="name flex">
<span>def <span class="ident">clear_image_data</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def clear_image_data(self):
    if self.graph_left.image_view.image is not None:
        self.graph_left.image_view.clear()
        self.graph_left.image_view.autoRange()

    if self.graph_right.image_view.image is not None:
        self.graph_right.image_view.clear()
        self.graph_right.image_view.autoRange()</code></pre>
</details>
</dd>
<dt id="egse.dpu.ccd_ui.NFEECCDWidget.mark"><code class="name flex">
<span>def <span class="ident">mark</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Mark the CCD number label in read. This usually means that CCD is the active CCD.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def mark(self):
    &#34;&#34;&#34;Mark the CCD number label in read. This usually means that CCD is the active CCD.&#34;&#34;&#34;
    self.ccd_label.setStyleSheet(&#34;color: red;&#34;)</code></pre>
</details>
</dd>
<dt id="egse.dpu.ccd_ui.NFEECCDWidget.maximize_view"><code class="name flex">
<span>def <span class="ident">maximize_view</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def maximize_view(self):
    self.sig_maximize.emit(self._ccd_number)</code></pre>
</details>
</dd>
<dt id="egse.dpu.ccd_ui.NFEECCDWidget.show_image_data"><code class="name flex">
<span>def <span class="ident">show_image_data</span></span>(<span>self, side: int, image: Optional[numpy.ndarray])</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def show_image_data(self, side: int, image: Optional[np.ndarray]):

    graph_box = self.graph_right if side == self.n_fee_side.RIGHT_SIDE else self.graph_left

    if image is not None:
        graph_box.setImage(image, autoRange=False, autoLevels=True, levelMode=&#39;mono&#39;)</code></pre>
</details>
</dd>
<dt id="egse.dpu.ccd_ui.NFEECCDWidget.sig_maximize"><code class="name flex">
<span>def <span class="ident">sig_maximize</span></span>(<span>...)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="egse.dpu.ccd_ui.NFEECCDWidget.unmark"><code class="name flex">
<span>def <span class="ident">unmark</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Unmark the CCD number label, i.e. no css style is applied.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def unmark(self):
    &#34;&#34;&#34;Unmark the CCD number label, i.e. no css style is applied.&#34;&#34;&#34;
    self.ccd_label.setStyleSheet(&#34;&#34;)</code></pre>
</details>
</dd>
<dt id="egse.dpu.ccd_ui.NFEECCDWidget.zoom_to_brightest_pixel"><code class="name flex">
<span>def <span class="ident">zoom_to_brightest_pixel</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def zoom_to_brightest_pixel(self):
    self.graph_left.image_view.set_range_to_brightest_pixel()
    self.graph_right.image_view.set_range_to_brightest_pixel()</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="egse.dpu.ccd_ui.NFEEStateTableModel"><code class="flex name class">
<span>class <span class="ident">NFEEStateTableModel</span></span>
<span>(</span><span>data)</span>
</code></dt>
<dd>
<div class="desc"><p>QAbstractTableModel(parent: typing.Optional[QObject] = None)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class NFEEStateTableModel(QAbstractTableModel):
    def __init__(self, data):
        super().__init__()
        self._data = data

        # Row colors empty by default.
        self._row_colors = {}

    def data(self, index, role):
        if role == Qt.DecorationRole:
            value = self._data[index.row()][index.column()]
            if isinstance(value, bool):
                if value:
                    return QtGui.QIcon(&#34;tick.png&#34;)

                return QtGui.QIcon(&#34;cross.png&#34;)

        if role == Qt.DisplayRole:
            value = self._data[index.row()][index.column()]
            if isinstance(value, datetime):
                return value.strftime(&#34;%Y-%m-%d&#34;)

            return value

        if role == Qt.BackgroundRole:
            color = self._row_colors.get(index.row())  # returns None if not in.
            if color:
                return QtGui.QColor(color)

    def rowCount(self, index):
        return len(self._data)

    def columnCount(self, index):
        return len(self._data[0])

    def set_row_color(self, row, color):
        self._row_colors[row] = color</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt5.QtCore.QAbstractTableModel</li>
<li>PyQt5.QtCore.QAbstractItemModel</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>sip.simplewrapper</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="egse.dpu.ccd_ui.NFEEStateTableModel.columnCount"><code class="name flex">
<span>def <span class="ident">columnCount</span></span>(<span>self, index)</span>
</code></dt>
<dd>
<div class="desc"><p>columnCount(self, parent: QModelIndex = QModelIndex()) -&gt; int</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def columnCount(self, index):
    return len(self._data[0])</code></pre>
</details>
</dd>
<dt id="egse.dpu.ccd_ui.NFEEStateTableModel.data"><code class="name flex">
<span>def <span class="ident">data</span></span>(<span>self, index, role)</span>
</code></dt>
<dd>
<div class="desc"><p>data(self, index: QModelIndex, role: int = Qt.ItemDataRole.DisplayRole) -&gt; Any</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def data(self, index, role):
    if role == Qt.DecorationRole:
        value = self._data[index.row()][index.column()]
        if isinstance(value, bool):
            if value:
                return QtGui.QIcon(&#34;tick.png&#34;)

            return QtGui.QIcon(&#34;cross.png&#34;)

    if role == Qt.DisplayRole:
        value = self._data[index.row()][index.column()]
        if isinstance(value, datetime):
            return value.strftime(&#34;%Y-%m-%d&#34;)

        return value

    if role == Qt.BackgroundRole:
        color = self._row_colors.get(index.row())  # returns None if not in.
        if color:
            return QtGui.QColor(color)</code></pre>
</details>
</dd>
<dt id="egse.dpu.ccd_ui.NFEEStateTableModel.rowCount"><code class="name flex">
<span>def <span class="ident">rowCount</span></span>(<span>self, index)</span>
</code></dt>
<dd>
<div class="desc"><p>rowCount(self, parent: QModelIndex = QModelIndex()) -&gt; int</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def rowCount(self, index):
    return len(self._data)</code></pre>
</details>
</dd>
<dt id="egse.dpu.ccd_ui.NFEEStateTableModel.set_row_color"><code class="name flex">
<span>def <span class="ident">set_row_color</span></span>(<span>self, row, color)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_row_color(self, row, color):
    self._row_colors[row] = color</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="egse.dpu.ccd_ui.NFEEStateWidget"><code class="flex name class">
<span>class <span class="ident">NFEEStateWidget</span></span>
</code></dt>
<dd>
<div class="desc"><p>QWidget(parent: typing.Optional[QWidget] = None, flags: Union[Qt.WindowFlags, Qt.WindowType] = Qt.WindowFlags())</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class NFEEStateWidget(QWidget):
    def __init__(self):
        super().__init__()

        states = {
            &#34;N-FEE MODE&#34;: &#34;ON MODE&#34;,
            &#34;N-FEE CYCLE TIME&#34;: 25.0,
            &#34;DUMP MODE&#34;: True,
            &#34;INTERNAL SYNC&#34;: False,
            &#34;External SYNC&#34;: True,
            &#34;row start&#34;: 0,
            &#34;row end&#34;: 4509,
            &#34;col end&#34;: 2295,
            &#34;readout order&#34;: [1, 2, 3, 4],
            &#34;ccd_side&#34;: &#34;BOTH&#34;,
        }
        vbox = QVBoxLayout()

        for name, value in states.items():
            hbox = QHBoxLayout()
            hbox.addWidget(QLabel(name))
            hbox.addWidget(QLabel(value))</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt5.QtWidgets.QWidget</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>PyQt5.QtGui.QPaintDevice</li>
<li>sip.simplewrapper</li>
</ul>
</dd>
<dt id="egse.dpu.ccd_ui.OffsetAxis"><code class="flex name class">
<span>class <span class="ident">OffsetAxis</span></span>
<span>(</span><span>offset: float = 0.0)</span>
</code></dt>
<dd>
<div class="desc"><p>This axis item changes the tick mark strings with an offset.</p>
<p>=============== ===============================================================
<strong>Arguments:</strong>
orientation
one of 'left', 'right', 'top', or 'bottom'
maxTickLength
(px) maximum length of ticks to draw. Negative values draw
into the plot, positive values draw outward.
linkView
(ViewBox) causes the range of values displayed in the axis
to be linked to the visible range of a ViewBox.
showValues
(bool) Whether to display values adjacent to ticks
pen
(QPen) Pen used when drawing axis and (by default) ticks
textPen
(QPen) Pen used when drawing tick labels.
tickPen
(QPen) Pen used when drawing ticks.
text
The text (excluding units) to display on the label for this
axis.
units
The units for this axis. Units should generally be given
without any scaling prefix (eg, 'V' instead of 'mV'). The
scaling prefix will be automatically prepended based on the
range of data displayed.
args
All extra keyword arguments become CSS style options for
the <span> tag which will surround the axis label and units.
=============== ===============================================================</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class OffsetAxis(pg.AxisItem):
    &#34;&#34;&#34;This axis item changes the tick mark strings with an offset.&#34;&#34;&#34;
    def __init__(self, offset: float = 0.0):
        super().__init__(orientation=&#39;left&#39;)
        self.offset = offset

    def tickStrings(self, values, scale, spacing):
        values = [value + self.offset for value in values]
        return super().tickStrings(values, scale, spacing)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>pyqtgraph.graphicsItems.AxisItem.AxisItem</li>
<li>pyqtgraph.graphicsItems.GraphicsWidget.GraphicsWidget</li>
<li>pyqtgraph.graphicsItems.GraphicsItem.GraphicsItem</li>
<li>PyQt5.QtWidgets.QGraphicsWidget</li>
<li>PyQt5.QtWidgets.QGraphicsObject</li>
<li>PyQt5.QtCore.QObject</li>
<li>PyQt5.QtWidgets.QGraphicsItem</li>
<li>PyQt5.QtWidgets.QGraphicsLayoutItem</li>
<li>sip.wrapper</li>
<li>sip.simplewrapper</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="egse.dpu.ccd_ui.OffsetAxis.tickStrings"><code class="name flex">
<span>def <span class="ident">tickStrings</span></span>(<span>self, values, scale, spacing)</span>
</code></dt>
<dd>
<div class="desc"><p>Return the strings that should be placed next to ticks. This method is called
when redrawing the axis and is a good method to override in subclasses.
The method is called with a list of tick values, a scaling factor (see below), and the
spacing between ticks (this is required since, in some instances, there may be only
one tick and thus no other way to determine the tick spacing)</p>
<p>The scale argument is used when the axis label is displaying units which may have an SI scaling prefix.
When determining the text to display, use value*scale to correctly account for this prefix.
For example, if the axis label's units are set to 'V', then a tick value of 0.001 might
be accompanied by a scale value of 1000. This indicates that the label is displaying 'mV', and
thus the tick should display 0.001 * 1000 = 1.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def tickStrings(self, values, scale, spacing):
    values = [value + self.offset for value in values]
    return super().tickStrings(values, scale, spacing)</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="egse.dpu" href="index.html">egse.dpu</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="egse.dpu.ccd_ui.CCDImageView" href="#egse.dpu.ccd_ui.CCDImageView">CCDImageView</a></code></h4>
<ul class="">
<li><code><a title="egse.dpu.ccd_ui.CCDImageView.set_range_to_brightest_pixel" href="#egse.dpu.ccd_ui.CCDImageView.set_range_to_brightest_pixel">set_range_to_brightest_pixel</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.dpu.ccd_ui.CCDImageWidget" href="#egse.dpu.ccd_ui.CCDImageWidget">CCDImageWidget</a></code></h4>
<ul class="">
<li><code><a title="egse.dpu.ccd_ui.CCDImageWidget.clearImage" href="#egse.dpu.ccd_ui.CCDImageWidget.clearImage">clearImage</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.CCDImageWidget.getImageItem" href="#egse.dpu.ccd_ui.CCDImageWidget.getImageItem">getImageItem</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.CCDImageWidget.getView" href="#egse.dpu.ccd_ui.CCDImageWidget.getView">getView</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.CCDImageWidget.mouse_moved" href="#egse.dpu.ccd_ui.CCDImageWidget.mouse_moved">mouse_moved</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.CCDImageWidget.setImage" href="#egse.dpu.ccd_ui.CCDImageWidget.setImage">setImage</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.dpu.ccd_ui.ImageCreator" href="#egse.dpu.ccd_ui.ImageCreator">ImageCreator</a></code></h4>
<ul class="">
<li><code><a title="egse.dpu.ccd_ui.ImageCreator.add_data" href="#egse.dpu.ccd_ui.ImageCreator.add_data">add_data</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.ImageCreator.get_image" href="#egse.dpu.ccd_ui.ImageCreator.get_image">get_image</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.dpu.ccd_ui.ImageCreator1" href="#egse.dpu.ccd_ui.ImageCreator1">ImageCreator1</a></code></h4>
<ul class="">
<li><code><a title="egse.dpu.ccd_ui.ImageCreator1.add_data" href="#egse.dpu.ccd_ui.ImageCreator1.add_data">add_data</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.ImageCreator1.get_image" href="#egse.dpu.ccd_ui.ImageCreator1.get_image">get_image</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.dpu.ccd_ui.ImageCreatorFullSize" href="#egse.dpu.ccd_ui.ImageCreatorFullSize">ImageCreatorFullSize</a></code></h4>
<ul class="">
<li><code><a title="egse.dpu.ccd_ui.ImageCreatorFullSize.MAX_NR_COLUMNS" href="#egse.dpu.ccd_ui.ImageCreatorFullSize.MAX_NR_COLUMNS">MAX_NR_COLUMNS</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.ImageCreatorFullSize.MAX_NR_LINES" href="#egse.dpu.ccd_ui.ImageCreatorFullSize.MAX_NR_LINES">MAX_NR_LINES</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.ImageCreatorFullSize.add_data" href="#egse.dpu.ccd_ui.ImageCreatorFullSize.add_data">add_data</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.ImageCreatorFullSize.get_image" href="#egse.dpu.ccd_ui.ImageCreatorFullSize.get_image">get_image</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.dpu.ccd_ui.NFEE4CCDWidget" href="#egse.dpu.ccd_ui.NFEE4CCDWidget">NFEE4CCDWidget</a></code></h4>
<ul class="">
<li><code><a title="egse.dpu.ccd_ui.NFEE4CCDWidget.clear_image_data" href="#egse.dpu.ccd_ui.NFEE4CCDWidget.clear_image_data">clear_image_data</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.NFEE4CCDWidget.mark" href="#egse.dpu.ccd_ui.NFEE4CCDWidget.mark">mark</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.NFEE4CCDWidget.maximize_view" href="#egse.dpu.ccd_ui.NFEE4CCDWidget.maximize_view">maximize_view</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.NFEE4CCDWidget.show_ccd_image" href="#egse.dpu.ccd_ui.NFEE4CCDWidget.show_ccd_image">show_ccd_image</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.NFEE4CCDWidget.unmark" href="#egse.dpu.ccd_ui.NFEE4CCDWidget.unmark">unmark</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.dpu.ccd_ui.NFEECCDWidget" href="#egse.dpu.ccd_ui.NFEECCDWidget">NFEECCDWidget</a></code></h4>
<ul class="">
<li><code><a title="egse.dpu.ccd_ui.NFEECCDWidget.ccd_number" href="#egse.dpu.ccd_ui.NFEECCDWidget.ccd_number">ccd_number</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.NFEECCDWidget.clear_image_data" href="#egse.dpu.ccd_ui.NFEECCDWidget.clear_image_data">clear_image_data</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.NFEECCDWidget.mark" href="#egse.dpu.ccd_ui.NFEECCDWidget.mark">mark</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.NFEECCDWidget.maximize_view" href="#egse.dpu.ccd_ui.NFEECCDWidget.maximize_view">maximize_view</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.NFEECCDWidget.show_image_data" href="#egse.dpu.ccd_ui.NFEECCDWidget.show_image_data">show_image_data</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.NFEECCDWidget.sig_maximize" href="#egse.dpu.ccd_ui.NFEECCDWidget.sig_maximize">sig_maximize</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.NFEECCDWidget.unmark" href="#egse.dpu.ccd_ui.NFEECCDWidget.unmark">unmark</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.NFEECCDWidget.zoom_to_brightest_pixel" href="#egse.dpu.ccd_ui.NFEECCDWidget.zoom_to_brightest_pixel">zoom_to_brightest_pixel</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.dpu.ccd_ui.NFEEStateTableModel" href="#egse.dpu.ccd_ui.NFEEStateTableModel">NFEEStateTableModel</a></code></h4>
<ul class="">
<li><code><a title="egse.dpu.ccd_ui.NFEEStateTableModel.columnCount" href="#egse.dpu.ccd_ui.NFEEStateTableModel.columnCount">columnCount</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.NFEEStateTableModel.data" href="#egse.dpu.ccd_ui.NFEEStateTableModel.data">data</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.NFEEStateTableModel.rowCount" href="#egse.dpu.ccd_ui.NFEEStateTableModel.rowCount">rowCount</a></code></li>
<li><code><a title="egse.dpu.ccd_ui.NFEEStateTableModel.set_row_color" href="#egse.dpu.ccd_ui.NFEEStateTableModel.set_row_color">set_row_color</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.dpu.ccd_ui.NFEEStateWidget" href="#egse.dpu.ccd_ui.NFEEStateWidget">NFEEStateWidget</a></code></h4>
</li>
<li>
<h4><code><a title="egse.dpu.ccd_ui.OffsetAxis" href="#egse.dpu.ccd_ui.OffsetAxis">OffsetAxis</a></code></h4>
<ul class="">
<li><code><a title="egse.dpu.ccd_ui.OffsetAxis.tickStrings" href="#egse.dpu.ccd_ui.OffsetAxis.tickStrings">tickStrings</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>