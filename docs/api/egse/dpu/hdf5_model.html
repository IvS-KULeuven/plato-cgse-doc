<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>egse.dpu.hdf5_model API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>egse.dpu.hdf5_model</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">from __future__ import annotations

from typing import Any
from typing import List
from typing import Optional

import h5py
import natsort
from PyQt5.QtCore import QAbstractItemModel
from PyQt5.QtCore import QAbstractTableModel
from PyQt5.QtCore import QModelIndex
from PyQt5.QtCore import QObject
from PyQt5.QtCore import Qt

from egse.bits import beautify_binary
from egse.reg import RegisterMap


def get_type_name(x) -&gt; str:
    &#34;&#34;&#34;Return a readable representation of the type of the given object.&#34;&#34;&#34;
    if isinstance(x, h5py.Dataset):
        return &#34;Dataset&#34;
    if isinstance(x, h5py.Group):
        return &#34;Group&#34;
    if isinstance(x, h5py.File):
        return &#34;File&#34;
    return str(type(x))


class TreeItem:
    &#34;&#34;&#34;
    An item (node or leaf) in a generic tree structure.
    &#34;&#34;&#34;
    def __init__(self, data: Any, parent: TreeItem = None):
        self._child_items = []
        self._item_data = data
        self._parent_item = parent

    def append_child(self, child: TreeItem):
        &#34;&#34;&#34;Adds a child HDF5Item to this object.&#34;&#34;&#34;
        self._child_items.append(child)

    def child(self, row: int) -&gt; Optional[TreeItem]:
        &#34;&#34;&#34;Returns the child at the given row. If an invalid row is given, None will be returned.&#34;&#34;&#34;
        if 0 &lt;= row &lt; len(self._child_items):
            return self._child_items[row]
        return None

    def child_index(self, item: TreeItem) -&gt; int:
        &#34;&#34;&#34;Returns the index (=row) of the child in the list of children.&#34;&#34;&#34;
        return self._child_items.index(item)

    def child_count(self) -&gt; int:
        &#34;&#34;&#34;Returns the number of children.&#34;&#34;&#34;
        return len(self._child_items)

    def last_child(self) -&gt; TreeItem:
        &#34;&#34;&#34;Returns the last child from the list of children.&#34;&#34;&#34;
        return self._child_items[-1]

    def column_count(self) -&gt; int:
        &#34;&#34;&#34;Returns the number of columns for this item.&#34;&#34;&#34;
        return len(self._item_data)

    def data(self, column: int):
        &#34;&#34;&#34;
        Returns the data in the given column for this item. If an invalid column is provided,
        None is returned.
        &#34;&#34;&#34;
        if 0 &lt;= column &lt; len(self._item_data):
            return self._item_data[column]
        return None

    def row(self) -&gt; int:
        &#34;&#34;&#34;
        Returns the row index of this item in the list of children of its parent. Since the root
        item has no parent, row=0 will be returned.
        &#34;&#34;&#34;
        if self._parent_item:
            return self._parent_item.child_index(self)
        return 0

    def parent_item(self) -&gt; Optional[TreeItem]:
        &#34;&#34;&#34;Returns the parent item for this item.&#34;&#34;&#34;
        return self._parent_item


class HDF5Item(TreeItem):
    &#34;&#34;&#34;
    An item (node or leaf) in a tree structure representing the HDF5 file. The structure is
    represented by a list of child items for this item and a link to the parent for this item.

    The parent item (HDF5TreeItem) is None for the root item in this linked list. Leaf items have
    no children, i.e. child_count=0.
    &#34;&#34;&#34;
    def __init__(self, data: Any, parent: TreeItem = None, expandable: bool = False, item = None):
        super().__init__(data, parent)
        self._expandable = expandable
        self._item = item

    @property
    def is_expandable(self):
        return self._expandable

    @property
    def item_name(self):
        return self._item.name

    @property
    def item_type(self):
        return type(self._item)

    @property
    def item_size(self):
        if isinstance(self._item, h5py.Dataset):
            size = self._item.shape
        elif isinstance(self._item, h5py.Group):
            size = len(self._item)
        else:
            size = 0
        return size

    def get_item(self):
        return self._item


class TreeModel(QAbstractItemModel):
    &#34;&#34;&#34;
    A (more or less) generic tree model.

    Args:
        data: a list of lists

    &#34;&#34;&#34;
    ExpandableRole = Qt.UserRole + 500

    def __init__(self, data: Any, header_data: List[str], parent: QObject = None):
        super().__init__(parent)
        self._root_item = TreeItem(header_data)
        self.set_model_data(data, self._root_item)

    def data(self, index: QModelIndex, role: int = ...) -&gt; Any:
        if not index.isValid():
            return None

        item: HDF5Item = index.internalPointer()

        if role == Qt.DisplayRole:
            return item.data(index.column())
        if role == TreeModel.ExpandableRole:
            return item.is_expandable
        return None

    def flags(self, index: QModelIndex) -&gt; Qt.ItemFlags:
        if not index.isValid():
            return Qt.NoItemFlags
        return super().flags(index)

    def headerData(self, section: int, orientation: Qt.Orientation, role: int = ...) -&gt; Any:
        if orientation == Qt.Horizontal and role == Qt.DisplayRole:
            return self._root_item.data(section)
        return None

    def index(self, row: int, column: int, parent: QModelIndex = ...) -&gt; QModelIndex:

        if not self.hasIndex(row, column, parent):
            return QModelIndex()

        if not parent.isValid():
            parent_item = self._root_item
        else:
            parent_item = parent.internalPointer()

        child_item = parent_item.child(row)

        if child_item:
            return self.createIndex(row, column, child_item)

        return QModelIndex()

    def parent(self, child: QModelIndex) -&gt; QModelIndex:
        if not child.isValid():
            return QModelIndex()

        child_item = child.internalPointer()
        parent_item = child_item.parent_item()

        if parent_item is self._root_item:
            return QModelIndex()

        return self.createIndex(parent_item.row(), 0, parent_item)

    def rowCount(self, parent: QModelIndex = ...) -&gt; int:
        if parent.column() &gt; 0:
            row_count = 0
            return row_count

        if not parent.isValid():
            parent_item = self._root_item
        else:
            parent_item = parent.internalPointer()

        row_count = parent_item.child_count()
        return row_count

    def columnCount(self, parent: QModelIndex = ...) -&gt; int:
        if parent.isValid():
            col_count = parent.internalPointer().column_count()
        else:
            col_count = self._root_item.column_count()
        return col_count

    def hasChildren(self, index: QModelIndex = QModelIndex(), *args, **kwargs):

        if self.data(index, TreeModel.ExpandableRole):
            has_children = True
        else:
            has_children = super().hasChildren(index)

        return has_children

    def set_model_data(self, data: Any, parent: TreeItem):
        raise NotImplementedError


class HDF5Model(TreeModel):
    def __init__(self, hdf_file: h5py.File, parent: QObject = None):
        self._hdf_file = hdf_file
        self._hdf_root = hdf_file[&#39;/&#39;]

        # Load the first items from the top level group &#39;/&#39; and pass them to the super class

        data = self.get_model_data(self._hdf_root)

        header_data = [&#39;Datasets&#39;, &#39;Size&#39;, &#39;Type&#39;]

        super().__init__(data, header_data, parent)

    def set_model_data(self, data: Any, parent: TreeItem):

        for item_data, expand, item in data:
            parent.append_child(HDF5Item(item_data, parent, expandable=expand, item=item))

    def get_model_data(self, group: h5py.Group):
        data = []

        if len(group) &lt; 2000:
            items = natsort.natsorted(group.items(), key=lambda x: x[0])
        else:
            items = group.items()

        for name, item in items:
            if isinstance(item, h5py.Dataset):
                size = str(item.shape)
                type_name = str(item.dtype)
                expandable = False
            else:
                size = len(item)
                type_name = get_type_name(item)
                expandable = True
            data.append(([name, size, type_name], expandable, item))

        return data

    def update_model_data(self, index: QModelIndex):

        item: HDF5Item = index.internalPointer()

        if isinstance(item, h5py.Dataset):
            return

        if not item.child_count():
            group_name = item.item_name
            group = self._hdf_file[group_name]
            data = self.get_model_data(group)
            self.set_model_data(data, item)
            self.layoutChanged.emit()


def convert_data_for_role(data, role):
    if role == 0:
        return int(data)
    if role == 1:
        return f&#34;0x{data:08X}&#34;
    if role == 2:
        return beautify_binary(data, prefix=&#34;0b&#34;)

    return data


class RegisterTableModel(QAbstractTableModel):
    def __init__(self, reg_map: RegisterMap):
        super().__init__()

        self.setRegisterMap(reg_map)

        self._col_names = [&#34;Register name&#34;, &#34;Parameter name&#34;, &#34;Value&#34;]
        self._display_role = dict()

    def data(self, index, role):
        if role == Qt.DisplayRole:
            # See below for the nested-list data structure.
            # .row() indexes into the outer list,
            # .column() indexes into the sub-list
            col = index.column()
            row = index.row()
            if col in (0, 1):
                return self._reg_names[row].split(&#39;:&#39;)[col]
            if col == 2:
                data = self._reg_data[self._reg_names[row]]
                return convert_data_for_role(data, self._display_role.get(row, 0))

    def setRegisterMap(self, reg_map: RegisterMap):
        self._reg_map = reg_map
        self._reg_data = reg_map.as_dict(flatten=True)
        self._reg_names = list(self._reg_data)

    def headerData(self, section: int, orientation: Qt.Orientation, role: int = None) -&gt; Any:
        # section is the index of the column/row.
        if role == Qt.DisplayRole and orientation == Qt.Horizontal:
            return self._col_names[section]

    def toggleDisplayRole(self, index: QModelIndex):
        if index.column() == 2:
            role = self._display_role.get(index.row(), 0) + 1
            self._display_role[index.row()] = role if role &lt; 3 else 0

    def rowCount(self, index):
        return len(self._reg_names)

    def columnCount(self, index):
        return 3</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="egse.dpu.hdf5_model.convert_data_for_role"><code class="name flex">
<span>def <span class="ident">convert_data_for_role</span></span>(<span>data, role)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def convert_data_for_role(data, role):
    if role == 0:
        return int(data)
    if role == 1:
        return f&#34;0x{data:08X}&#34;
    if role == 2:
        return beautify_binary(data, prefix=&#34;0b&#34;)

    return data</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.get_type_name"><code class="name flex">
<span>def <span class="ident">get_type_name</span></span>(<span>x) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Return a readable representation of the type of the given object.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_type_name(x) -&gt; str:
    &#34;&#34;&#34;Return a readable representation of the type of the given object.&#34;&#34;&#34;
    if isinstance(x, h5py.Dataset):
        return &#34;Dataset&#34;
    if isinstance(x, h5py.Group):
        return &#34;Group&#34;
    if isinstance(x, h5py.File):
        return &#34;File&#34;
    return str(type(x))</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="egse.dpu.hdf5_model.HDF5Item"><code class="flex name class">
<span>class <span class="ident">HDF5Item</span></span>
<span>(</span><span>data: Any, parent: <a title="egse.dpu.hdf5_model.TreeItem" href="#egse.dpu.hdf5_model.TreeItem">TreeItem</a> = None, expandable: bool = False, item=None)</span>
</code></dt>
<dd>
<div class="desc"><p>An item (node or leaf) in a tree structure representing the HDF5 file. The structure is
represented by a list of child items for this item and a link to the parent for this item.</p>
<p>The parent item (HDF5TreeItem) is None for the root item in this linked list. Leaf items have
no children, i.e. child_count=0.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class HDF5Item(TreeItem):
    &#34;&#34;&#34;
    An item (node or leaf) in a tree structure representing the HDF5 file. The structure is
    represented by a list of child items for this item and a link to the parent for this item.

    The parent item (HDF5TreeItem) is None for the root item in this linked list. Leaf items have
    no children, i.e. child_count=0.
    &#34;&#34;&#34;
    def __init__(self, data: Any, parent: TreeItem = None, expandable: bool = False, item = None):
        super().__init__(data, parent)
        self._expandable = expandable
        self._item = item

    @property
    def is_expandable(self):
        return self._expandable

    @property
    def item_name(self):
        return self._item.name

    @property
    def item_type(self):
        return type(self._item)

    @property
    def item_size(self):
        if isinstance(self._item, h5py.Dataset):
            size = self._item.shape
        elif isinstance(self._item, h5py.Group):
            size = len(self._item)
        else:
            size = 0
        return size

    def get_item(self):
        return self._item</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="egse.dpu.hdf5_model.TreeItem" href="#egse.dpu.hdf5_model.TreeItem">TreeItem</a></li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="egse.dpu.hdf5_model.HDF5Item.is_expandable"><code class="name">var <span class="ident">is_expandable</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def is_expandable(self):
    return self._expandable</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.HDF5Item.item_name"><code class="name">var <span class="ident">item_name</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def item_name(self):
    return self._item.name</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.HDF5Item.item_size"><code class="name">var <span class="ident">item_size</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def item_size(self):
    if isinstance(self._item, h5py.Dataset):
        size = self._item.shape
    elif isinstance(self._item, h5py.Group):
        size = len(self._item)
    else:
        size = 0
    return size</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.HDF5Item.item_type"><code class="name">var <span class="ident">item_type</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def item_type(self):
    return type(self._item)</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="egse.dpu.hdf5_model.HDF5Item.get_item"><code class="name flex">
<span>def <span class="ident">get_item</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_item(self):
    return self._item</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="egse.dpu.hdf5_model.TreeItem" href="#egse.dpu.hdf5_model.TreeItem">TreeItem</a></b></code>:
<ul class="hlist">
<li><code><a title="egse.dpu.hdf5_model.TreeItem.append_child" href="#egse.dpu.hdf5_model.TreeItem.append_child">append_child</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeItem.child" href="#egse.dpu.hdf5_model.TreeItem.child">child</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeItem.child_count" href="#egse.dpu.hdf5_model.TreeItem.child_count">child_count</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeItem.child_index" href="#egse.dpu.hdf5_model.TreeItem.child_index">child_index</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeItem.column_count" href="#egse.dpu.hdf5_model.TreeItem.column_count">column_count</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeItem.data" href="#egse.dpu.hdf5_model.TreeItem.data">data</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeItem.last_child" href="#egse.dpu.hdf5_model.TreeItem.last_child">last_child</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeItem.parent_item" href="#egse.dpu.hdf5_model.TreeItem.parent_item">parent_item</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeItem.row" href="#egse.dpu.hdf5_model.TreeItem.row">row</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="egse.dpu.hdf5_model.HDF5Model"><code class="flex name class">
<span>class <span class="ident">HDF5Model</span></span>
<span>(</span><span>hdf_file: h5py.File, parent: QObject = None)</span>
</code></dt>
<dd>
<div class="desc"><p>A (more or less) generic tree model.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>data</code></strong></dt>
<dd>a list of lists</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class HDF5Model(TreeModel):
    def __init__(self, hdf_file: h5py.File, parent: QObject = None):
        self._hdf_file = hdf_file
        self._hdf_root = hdf_file[&#39;/&#39;]

        # Load the first items from the top level group &#39;/&#39; and pass them to the super class

        data = self.get_model_data(self._hdf_root)

        header_data = [&#39;Datasets&#39;, &#39;Size&#39;, &#39;Type&#39;]

        super().__init__(data, header_data, parent)

    def set_model_data(self, data: Any, parent: TreeItem):

        for item_data, expand, item in data:
            parent.append_child(HDF5Item(item_data, parent, expandable=expand, item=item))

    def get_model_data(self, group: h5py.Group):
        data = []

        if len(group) &lt; 2000:
            items = natsort.natsorted(group.items(), key=lambda x: x[0])
        else:
            items = group.items()

        for name, item in items:
            if isinstance(item, h5py.Dataset):
                size = str(item.shape)
                type_name = str(item.dtype)
                expandable = False
            else:
                size = len(item)
                type_name = get_type_name(item)
                expandable = True
            data.append(([name, size, type_name], expandable, item))

        return data

    def update_model_data(self, index: QModelIndex):

        item: HDF5Item = index.internalPointer()

        if isinstance(item, h5py.Dataset):
            return

        if not item.child_count():
            group_name = item.item_name
            group = self._hdf_file[group_name]
            data = self.get_model_data(group)
            self.set_model_data(data, item)
            self.layoutChanged.emit()</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="egse.dpu.hdf5_model.TreeModel" href="#egse.dpu.hdf5_model.TreeModel">TreeModel</a></li>
<li>PyQt5.QtCore.QAbstractItemModel</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>sip.simplewrapper</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="egse.dpu.hdf5_model.HDF5Model.get_model_data"><code class="name flex">
<span>def <span class="ident">get_model_data</span></span>(<span>self, group: h5py.Group)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_model_data(self, group: h5py.Group):
    data = []

    if len(group) &lt; 2000:
        items = natsort.natsorted(group.items(), key=lambda x: x[0])
    else:
        items = group.items()

    for name, item in items:
        if isinstance(item, h5py.Dataset):
            size = str(item.shape)
            type_name = str(item.dtype)
            expandable = False
        else:
            size = len(item)
            type_name = get_type_name(item)
            expandable = True
        data.append(([name, size, type_name], expandable, item))

    return data</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.HDF5Model.set_model_data"><code class="name flex">
<span>def <span class="ident">set_model_data</span></span>(<span>self, data: Any, parent: <a title="egse.dpu.hdf5_model.TreeItem" href="#egse.dpu.hdf5_model.TreeItem">TreeItem</a>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_model_data(self, data: Any, parent: TreeItem):

    for item_data, expand, item in data:
        parent.append_child(HDF5Item(item_data, parent, expandable=expand, item=item))</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.HDF5Model.update_model_data"><code class="name flex">
<span>def <span class="ident">update_model_data</span></span>(<span>self, index: QModelIndex)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update_model_data(self, index: QModelIndex):

    item: HDF5Item = index.internalPointer()

    if isinstance(item, h5py.Dataset):
        return

    if not item.child_count():
        group_name = item.item_name
        group = self._hdf_file[group_name]
        data = self.get_model_data(group)
        self.set_model_data(data, item)
        self.layoutChanged.emit()</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="egse.dpu.hdf5_model.TreeModel" href="#egse.dpu.hdf5_model.TreeModel">TreeModel</a></b></code>:
<ul class="hlist">
<li><code><a title="egse.dpu.hdf5_model.TreeModel.columnCount" href="#egse.dpu.hdf5_model.TreeModel.columnCount">columnCount</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeModel.data" href="#egse.dpu.hdf5_model.TreeModel.data">data</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeModel.flags" href="#egse.dpu.hdf5_model.TreeModel.flags">flags</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeModel.hasChildren" href="#egse.dpu.hdf5_model.TreeModel.hasChildren">hasChildren</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeModel.headerData" href="#egse.dpu.hdf5_model.TreeModel.headerData">headerData</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeModel.index" href="#egse.dpu.hdf5_model.TreeModel.index">index</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeModel.parent" href="#egse.dpu.hdf5_model.TreeModel.parent">parent</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeModel.rowCount" href="#egse.dpu.hdf5_model.TreeModel.rowCount">rowCount</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="egse.dpu.hdf5_model.RegisterTableModel"><code class="flex name class">
<span>class <span class="ident">RegisterTableModel</span></span>
<span>(</span><span>reg_map: RegisterMap)</span>
</code></dt>
<dd>
<div class="desc"><p>QAbstractTableModel(parent: typing.Optional[QObject] = None)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class RegisterTableModel(QAbstractTableModel):
    def __init__(self, reg_map: RegisterMap):
        super().__init__()

        self.setRegisterMap(reg_map)

        self._col_names = [&#34;Register name&#34;, &#34;Parameter name&#34;, &#34;Value&#34;]
        self._display_role = dict()

    def data(self, index, role):
        if role == Qt.DisplayRole:
            # See below for the nested-list data structure.
            # .row() indexes into the outer list,
            # .column() indexes into the sub-list
            col = index.column()
            row = index.row()
            if col in (0, 1):
                return self._reg_names[row].split(&#39;:&#39;)[col]
            if col == 2:
                data = self._reg_data[self._reg_names[row]]
                return convert_data_for_role(data, self._display_role.get(row, 0))

    def setRegisterMap(self, reg_map: RegisterMap):
        self._reg_map = reg_map
        self._reg_data = reg_map.as_dict(flatten=True)
        self._reg_names = list(self._reg_data)

    def headerData(self, section: int, orientation: Qt.Orientation, role: int = None) -&gt; Any:
        # section is the index of the column/row.
        if role == Qt.DisplayRole and orientation == Qt.Horizontal:
            return self._col_names[section]

    def toggleDisplayRole(self, index: QModelIndex):
        if index.column() == 2:
            role = self._display_role.get(index.row(), 0) + 1
            self._display_role[index.row()] = role if role &lt; 3 else 0

    def rowCount(self, index):
        return len(self._reg_names)

    def columnCount(self, index):
        return 3</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt5.QtCore.QAbstractTableModel</li>
<li>PyQt5.QtCore.QAbstractItemModel</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>sip.simplewrapper</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="egse.dpu.hdf5_model.RegisterTableModel.columnCount"><code class="name flex">
<span>def <span class="ident">columnCount</span></span>(<span>self, index)</span>
</code></dt>
<dd>
<div class="desc"><p>columnCount(self, parent: QModelIndex = QModelIndex()) -&gt; int</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def columnCount(self, index):
    return 3</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.RegisterTableModel.data"><code class="name flex">
<span>def <span class="ident">data</span></span>(<span>self, index, role)</span>
</code></dt>
<dd>
<div class="desc"><p>data(self, index: QModelIndex, role: int = Qt.ItemDataRole.DisplayRole) -&gt; Any</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def data(self, index, role):
    if role == Qt.DisplayRole:
        # See below for the nested-list data structure.
        # .row() indexes into the outer list,
        # .column() indexes into the sub-list
        col = index.column()
        row = index.row()
        if col in (0, 1):
            return self._reg_names[row].split(&#39;:&#39;)[col]
        if col == 2:
            data = self._reg_data[self._reg_names[row]]
            return convert_data_for_role(data, self._display_role.get(row, 0))</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.RegisterTableModel.headerData"><code class="name flex">
<span>def <span class="ident">headerData</span></span>(<span>self, section: int, orientation: Qt.Orientation, role: int = None) ‑> Any</span>
</code></dt>
<dd>
<div class="desc"><p>headerData(self, section: int, orientation: Qt.Orientation, role: int = Qt.ItemDataRole.DisplayRole) -&gt; Any</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def headerData(self, section: int, orientation: Qt.Orientation, role: int = None) -&gt; Any:
    # section is the index of the column/row.
    if role == Qt.DisplayRole and orientation == Qt.Horizontal:
        return self._col_names[section]</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.RegisterTableModel.rowCount"><code class="name flex">
<span>def <span class="ident">rowCount</span></span>(<span>self, index)</span>
</code></dt>
<dd>
<div class="desc"><p>rowCount(self, parent: QModelIndex = QModelIndex()) -&gt; int</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def rowCount(self, index):
    return len(self._reg_names)</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.RegisterTableModel.setRegisterMap"><code class="name flex">
<span>def <span class="ident">setRegisterMap</span></span>(<span>self, reg_map: RegisterMap)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setRegisterMap(self, reg_map: RegisterMap):
    self._reg_map = reg_map
    self._reg_data = reg_map.as_dict(flatten=True)
    self._reg_names = list(self._reg_data)</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.RegisterTableModel.toggleDisplayRole"><code class="name flex">
<span>def <span class="ident">toggleDisplayRole</span></span>(<span>self, index: QModelIndex)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def toggleDisplayRole(self, index: QModelIndex):
    if index.column() == 2:
        role = self._display_role.get(index.row(), 0) + 1
        self._display_role[index.row()] = role if role &lt; 3 else 0</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="egse.dpu.hdf5_model.TreeItem"><code class="flex name class">
<span>class <span class="ident">TreeItem</span></span>
<span>(</span><span>data: Any, parent: <a title="egse.dpu.hdf5_model.TreeItem" href="#egse.dpu.hdf5_model.TreeItem">TreeItem</a> = None)</span>
</code></dt>
<dd>
<div class="desc"><p>An item (node or leaf) in a generic tree structure.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TreeItem:
    &#34;&#34;&#34;
    An item (node or leaf) in a generic tree structure.
    &#34;&#34;&#34;
    def __init__(self, data: Any, parent: TreeItem = None):
        self._child_items = []
        self._item_data = data
        self._parent_item = parent

    def append_child(self, child: TreeItem):
        &#34;&#34;&#34;Adds a child HDF5Item to this object.&#34;&#34;&#34;
        self._child_items.append(child)

    def child(self, row: int) -&gt; Optional[TreeItem]:
        &#34;&#34;&#34;Returns the child at the given row. If an invalid row is given, None will be returned.&#34;&#34;&#34;
        if 0 &lt;= row &lt; len(self._child_items):
            return self._child_items[row]
        return None

    def child_index(self, item: TreeItem) -&gt; int:
        &#34;&#34;&#34;Returns the index (=row) of the child in the list of children.&#34;&#34;&#34;
        return self._child_items.index(item)

    def child_count(self) -&gt; int:
        &#34;&#34;&#34;Returns the number of children.&#34;&#34;&#34;
        return len(self._child_items)

    def last_child(self) -&gt; TreeItem:
        &#34;&#34;&#34;Returns the last child from the list of children.&#34;&#34;&#34;
        return self._child_items[-1]

    def column_count(self) -&gt; int:
        &#34;&#34;&#34;Returns the number of columns for this item.&#34;&#34;&#34;
        return len(self._item_data)

    def data(self, column: int):
        &#34;&#34;&#34;
        Returns the data in the given column for this item. If an invalid column is provided,
        None is returned.
        &#34;&#34;&#34;
        if 0 &lt;= column &lt; len(self._item_data):
            return self._item_data[column]
        return None

    def row(self) -&gt; int:
        &#34;&#34;&#34;
        Returns the row index of this item in the list of children of its parent. Since the root
        item has no parent, row=0 will be returned.
        &#34;&#34;&#34;
        if self._parent_item:
            return self._parent_item.child_index(self)
        return 0

    def parent_item(self) -&gt; Optional[TreeItem]:
        &#34;&#34;&#34;Returns the parent item for this item.&#34;&#34;&#34;
        return self._parent_item</code></pre>
</details>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="egse.dpu.hdf5_model.HDF5Item" href="#egse.dpu.hdf5_model.HDF5Item">HDF5Item</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="egse.dpu.hdf5_model.TreeItem.append_child"><code class="name flex">
<span>def <span class="ident">append_child</span></span>(<span>self, child: <a title="egse.dpu.hdf5_model.TreeItem" href="#egse.dpu.hdf5_model.TreeItem">TreeItem</a>)</span>
</code></dt>
<dd>
<div class="desc"><p>Adds a child HDF5Item to this object.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def append_child(self, child: TreeItem):
    &#34;&#34;&#34;Adds a child HDF5Item to this object.&#34;&#34;&#34;
    self._child_items.append(child)</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.TreeItem.child"><code class="name flex">
<span>def <span class="ident">child</span></span>(<span>self, row: int) ‑> Optional[<a title="egse.dpu.hdf5_model.TreeItem" href="#egse.dpu.hdf5_model.TreeItem">TreeItem</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the child at the given row. If an invalid row is given, None will be returned.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def child(self, row: int) -&gt; Optional[TreeItem]:
    &#34;&#34;&#34;Returns the child at the given row. If an invalid row is given, None will be returned.&#34;&#34;&#34;
    if 0 &lt;= row &lt; len(self._child_items):
        return self._child_items[row]
    return None</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.TreeItem.child_count"><code class="name flex">
<span>def <span class="ident">child_count</span></span>(<span>self) ‑> int</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the number of children.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def child_count(self) -&gt; int:
    &#34;&#34;&#34;Returns the number of children.&#34;&#34;&#34;
    return len(self._child_items)</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.TreeItem.child_index"><code class="name flex">
<span>def <span class="ident">child_index</span></span>(<span>self, item: <a title="egse.dpu.hdf5_model.TreeItem" href="#egse.dpu.hdf5_model.TreeItem">TreeItem</a>) ‑> int</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the index (=row) of the child in the list of children.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def child_index(self, item: TreeItem) -&gt; int:
    &#34;&#34;&#34;Returns the index (=row) of the child in the list of children.&#34;&#34;&#34;
    return self._child_items.index(item)</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.TreeItem.column_count"><code class="name flex">
<span>def <span class="ident">column_count</span></span>(<span>self) ‑> int</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the number of columns for this item.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def column_count(self) -&gt; int:
    &#34;&#34;&#34;Returns the number of columns for this item.&#34;&#34;&#34;
    return len(self._item_data)</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.TreeItem.data"><code class="name flex">
<span>def <span class="ident">data</span></span>(<span>self, column: int)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the data in the given column for this item. If an invalid column is provided,
None is returned.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def data(self, column: int):
    &#34;&#34;&#34;
    Returns the data in the given column for this item. If an invalid column is provided,
    None is returned.
    &#34;&#34;&#34;
    if 0 &lt;= column &lt; len(self._item_data):
        return self._item_data[column]
    return None</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.TreeItem.last_child"><code class="name flex">
<span>def <span class="ident">last_child</span></span>(<span>self) ‑> <a title="egse.dpu.hdf5_model.TreeItem" href="#egse.dpu.hdf5_model.TreeItem">TreeItem</a></span>
</code></dt>
<dd>
<div class="desc"><p>Returns the last child from the list of children.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def last_child(self) -&gt; TreeItem:
    &#34;&#34;&#34;Returns the last child from the list of children.&#34;&#34;&#34;
    return self._child_items[-1]</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.TreeItem.parent_item"><code class="name flex">
<span>def <span class="ident">parent_item</span></span>(<span>self) ‑> Optional[<a title="egse.dpu.hdf5_model.TreeItem" href="#egse.dpu.hdf5_model.TreeItem">TreeItem</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the parent item for this item.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def parent_item(self) -&gt; Optional[TreeItem]:
    &#34;&#34;&#34;Returns the parent item for this item.&#34;&#34;&#34;
    return self._parent_item</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.TreeItem.row"><code class="name flex">
<span>def <span class="ident">row</span></span>(<span>self) ‑> int</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the row index of this item in the list of children of its parent. Since the root
item has no parent, row=0 will be returned.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def row(self) -&gt; int:
    &#34;&#34;&#34;
    Returns the row index of this item in the list of children of its parent. Since the root
    item has no parent, row=0 will be returned.
    &#34;&#34;&#34;
    if self._parent_item:
        return self._parent_item.child_index(self)
    return 0</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="egse.dpu.hdf5_model.TreeModel"><code class="flex name class">
<span>class <span class="ident">TreeModel</span></span>
<span>(</span><span>data: Any, header_data: List[str], parent: QObject = None)</span>
</code></dt>
<dd>
<div class="desc"><p>A (more or less) generic tree model.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>data</code></strong></dt>
<dd>a list of lists</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TreeModel(QAbstractItemModel):
    &#34;&#34;&#34;
    A (more or less) generic tree model.

    Args:
        data: a list of lists

    &#34;&#34;&#34;
    ExpandableRole = Qt.UserRole + 500

    def __init__(self, data: Any, header_data: List[str], parent: QObject = None):
        super().__init__(parent)
        self._root_item = TreeItem(header_data)
        self.set_model_data(data, self._root_item)

    def data(self, index: QModelIndex, role: int = ...) -&gt; Any:
        if not index.isValid():
            return None

        item: HDF5Item = index.internalPointer()

        if role == Qt.DisplayRole:
            return item.data(index.column())
        if role == TreeModel.ExpandableRole:
            return item.is_expandable
        return None

    def flags(self, index: QModelIndex) -&gt; Qt.ItemFlags:
        if not index.isValid():
            return Qt.NoItemFlags
        return super().flags(index)

    def headerData(self, section: int, orientation: Qt.Orientation, role: int = ...) -&gt; Any:
        if orientation == Qt.Horizontal and role == Qt.DisplayRole:
            return self._root_item.data(section)
        return None

    def index(self, row: int, column: int, parent: QModelIndex = ...) -&gt; QModelIndex:

        if not self.hasIndex(row, column, parent):
            return QModelIndex()

        if not parent.isValid():
            parent_item = self._root_item
        else:
            parent_item = parent.internalPointer()

        child_item = parent_item.child(row)

        if child_item:
            return self.createIndex(row, column, child_item)

        return QModelIndex()

    def parent(self, child: QModelIndex) -&gt; QModelIndex:
        if not child.isValid():
            return QModelIndex()

        child_item = child.internalPointer()
        parent_item = child_item.parent_item()

        if parent_item is self._root_item:
            return QModelIndex()

        return self.createIndex(parent_item.row(), 0, parent_item)

    def rowCount(self, parent: QModelIndex = ...) -&gt; int:
        if parent.column() &gt; 0:
            row_count = 0
            return row_count

        if not parent.isValid():
            parent_item = self._root_item
        else:
            parent_item = parent.internalPointer()

        row_count = parent_item.child_count()
        return row_count

    def columnCount(self, parent: QModelIndex = ...) -&gt; int:
        if parent.isValid():
            col_count = parent.internalPointer().column_count()
        else:
            col_count = self._root_item.column_count()
        return col_count

    def hasChildren(self, index: QModelIndex = QModelIndex(), *args, **kwargs):

        if self.data(index, TreeModel.ExpandableRole):
            has_children = True
        else:
            has_children = super().hasChildren(index)

        return has_children

    def set_model_data(self, data: Any, parent: TreeItem):
        raise NotImplementedError</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt5.QtCore.QAbstractItemModel</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>sip.simplewrapper</li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="egse.dpu.hdf5_model.HDF5Model" href="#egse.dpu.hdf5_model.HDF5Model">HDF5Model</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="egse.dpu.hdf5_model.TreeModel.ExpandableRole"><code class="name">var <span class="ident">ExpandableRole</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="egse.dpu.hdf5_model.TreeModel.columnCount"><code class="name flex">
<span>def <span class="ident">columnCount</span></span>(<span>self, parent: QModelIndex = Ellipsis) ‑> int</span>
</code></dt>
<dd>
<div class="desc"><p>columnCount(self, parent: QModelIndex = QModelIndex()) -&gt; int</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def columnCount(self, parent: QModelIndex = ...) -&gt; int:
    if parent.isValid():
        col_count = parent.internalPointer().column_count()
    else:
        col_count = self._root_item.column_count()
    return col_count</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.TreeModel.data"><code class="name flex">
<span>def <span class="ident">data</span></span>(<span>self, index: QModelIndex, role: int = Ellipsis) ‑> Any</span>
</code></dt>
<dd>
<div class="desc"><p>data(self, index: QModelIndex, role: int = Qt.ItemDataRole.DisplayRole) -&gt; Any</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def data(self, index: QModelIndex, role: int = ...) -&gt; Any:
    if not index.isValid():
        return None

    item: HDF5Item = index.internalPointer()

    if role == Qt.DisplayRole:
        return item.data(index.column())
    if role == TreeModel.ExpandableRole:
        return item.is_expandable
    return None</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.TreeModel.flags"><code class="name flex">
<span>def <span class="ident">flags</span></span>(<span>self, index: QModelIndex) ‑> PyQt5.QtCore.Qt.ItemFlags</span>
</code></dt>
<dd>
<div class="desc"><p>flags(self, index: QModelIndex) -&gt; Qt.ItemFlags</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def flags(self, index: QModelIndex) -&gt; Qt.ItemFlags:
    if not index.isValid():
        return Qt.NoItemFlags
    return super().flags(index)</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.TreeModel.hasChildren"><code class="name flex">
<span>def <span class="ident">hasChildren</span></span>(<span>self, index: QModelIndex = &lt;PyQt5.QtCore.QModelIndex object&gt;, *args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>hasChildren(self, parent: QModelIndex = QModelIndex()) -&gt; bool</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def hasChildren(self, index: QModelIndex = QModelIndex(), *args, **kwargs):

    if self.data(index, TreeModel.ExpandableRole):
        has_children = True
    else:
        has_children = super().hasChildren(index)

    return has_children</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.TreeModel.headerData"><code class="name flex">
<span>def <span class="ident">headerData</span></span>(<span>self, section: int, orientation: Qt.Orientation, role: int = Ellipsis) ‑> Any</span>
</code></dt>
<dd>
<div class="desc"><p>headerData(self, section: int, orientation: Qt.Orientation, role: int = Qt.ItemDataRole.DisplayRole) -&gt; Any</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def headerData(self, section: int, orientation: Qt.Orientation, role: int = ...) -&gt; Any:
    if orientation == Qt.Horizontal and role == Qt.DisplayRole:
        return self._root_item.data(section)
    return None</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.TreeModel.index"><code class="name flex">
<span>def <span class="ident">index</span></span>(<span>self, row: int, column: int, parent: QModelIndex = Ellipsis) ‑> PyQt5.QtCore.QModelIndex</span>
</code></dt>
<dd>
<div class="desc"><p>index(self, row: int, column: int, parent: QModelIndex = QModelIndex()) -&gt; QModelIndex</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def index(self, row: int, column: int, parent: QModelIndex = ...) -&gt; QModelIndex:

    if not self.hasIndex(row, column, parent):
        return QModelIndex()

    if not parent.isValid():
        parent_item = self._root_item
    else:
        parent_item = parent.internalPointer()

    child_item = parent_item.child(row)

    if child_item:
        return self.createIndex(row, column, child_item)

    return QModelIndex()</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.TreeModel.parent"><code class="name flex">
<span>def <span class="ident">parent</span></span>(<span>self, child: QModelIndex) ‑> PyQt5.QtCore.QModelIndex</span>
</code></dt>
<dd>
<div class="desc"><p>parent(self, child: QModelIndex) -&gt; QModelIndex
parent(self) -&gt; typing.Optional[QObject]</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def parent(self, child: QModelIndex) -&gt; QModelIndex:
    if not child.isValid():
        return QModelIndex()

    child_item = child.internalPointer()
    parent_item = child_item.parent_item()

    if parent_item is self._root_item:
        return QModelIndex()

    return self.createIndex(parent_item.row(), 0, parent_item)</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.TreeModel.rowCount"><code class="name flex">
<span>def <span class="ident">rowCount</span></span>(<span>self, parent: QModelIndex = Ellipsis) ‑> int</span>
</code></dt>
<dd>
<div class="desc"><p>rowCount(self, parent: QModelIndex = QModelIndex()) -&gt; int</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def rowCount(self, parent: QModelIndex = ...) -&gt; int:
    if parent.column() &gt; 0:
        row_count = 0
        return row_count

    if not parent.isValid():
        parent_item = self._root_item
    else:
        parent_item = parent.internalPointer()

    row_count = parent_item.child_count()
    return row_count</code></pre>
</details>
</dd>
<dt id="egse.dpu.hdf5_model.TreeModel.set_model_data"><code class="name flex">
<span>def <span class="ident">set_model_data</span></span>(<span>self, data: Any, parent: <a title="egse.dpu.hdf5_model.TreeItem" href="#egse.dpu.hdf5_model.TreeItem">TreeItem</a>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_model_data(self, data: Any, parent: TreeItem):
    raise NotImplementedError</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="egse.dpu" href="index.html">egse.dpu</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="egse.dpu.hdf5_model.convert_data_for_role" href="#egse.dpu.hdf5_model.convert_data_for_role">convert_data_for_role</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.get_type_name" href="#egse.dpu.hdf5_model.get_type_name">get_type_name</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="egse.dpu.hdf5_model.HDF5Item" href="#egse.dpu.hdf5_model.HDF5Item">HDF5Item</a></code></h4>
<ul class="">
<li><code><a title="egse.dpu.hdf5_model.HDF5Item.get_item" href="#egse.dpu.hdf5_model.HDF5Item.get_item">get_item</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.HDF5Item.is_expandable" href="#egse.dpu.hdf5_model.HDF5Item.is_expandable">is_expandable</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.HDF5Item.item_name" href="#egse.dpu.hdf5_model.HDF5Item.item_name">item_name</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.HDF5Item.item_size" href="#egse.dpu.hdf5_model.HDF5Item.item_size">item_size</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.HDF5Item.item_type" href="#egse.dpu.hdf5_model.HDF5Item.item_type">item_type</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.dpu.hdf5_model.HDF5Model" href="#egse.dpu.hdf5_model.HDF5Model">HDF5Model</a></code></h4>
<ul class="">
<li><code><a title="egse.dpu.hdf5_model.HDF5Model.get_model_data" href="#egse.dpu.hdf5_model.HDF5Model.get_model_data">get_model_data</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.HDF5Model.set_model_data" href="#egse.dpu.hdf5_model.HDF5Model.set_model_data">set_model_data</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.HDF5Model.update_model_data" href="#egse.dpu.hdf5_model.HDF5Model.update_model_data">update_model_data</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.dpu.hdf5_model.RegisterTableModel" href="#egse.dpu.hdf5_model.RegisterTableModel">RegisterTableModel</a></code></h4>
<ul class="two-column">
<li><code><a title="egse.dpu.hdf5_model.RegisterTableModel.columnCount" href="#egse.dpu.hdf5_model.RegisterTableModel.columnCount">columnCount</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.RegisterTableModel.data" href="#egse.dpu.hdf5_model.RegisterTableModel.data">data</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.RegisterTableModel.headerData" href="#egse.dpu.hdf5_model.RegisterTableModel.headerData">headerData</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.RegisterTableModel.rowCount" href="#egse.dpu.hdf5_model.RegisterTableModel.rowCount">rowCount</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.RegisterTableModel.setRegisterMap" href="#egse.dpu.hdf5_model.RegisterTableModel.setRegisterMap">setRegisterMap</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.RegisterTableModel.toggleDisplayRole" href="#egse.dpu.hdf5_model.RegisterTableModel.toggleDisplayRole">toggleDisplayRole</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.dpu.hdf5_model.TreeItem" href="#egse.dpu.hdf5_model.TreeItem">TreeItem</a></code></h4>
<ul class="two-column">
<li><code><a title="egse.dpu.hdf5_model.TreeItem.append_child" href="#egse.dpu.hdf5_model.TreeItem.append_child">append_child</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeItem.child" href="#egse.dpu.hdf5_model.TreeItem.child">child</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeItem.child_count" href="#egse.dpu.hdf5_model.TreeItem.child_count">child_count</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeItem.child_index" href="#egse.dpu.hdf5_model.TreeItem.child_index">child_index</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeItem.column_count" href="#egse.dpu.hdf5_model.TreeItem.column_count">column_count</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeItem.data" href="#egse.dpu.hdf5_model.TreeItem.data">data</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeItem.last_child" href="#egse.dpu.hdf5_model.TreeItem.last_child">last_child</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeItem.parent_item" href="#egse.dpu.hdf5_model.TreeItem.parent_item">parent_item</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeItem.row" href="#egse.dpu.hdf5_model.TreeItem.row">row</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.dpu.hdf5_model.TreeModel" href="#egse.dpu.hdf5_model.TreeModel">TreeModel</a></code></h4>
<ul class="two-column">
<li><code><a title="egse.dpu.hdf5_model.TreeModel.ExpandableRole" href="#egse.dpu.hdf5_model.TreeModel.ExpandableRole">ExpandableRole</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeModel.columnCount" href="#egse.dpu.hdf5_model.TreeModel.columnCount">columnCount</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeModel.data" href="#egse.dpu.hdf5_model.TreeModel.data">data</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeModel.flags" href="#egse.dpu.hdf5_model.TreeModel.flags">flags</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeModel.hasChildren" href="#egse.dpu.hdf5_model.TreeModel.hasChildren">hasChildren</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeModel.headerData" href="#egse.dpu.hdf5_model.TreeModel.headerData">headerData</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeModel.index" href="#egse.dpu.hdf5_model.TreeModel.index">index</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeModel.parent" href="#egse.dpu.hdf5_model.TreeModel.parent">parent</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeModel.rowCount" href="#egse.dpu.hdf5_model.TreeModel.rowCount">rowCount</a></code></li>
<li><code><a title="egse.dpu.hdf5_model.TreeModel.set_model_data" href="#egse.dpu.hdf5_model.TreeModel.set_model_data">set_model_data</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>