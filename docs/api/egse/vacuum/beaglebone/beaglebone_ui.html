<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>egse.vacuum.beaglebone.beaglebone_ui API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>egse.vacuum.beaglebone.beaglebone_ui</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import argparse
import logging
import pickle
from pathlib import Path

import sys
import zmq
from PyQt5.QtCore import QThread, QObject, pyqtSignal, QSize, QLockFile
from PyQt5.QtGui import QCloseEvent, QIcon
from PyQt5.QtWidgets import QMainWindow, QApplication, QLabel, QFrame, QVBoxLayout, QGroupBox, QGridLayout, \
    QPushButton, QSpacerItem, QSizePolicy, QMessageBox

from egse.gui import QHLine
from egse.gui.led import Led, Indic
from egse.observer import Observer, Observable
from egse.resource import get_resource
from egse.vacuum.beaglebone.beaglebone import BeagleboneProxy
from egse.vacuum.beaglebone.beaglebone import BeagleboneSimulator
from egse.vacuum.beaglebone.beaglebone import CTRL_SETTINGS
from egse.zmq_ser import connect_address

logger = logging.getLogger(__name__)

class ValveMonitoringWorker(QObject):
    valve_remote_status_signal = pyqtSignal(dict)
    valve_feedback_status_signal = pyqtSignal(dict)
    
    def __init__(self):
        super(ValveMonitoringWorker, self).__init__()
        
        self.active = False
        self.just_reconnected = True
        
        self.monitoring_socket = None
        self.is_socket_connected = True
        self.monitoring_timeout = 1
        
        self.connect_socket()
        
        self.previous_valve_remote_status_signal   = {}
        self.previous_valve_feedback_status_signal = {}


    def connect_socket(self):
        &#34;&#34;&#34; Create a socket and connect to the monitoring port.
        &#34;&#34;&#34;
        

        try:
            transport   = CTRL_SETTINGS.PROTOCOL
            hostname    = CTRL_SETTINGS.HOSTNAME
            
            monitoring_port = CTRL_SETTINGS.MONITORING_PORT
            monitoring_address = connect_address(transport, hostname, monitoring_port)
            
            self.monitoring_socket = zmq.Context().socket(zmq.SUB)
            self.monitoring_socket.connect(monitoring_address)
            self.monitoring_socket.setsockopt_string(zmq.SUBSCRIBE, &#34;&#34;)
            
            self.monitoring_timeout = 0.5
            
            self.is_socket_connected = True
            
        except:
            self.is_socket_connected = False

    def stop(self):
        self.monitoring_socket.close()
        self.is_socket_connected = False
        
        self.active = False
        
    def start_process(self):
        self.run()
        
    def run(self):
        self.active = True
        
        while self.is_socket_connected and self.active:
            try:
                socket_list, _, exc_list = zmq.select([self.monitoring_socket], [], [], timeout=self.monitoring_timeout)

                if self.monitoring_socket in socket_list:
                    try:
                        pickle_string = self.monitoring_socket.recv()
                    except Exception:
                        raise Exception

                    monitoring_info = pickle.loads(pickle_string)
                    
                    valve_remote      = monitoring_info[&#39;Remote&#39;]
                    valve_feedback   = monitoring_info[&#39;Feedback&#39;]

                    if valve_remote != self.previous_valve_remote_status_signal:
                        self.valve_remote_status_signal.emit(valve_remote)

                    self.previous_valve_remote_status_signal = valve_remote
                    
                    if valve_feedback != self.previous_valve_feedback_status_signal:
                        self.valve_feedback_status_signal.emit(valve_feedback)

                    self.previous_valve_feedback_status_signal = valve_feedback
                    
                    
            except Exception as exc:
                logger.info(exc)
                raise exc


class ValveControl(QGroupBox):
    def __init__(self):
        super().__init__()
        self.setObjectName(&#34;Valve Controls&#34;)
        
        self.gridLayout = QGridLayout()
        self.gridLayout.setObjectName(&#34;Valve controls layout&#34;)    

        self.ln2Line        = QHLine()
        self.n2Line         = QHLine()
        self.miscLine       = QHLine()

        self.ln2Label       = QLabel(&#34;LN2&#34;)
        self.ln2ShroudLabel = QLabel(&#34;Shroud&#34;)
        self.ln2ShroudLed   = Led(self)
        self.ln2ShroudLed.setObjectName(&#34;MV011-led&#34;)
        self.ln2ShroudLed.setMinimumSize(QSize(25, 0))
        self.ln2TebFeeLabel = QLabel(&#34;TEB-FEE / MaRi&#34;)
        self.ln2TebFeeLed   = Led(self)
        self.ln2TebFeeLed.setObjectName(&#34;MV012-led&#34;)
        self.ln2TebFeeLed.setMinimumSize(QSize(25, 0))
        self.ln2TebTouLabel = QLabel(&#34;TEB-TOU&#34;)
        self.ln2TebTouLed   = Led(self)
        self.ln2TebTouLed.setObjectName(&#34;MV013-led&#34;)
        self.ln2TebTouLed.setMinimumSize(QSize(25, 0))
        self.ln2TrapLabel   = QLabel(&#34;Trap&#34;)
        self.ln2TrapLed   = Led(self)
        self.ln2TrapLed.setObjectName(&#34;MV014-led&#34;)
        self.ln2TrapLed.setMinimumSize(QSize(25, 0))
        
        self.ln2ShroudOpen  = QPushButton(&#34;Open&#34;)
        self.ln2ShroudOpen.setObjectName(&#34;MV011-open&#34;)
        self.ln2ShroudClose = QPushButton(&#34;Close&#34;)
        self.ln2ShroudClose.setObjectName(&#34;MV011-close&#34;)
        self.ln2TebFeeOpen  = QPushButton(&#34;Open&#34;)
        self.ln2TebFeeOpen.setObjectName(&#34;MV012-open&#34;)
        self.ln2TebFeeClose = QPushButton(&#34;Close&#34;)
        self.ln2TebFeeClose.setObjectName(&#34;MV012-close&#34;)
        self.ln2TebTouOpen  = QPushButton(&#34;Open&#34;)
        self.ln2TebTouOpen.setObjectName(&#34;MV013-open&#34;)
        self.ln2TebTouClose = QPushButton(&#34;Close&#34;)
        self.ln2TebTouClose.setObjectName(&#34;MV013-close&#34;)
        self.ln2TrapOpen    = QPushButton(&#34;Open&#34;)
        self.ln2TrapOpen.setObjectName(&#34;MV014-open&#34;)
        self.ln2TrapClose   = QPushButton(&#34;Close&#34;)
        self.ln2TrapClose.setObjectName(&#34;MV014-close&#34;)
                
        self.n2Label        = QLabel(&#34;N2&#34;)
        self.n2ShroudLabel  = QLabel(&#34;Shroud&#34;)
        self.n2ShroudLed    = Led(self)
        self.n2ShroudLed.setObjectName(&#34;MV021-led&#34;)
        self.n2TebFeeLabel  = QLabel(&#34;TEB-FEE / MaRi&#34;)
        self.n2TebFeeLed    = Led(self)
        self.n2TebFeeLed.setObjectName(&#34;MV022-led&#34;)
        self.n2TebTouLabel  = QLabel(&#34;TEB-TOU&#34;)
        self.n2TebTouLed    = Led(self)
        self.n2TebTouLed.setObjectName(&#34;MV023-led&#34;)
        self.n2TrapLabel    = QLabel(&#34;Trap&#34;)
        self.n2TrapLed      = Led(self)
        self.n2TrapLed.setObjectName(&#34;MV024-led&#34;)
        
        self.n2ShroudOpen  = QPushButton(&#34;Open&#34;)
        self.n2ShroudOpen.setObjectName(&#34;MV021-open&#34;)
        self.n2ShroudClose = QPushButton(&#34;Close&#34;)
        self.n2ShroudClose.setObjectName(&#34;MV021-close&#34;)
        self.n2TebFeeOpen  = QPushButton(&#34;Open&#34;)
        self.n2TebFeeOpen.setObjectName(&#34;MV022-open&#34;)
        self.n2TebFeeClose = QPushButton(&#34;Close&#34;)
        self.n2TebFeeClose.setObjectName(&#34;MV022-close&#34;)
        self.n2TebTouOpen  = QPushButton(&#34;Open&#34;)
        self.n2TebTouOpen.setObjectName(&#34;MV023-open&#34;)
        self.n2TebTouClose = QPushButton(&#34;Close&#34;)
        self.n2TebTouClose.setObjectName(&#34;MV023-close&#34;)
        self.n2TrapOpen    = QPushButton(&#34;Open&#34;)
        self.n2TrapOpen.setObjectName(&#34;MV024-open&#34;)
        self.n2TrapClose   = QPushButton(&#34;Close&#34;)
        self.n2TrapClose.setObjectName(&#34;MV024-close&#34;)
        
        self.miscLabel      = QLabel(&#34;Misc.&#34;)
        self.ventLabel      = QLabel(&#34;Vent valve&#34;)
        self.ventLed        = Led(self)
        self.ventLed.setObjectName(&#34;MV002-led&#34;)
        self.gateLabel      = QLabel(&#34;Gate valve&#34;)
        self.gateLed        = Led(self)
        self.gateLed.setObjectName(&#34;MV001-led&#34;)
        self.guiLabel       = QLabel(&#34;GUI lock&#34;)

        self.ventClose = QPushButton(&#34;Close&#34;)
        self.ventClose.setObjectName(&#34;MV002-close&#34;)
        self.ventOpen  = QPushButton(&#34;Open&#34;)
        self.ventOpen.setObjectName(&#34;MV002-open&#34;)
        self.gateClose = QPushButton(&#34;Close&#34;)
        self.gateClose.setObjectName(&#34;MV001-close&#34;)
        self.gateOpen    = QPushButton(&#34;Open&#34;)
        self.gateOpen.setObjectName(&#34;MV001-open&#34;)
        self.guiLock = QPushButton(&#34;Lock&#34;)
        self.guiLock.setObjectName(&#34;GUI-lock/unlock&#34;)


        ln2N2Spacer = QSpacerItem(20, 20, QSizePolicy.Expanding, QSizePolicy.Minimum)
        n2MiscSpacer = QSpacerItem(20, 20, QSizePolicy.Expanding, QSizePolicy.Minimum)

        self.gridLayout.addWidget(self.ln2Label, 0, 0, 1, 2)
        self.gridLayout.addWidget(self.n2Label, 0, 4, 1, 2)
        self.gridLayout.addWidget(self.miscLabel, 0, 8, 1, 2)
        
        self.gridLayout.addWidget(self.ln2Line, 1, 0, 1, 4)
        self.gridLayout.addWidget(self.n2Line, 1, 4, 1, 4)
        self.gridLayout.addWidget(self.miscLine, 1, 8, 1, 4)
        
        self.gridLayout.addWidget(self.ln2ShroudLed, 2, 0, 1, 1)
        self.gridLayout.addWidget(self.ln2ShroudLabel, 2, 1, 1, 1)
        self.gridLayout.addWidget(self.ln2ShroudClose, 2, 2, 1, 1)
        self.gridLayout.addWidget(self.ln2ShroudOpen, 2, 3, 1, 1)
        
        self.gridLayout.addWidget(self.ln2TebFeeLed, 3, 0, 1, 1)
        self.gridLayout.addWidget(self.ln2TebFeeLabel, 3, 1, 1, 1)
        self.gridLayout.addWidget(self.ln2TebFeeClose, 3, 2, 1, 1)
        self.gridLayout.addWidget(self.ln2TebFeeOpen, 3, 3, 1, 1)
        
        self.gridLayout.addWidget(self.ln2TebTouLed, 4, 0, 1, 1)
        self.gridLayout.addWidget(self.ln2TebTouLabel, 4, 1, 1, 1)
        self.gridLayout.addWidget(self.ln2TebTouClose, 4, 2, 1, 1)
        self.gridLayout.addWidget(self.ln2TebTouOpen, 4, 3, 1, 1)
        
        self.gridLayout.addWidget(self.ln2TrapLed, 5, 0, 1, 1)
        self.gridLayout.addWidget(self.ln2TrapLabel, 5, 1, 1, 1)
        self.gridLayout.addWidget(self.ln2TrapClose, 5, 2, 1, 1)
        self.gridLayout.addWidget(self.ln2TrapOpen, 5, 3, 1, 1)
        
        self.gridLayout.addItem(ln2N2Spacer, 2, 3, 1, 1)
        
        self.gridLayout.addWidget(self.n2ShroudLed, 2, 4, 1, 1)
        self.gridLayout.addWidget(self.n2ShroudLabel, 2, 5, 1, 1)
        self.gridLayout.addWidget(self.n2ShroudClose, 2, 6, 1, 1)
        self.gridLayout.addWidget(self.n2ShroudOpen, 2, 7, 1, 1)
        
        self.gridLayout.addWidget(self.n2TebFeeLed, 3, 4, 1, 1)
        self.gridLayout.addWidget(self.n2TebFeeLabel, 3, 5, 1, 1)
        self.gridLayout.addWidget(self.n2TebFeeClose, 3, 6, 1, 1)
        self.gridLayout.addWidget(self.n2TebFeeOpen, 3, 7, 1, 1)
        
        self.gridLayout.addWidget(self.n2TebTouLed, 4, 4, 1, 1)
        self.gridLayout.addWidget(self.n2TebTouLabel, 4, 5, 1, 1)
        self.gridLayout.addWidget(self.n2TebTouClose, 4, 6, 1, 1)
        self.gridLayout.addWidget(self.n2TebTouOpen, 4, 7, 1, 1)
        
        self.gridLayout.addWidget(self.n2TrapLed, 5, 4, 1, 1)
        self.gridLayout.addWidget(self.n2TrapLabel, 5, 5, 1, 1)
        self.gridLayout.addWidget(self.n2TrapClose, 5, 6, 1, 1)
        self.gridLayout.addWidget(self.n2TrapOpen, 5, 7, 1, 1)       

        self.gridLayout.addItem(n2MiscSpacer, 2, 7, 1, 1)

        self.gridLayout.addWidget(self.ventLed, 2, 8, 1, 1)
        self.gridLayout.addWidget(self.ventLabel, 2, 9, 1, 1)
        self.gridLayout.addWidget(self.ventClose, 2, 10, 1, 1)
        self.gridLayout.addWidget(self.ventOpen, 2, 11, 1, 1)
        
        self.gridLayout.addWidget(self.gateLed, 3, 8, 1, 1)
        self.gridLayout.addWidget(self.gateLabel, 3, 9, 1, 1)
        self.gridLayout.addWidget(self.gateClose, 3, 10, 1, 1)
        self.gridLayout.addWidget(self.gateOpen, 3, 11, 1, 1) 
        
        self.gridLayout.addWidget(self.guiLabel, 5, 9, 1, 2)
        self.gridLayout.addWidget(self.guiLock, 5, 11, 1, 1)      

        self.setLayout(self.gridLayout)

class ValveUIView(QMainWindow, Observable):
    def __init__(self):
        super().__init__()
        self.setWindowTitle(&#34;Beaglebone Valves&#34;)
        self.initUI()
        self.guiEnabled = True
        self.remote = {
            &#39;MV011&#39; : None,
            &#39;MV012&#39; : None,
            &#39;MV013&#39; : None,
            &#39;MV014&#39; : None,
            &#39;MV021&#39; : None,
            &#39;MV022&#39; : None,
            &#39;MV023&#39; : None,
            &#39;MV024&#39; : None,
            &#39;MV001&#39; : None,
            &#39;MV002&#39; : None
        }
        
        self.feedback = {
            &#39;MV011&#39; : None,
            &#39;MV012&#39; : None,
            &#39;MV013&#39; : None,
            &#39;MV014&#39; : None,
            &#39;MV021&#39; : None,
            &#39;MV022&#39; : None,
            &#39;MV023&#39; : None,
            &#39;MV024&#39; : None,
            &#39;MV001-OPEN&#39; : None,
            &#39;MV001-CLOSE&#39; : None,
            &#39;MV002&#39; : None,
            &#39;DOOR&#39; : None
        }
        
        self.valve_monitoring_thread = QThread(self)
        self.valve_monitoring_worker = ValveMonitoringWorker()
        self.valve_monitoring_worker.moveToThread(self.valve_monitoring_thread)
        
        self.valve_monitoring_worker.valve_feedback_status_signal.connect(self.on_feedback_status_change)
        self.valve_monitoring_worker.valve_remote_status_signal.connect(self.on_remote_status_change)
        
        for child in self.findChildren(QPushButton):
            if &#39;open&#39; in child.objectName():
                child.clicked.connect(self.on_open_click)
            if &#39;close&#39; in child.objectName():
                child.clicked.connect(self.on_close_click)
        
        self.valve_ctrl.guiLock.clicked.connect(self.on_lock_click)
        
        self.valve_monitoring_thread.started.connect(self.valve_monitoring_worker.start_process)
        self.valve_monitoring_thread.start()
        
    def initUI(self):
        app_frame = QFrame()
        app_frame.setObjectName(&#34;AppFrame&#34;)
        
        layout = QVBoxLayout()
        self.valve_ctrl = ValveControl()
        layout.addWidget(self.valve_ctrl)
        
        app_frame.setLayout(layout)
        self.setCentralWidget(app_frame)
    
    def on_lock_click(self):
        sender = self.sender()
        self.guiEnabled = False
        if sender.text() == &#39;Lock&#39;:
            sender.setText(&#39;Unlock&#39;)
            for child in self.findChildren(QPushButton):
                if &#39;open&#39; in child.objectName() or &#39;close&#39; in child.objectName():
                    child.setEnabled(False)
        elif sender.text() == &#39;Unlock&#39;:
            msg = QMessageBox()
            msg.setIcon(QMessageBox.Warning)
            msg.setWindowTitle(&#34;Vent GUI lock&#34;)
            msg.setText(&#34;You are about to unlock the vent controller GUI&#34;)
            msg.setInformativeText(&#34;Are you sure that you want to unlock the vent controller GUI?&#34;)
            msg.setStandardButtons(QMessageBox.Ok | QMessageBox.Abort)
            
            retval = msg.exec_()
            if retval == QMessageBox.Ok:
                sender.setText(&#39;Lock&#39;)
                self.guiEnabled = True    
            else:
                return
                

    
    def on_open_click(self):
        sender = self.sender()
        code = sender.objectName().split(&#39;-&#39;)[0]
        # print(sender.objectName())
        if code == &#39;MV002&#39;:
            msg = QMessageBox()
            msg.setIcon(QMessageBox.Warning)
            msg.setWindowTitle(&#34;Vent valve warning&#34;)
            msg.setText(&#34;You are about to open the vent valve&#34;)
            msg.setInformativeText(&#34;Are you sure that you want to open the vent valve?&#34;)
            msg.setStandardButtons(QMessageBox.Ok | QMessageBox.Abort)
            
            retval = msg.exec_()
            if retval == QMessageBox.Ok:
                self.actionObservers({&#39;set_valve&#39;: [code, True]})   
            else:
                return
        else:
            self.actionObservers({&#39;set_valve&#39;: [code, True]})
    
    def on_close_click(self):
        sender = self.sender()
        code = sender.objectName().split(&#39;-&#39;)[0]
        self.actionObservers({&#39;set_valve&#39;: [code, False]})
        
    def on_feedback_status_change(self, monitoring_info):
        monitoring_info.pop(&#39;GSRON_VALVE_INTERLOCK_DOOR&#39;)
        if self.guiEnabled:
            for key, value in monitoring_info.items():
                code  = key.split(&#34;_&#34;)[-1]
                if self.remote[code]:
                    for child in self.findChildren(QPushButton):
                        if code in child.objectName():
                            if code != &#39;MV001&#39;:
                                if value:
                                    led = self.findChild(QLabel, f&#39;{code}-led&#39;)
                                    # print(led)
                                    led.set_color(Indic.RED)
                                    if &#39;open&#39; in child.objectName():
                                        child.setEnabled(False)
                                    if &#39;close&#39; in child.objectName():
                                        child.setEnabled(True)
                                else:
                                    led = self.findChild(QLabel, f&#39;{code}-led&#39;)
                                    led.set_color(Indic.GREEN)
                                    if &#39;open&#39; in child.objectName():
                                        child.setEnabled(True)
                                    if &#39;close&#39; in child.objectName():
                                        child.setEnabled(False)
                            else:
                                led = self.findChild(QLabel, f&#39;MV001-led&#39;)
                                if &#39;OPEN&#39; in key:
                                    if value:
                                        led.set_color(Indic.RED)
                                        if &#39;open&#39; in child.objectName():
                                            child.setEnabled(True)
                                        if &#39;close&#39; in child.objectName():
                                            child.setEnabled(False)
                                elif &#39;CLOSE&#39; in key:
                                    if value:
                                        led.set_color(Indic.GREEN)
                                        if &#39;open&#39; in child.objectName():
                                            child.setEnabled(False)
                                        if &#39;close&#39; in child.objectName():
                                            child.setEnabled(True)
                                                   
    
    def on_remote_status_change(self, monitoring_info):
        if self.guiEnabled:
            for key, value in monitoring_info.items():
                code  = key.split(&#34;_&#34;)[-1]
                if self.remote[code] != value:
                    if value:
                        if &#39;MV001&#39; in key:
                            if self.feedback[&#39;MV001-OPEN&#39;]:
                                child = self.findChild(QPushButton, f&#39;{code}-close&#39;)
                                child.setEnabled(True)
                            elif self.feedback[&#39;MV001-CLOSE&#39;]:
                                child = self.findChild(QPushButton, f&#39;{code}-open&#39;)
                                child.setEnabled(True)
                        else:
                            if self.feedback[code]:
                                child = self.findChild(QPushButton, f&#39;{code}-open&#39;)
                                child.setEnabled(True)
                            else:
                                child = self.findChild(QPushButton, f&#39;{code}-close&#39;)
                                child.setEnabled(True)
                    else:
                        code  = key.split(&#34;_&#34;)[-1]
                        child = self.findChild(QPushButton, f&#39;{code}-open&#39;)
                        child.setEnabled(False)
                        child = self.findChild(QPushButton, f&#39;{code}-close&#39;)
                        child.setEnabled(False)
                self.remote[code] = value        
    
    
    def closeEvent(self, close_event:QCloseEvent) -&gt; None:
        self.valve_monitoring_worker.stop()
        self.valve_monitoring_thread.quit()
    
class ValveUIModel:
    def __init__(self, mode):
        self.mode = mode
        
        if self.mode == &#39;proxy&#39;:
            try:
                self.valve = BeagleboneProxy()
            except Exception as exc:
                raise exc
            
        elif self.mode == &#39;simulator&#39;:
            self.valve = BeagleboneSimulator()
        else:
            raise ValueError(f&#39;Unknown type of Valve implementation passed into the model&#39;)
            
        if self.valve is not None:
            logger.debug(f&#39;Valve Controller initialized as {self.valve.__class__.__name__}&#39;)

    def set_valve(self, name, state):
        with BeagleboneProxy() as proxy:
            proxy.set_valve(name, state)
    
    def get_valve(self, name):
        with BeagleboneProxy() as proxy:
            return proxy.get_valve(name)
        
    def has_commands(self):
        if self.mode == &#34;proxy&#34;:
            with BeagleboneProxy() as valve:
                return valve.has_commands()

        return True

    def load_commands(self):
        if self.mode == &#34;proxy&#34;:
            with BeagleboneProxy() as valve:
                    valve.load_commands()

    def is_simulator(self):
        with BeagleboneProxy() as valve:
            return valve.is_simulator()

    def is_connected(self):
        if self.mode == &#34;proxy&#34;:
            with BeagleboneProxy() as valve:
                return valve.is_cs_connected()

        else:

            return self.valve.is_connected()

    def reconnect(self):
        if self.mode == &#34;proxy&#34;:
            with BeagleboneProxy() as valve:

                valve.reconnect_cs()

                return valve.is_cs_connected()

        else:

            self.valve.reconnect()

            return self.valve.is_connected()

        return False

    def disconnect(self):
        if self.mode == &#34;proxy&#34;:

            self.mode.disconnect_cs()     
        
class ValveUIController(Observer):
    def __init__(self, model: ValveUIModel, view: ValveUIView):
        self.model = model
        self.view  = view
        self.view.addObserver(self)
        
    def update(self, changed_object):
        text = changed_object.text()

        if text == &#34;Reconnect&#34;:

            if changed_object.isChecked():

                logger.debug(&#34;Reconnecting the Valve model.&#34;)

                if self.model.reconnect():

                    self.view.set_connection_state(True)

                    if not self.model.has_commands():

                        self.model.load_commands()

                else:
                    self.view.reconnect_action.setChecked(False)
            else:

                logger.debug(&#34;Disconnecting the Heater model.&#34;)
                self.model.disconnect()
                self.view.set_connection_state(False)

            return
 
    
    def do(self, actions):
        for action, value in actions.items():
            logger.debug(f&#34;do {action} with {value}&#34;)
            if action == &#39;set_valve&#39;:
                name = value[0]
                state = value[1]
                logger.debug(f&#34;do: set_valve({name}, {state})&#34;)
                self.model.set_valve(name, state)
            if action == &#39;get_valve&#39;:
                name = value[0]
                logger.debug(f&#34;do: get_valve({name})&#34;)
                return self.model.get_valve(name)
    
def parse_arguments():
    parser = argparse.ArgumentParser()
    parser.add_argument(
        &#34;--type&#34;,
        dest=&#34;type&#34;,
        action=&#34;store&#34;,
        choices={&#34;proxy&#34;, &#34;simulator&#34;},
        help=&#34;Specify Beaglebone Valve controller implementation you want to connect to.&#34;,
        default=&#34;proxy&#34;,
    )    
    args = parser.parse_args()
    return args


def main():
    lock_file = QLockFile(str(Path(&#34;~/vacuum_beaglebone_ui.app.lock&#34;).expanduser()))

    args = list(sys.argv)
    app = QApplication(args)
    app.setWindowIcon(QIcon(str(get_resource(&#34;:/icons/vacuum.svg&#34;))))

    if lock_file.tryLock(100):
        args = parse_arguments()

        if args.type == &#39;proxy&#39;:
            try:
                proxy = BeagleboneProxy()
            except Exception:
                raise Exception

        view = ValveUIView()
        model = ValveUIModel(args.type)
        controller = ValveUIController(model, view)

        view.show()
        app.exec_()
    else:
        error_message = QMessageBox()
        error_message.setIcon(QMessageBox.Warning)
        error_message.setWindowTitle(&#34;Error&#34;)
        error_message.setText(&#34;The Beaglebone vacuum GUI application is already running!&#34;)
        error_message.setStandardButtons(QMessageBox.Ok)

        return error_message.exec()


if __name__ == &#34;__main__&#34;:
    main()</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.main"><code class="name flex">
<span>def <span class="ident">main</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def main():
    lock_file = QLockFile(str(Path(&#34;~/vacuum_beaglebone_ui.app.lock&#34;).expanduser()))

    args = list(sys.argv)
    app = QApplication(args)
    app.setWindowIcon(QIcon(str(get_resource(&#34;:/icons/vacuum.svg&#34;))))

    if lock_file.tryLock(100):
        args = parse_arguments()

        if args.type == &#39;proxy&#39;:
            try:
                proxy = BeagleboneProxy()
            except Exception:
                raise Exception

        view = ValveUIView()
        model = ValveUIModel(args.type)
        controller = ValveUIController(model, view)

        view.show()
        app.exec_()
    else:
        error_message = QMessageBox()
        error_message.setIcon(QMessageBox.Warning)
        error_message.setWindowTitle(&#34;Error&#34;)
        error_message.setText(&#34;The Beaglebone vacuum GUI application is already running!&#34;)
        error_message.setStandardButtons(QMessageBox.Ok)

        return error_message.exec()</code></pre>
</details>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.parse_arguments"><code class="name flex">
<span>def <span class="ident">parse_arguments</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def parse_arguments():
    parser = argparse.ArgumentParser()
    parser.add_argument(
        &#34;--type&#34;,
        dest=&#34;type&#34;,
        action=&#34;store&#34;,
        choices={&#34;proxy&#34;, &#34;simulator&#34;},
        help=&#34;Specify Beaglebone Valve controller implementation you want to connect to.&#34;,
        default=&#34;proxy&#34;,
    )    
    args = parser.parse_args()
    return args</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveControl"><code class="flex name class">
<span>class <span class="ident">ValveControl</span></span>
</code></dt>
<dd>
<div class="desc"><p>QGroupBox(parent: QWidget = None)
QGroupBox(str, parent: QWidget = None)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ValveControl(QGroupBox):
    def __init__(self):
        super().__init__()
        self.setObjectName(&#34;Valve Controls&#34;)
        
        self.gridLayout = QGridLayout()
        self.gridLayout.setObjectName(&#34;Valve controls layout&#34;)    

        self.ln2Line        = QHLine()
        self.n2Line         = QHLine()
        self.miscLine       = QHLine()

        self.ln2Label       = QLabel(&#34;LN2&#34;)
        self.ln2ShroudLabel = QLabel(&#34;Shroud&#34;)
        self.ln2ShroudLed   = Led(self)
        self.ln2ShroudLed.setObjectName(&#34;MV011-led&#34;)
        self.ln2ShroudLed.setMinimumSize(QSize(25, 0))
        self.ln2TebFeeLabel = QLabel(&#34;TEB-FEE / MaRi&#34;)
        self.ln2TebFeeLed   = Led(self)
        self.ln2TebFeeLed.setObjectName(&#34;MV012-led&#34;)
        self.ln2TebFeeLed.setMinimumSize(QSize(25, 0))
        self.ln2TebTouLabel = QLabel(&#34;TEB-TOU&#34;)
        self.ln2TebTouLed   = Led(self)
        self.ln2TebTouLed.setObjectName(&#34;MV013-led&#34;)
        self.ln2TebTouLed.setMinimumSize(QSize(25, 0))
        self.ln2TrapLabel   = QLabel(&#34;Trap&#34;)
        self.ln2TrapLed   = Led(self)
        self.ln2TrapLed.setObjectName(&#34;MV014-led&#34;)
        self.ln2TrapLed.setMinimumSize(QSize(25, 0))
        
        self.ln2ShroudOpen  = QPushButton(&#34;Open&#34;)
        self.ln2ShroudOpen.setObjectName(&#34;MV011-open&#34;)
        self.ln2ShroudClose = QPushButton(&#34;Close&#34;)
        self.ln2ShroudClose.setObjectName(&#34;MV011-close&#34;)
        self.ln2TebFeeOpen  = QPushButton(&#34;Open&#34;)
        self.ln2TebFeeOpen.setObjectName(&#34;MV012-open&#34;)
        self.ln2TebFeeClose = QPushButton(&#34;Close&#34;)
        self.ln2TebFeeClose.setObjectName(&#34;MV012-close&#34;)
        self.ln2TebTouOpen  = QPushButton(&#34;Open&#34;)
        self.ln2TebTouOpen.setObjectName(&#34;MV013-open&#34;)
        self.ln2TebTouClose = QPushButton(&#34;Close&#34;)
        self.ln2TebTouClose.setObjectName(&#34;MV013-close&#34;)
        self.ln2TrapOpen    = QPushButton(&#34;Open&#34;)
        self.ln2TrapOpen.setObjectName(&#34;MV014-open&#34;)
        self.ln2TrapClose   = QPushButton(&#34;Close&#34;)
        self.ln2TrapClose.setObjectName(&#34;MV014-close&#34;)
                
        self.n2Label        = QLabel(&#34;N2&#34;)
        self.n2ShroudLabel  = QLabel(&#34;Shroud&#34;)
        self.n2ShroudLed    = Led(self)
        self.n2ShroudLed.setObjectName(&#34;MV021-led&#34;)
        self.n2TebFeeLabel  = QLabel(&#34;TEB-FEE / MaRi&#34;)
        self.n2TebFeeLed    = Led(self)
        self.n2TebFeeLed.setObjectName(&#34;MV022-led&#34;)
        self.n2TebTouLabel  = QLabel(&#34;TEB-TOU&#34;)
        self.n2TebTouLed    = Led(self)
        self.n2TebTouLed.setObjectName(&#34;MV023-led&#34;)
        self.n2TrapLabel    = QLabel(&#34;Trap&#34;)
        self.n2TrapLed      = Led(self)
        self.n2TrapLed.setObjectName(&#34;MV024-led&#34;)
        
        self.n2ShroudOpen  = QPushButton(&#34;Open&#34;)
        self.n2ShroudOpen.setObjectName(&#34;MV021-open&#34;)
        self.n2ShroudClose = QPushButton(&#34;Close&#34;)
        self.n2ShroudClose.setObjectName(&#34;MV021-close&#34;)
        self.n2TebFeeOpen  = QPushButton(&#34;Open&#34;)
        self.n2TebFeeOpen.setObjectName(&#34;MV022-open&#34;)
        self.n2TebFeeClose = QPushButton(&#34;Close&#34;)
        self.n2TebFeeClose.setObjectName(&#34;MV022-close&#34;)
        self.n2TebTouOpen  = QPushButton(&#34;Open&#34;)
        self.n2TebTouOpen.setObjectName(&#34;MV023-open&#34;)
        self.n2TebTouClose = QPushButton(&#34;Close&#34;)
        self.n2TebTouClose.setObjectName(&#34;MV023-close&#34;)
        self.n2TrapOpen    = QPushButton(&#34;Open&#34;)
        self.n2TrapOpen.setObjectName(&#34;MV024-open&#34;)
        self.n2TrapClose   = QPushButton(&#34;Close&#34;)
        self.n2TrapClose.setObjectName(&#34;MV024-close&#34;)
        
        self.miscLabel      = QLabel(&#34;Misc.&#34;)
        self.ventLabel      = QLabel(&#34;Vent valve&#34;)
        self.ventLed        = Led(self)
        self.ventLed.setObjectName(&#34;MV002-led&#34;)
        self.gateLabel      = QLabel(&#34;Gate valve&#34;)
        self.gateLed        = Led(self)
        self.gateLed.setObjectName(&#34;MV001-led&#34;)
        self.guiLabel       = QLabel(&#34;GUI lock&#34;)

        self.ventClose = QPushButton(&#34;Close&#34;)
        self.ventClose.setObjectName(&#34;MV002-close&#34;)
        self.ventOpen  = QPushButton(&#34;Open&#34;)
        self.ventOpen.setObjectName(&#34;MV002-open&#34;)
        self.gateClose = QPushButton(&#34;Close&#34;)
        self.gateClose.setObjectName(&#34;MV001-close&#34;)
        self.gateOpen    = QPushButton(&#34;Open&#34;)
        self.gateOpen.setObjectName(&#34;MV001-open&#34;)
        self.guiLock = QPushButton(&#34;Lock&#34;)
        self.guiLock.setObjectName(&#34;GUI-lock/unlock&#34;)


        ln2N2Spacer = QSpacerItem(20, 20, QSizePolicy.Expanding, QSizePolicy.Minimum)
        n2MiscSpacer = QSpacerItem(20, 20, QSizePolicy.Expanding, QSizePolicy.Minimum)

        self.gridLayout.addWidget(self.ln2Label, 0, 0, 1, 2)
        self.gridLayout.addWidget(self.n2Label, 0, 4, 1, 2)
        self.gridLayout.addWidget(self.miscLabel, 0, 8, 1, 2)
        
        self.gridLayout.addWidget(self.ln2Line, 1, 0, 1, 4)
        self.gridLayout.addWidget(self.n2Line, 1, 4, 1, 4)
        self.gridLayout.addWidget(self.miscLine, 1, 8, 1, 4)
        
        self.gridLayout.addWidget(self.ln2ShroudLed, 2, 0, 1, 1)
        self.gridLayout.addWidget(self.ln2ShroudLabel, 2, 1, 1, 1)
        self.gridLayout.addWidget(self.ln2ShroudClose, 2, 2, 1, 1)
        self.gridLayout.addWidget(self.ln2ShroudOpen, 2, 3, 1, 1)
        
        self.gridLayout.addWidget(self.ln2TebFeeLed, 3, 0, 1, 1)
        self.gridLayout.addWidget(self.ln2TebFeeLabel, 3, 1, 1, 1)
        self.gridLayout.addWidget(self.ln2TebFeeClose, 3, 2, 1, 1)
        self.gridLayout.addWidget(self.ln2TebFeeOpen, 3, 3, 1, 1)
        
        self.gridLayout.addWidget(self.ln2TebTouLed, 4, 0, 1, 1)
        self.gridLayout.addWidget(self.ln2TebTouLabel, 4, 1, 1, 1)
        self.gridLayout.addWidget(self.ln2TebTouClose, 4, 2, 1, 1)
        self.gridLayout.addWidget(self.ln2TebTouOpen, 4, 3, 1, 1)
        
        self.gridLayout.addWidget(self.ln2TrapLed, 5, 0, 1, 1)
        self.gridLayout.addWidget(self.ln2TrapLabel, 5, 1, 1, 1)
        self.gridLayout.addWidget(self.ln2TrapClose, 5, 2, 1, 1)
        self.gridLayout.addWidget(self.ln2TrapOpen, 5, 3, 1, 1)
        
        self.gridLayout.addItem(ln2N2Spacer, 2, 3, 1, 1)
        
        self.gridLayout.addWidget(self.n2ShroudLed, 2, 4, 1, 1)
        self.gridLayout.addWidget(self.n2ShroudLabel, 2, 5, 1, 1)
        self.gridLayout.addWidget(self.n2ShroudClose, 2, 6, 1, 1)
        self.gridLayout.addWidget(self.n2ShroudOpen, 2, 7, 1, 1)
        
        self.gridLayout.addWidget(self.n2TebFeeLed, 3, 4, 1, 1)
        self.gridLayout.addWidget(self.n2TebFeeLabel, 3, 5, 1, 1)
        self.gridLayout.addWidget(self.n2TebFeeClose, 3, 6, 1, 1)
        self.gridLayout.addWidget(self.n2TebFeeOpen, 3, 7, 1, 1)
        
        self.gridLayout.addWidget(self.n2TebTouLed, 4, 4, 1, 1)
        self.gridLayout.addWidget(self.n2TebTouLabel, 4, 5, 1, 1)
        self.gridLayout.addWidget(self.n2TebTouClose, 4, 6, 1, 1)
        self.gridLayout.addWidget(self.n2TebTouOpen, 4, 7, 1, 1)
        
        self.gridLayout.addWidget(self.n2TrapLed, 5, 4, 1, 1)
        self.gridLayout.addWidget(self.n2TrapLabel, 5, 5, 1, 1)
        self.gridLayout.addWidget(self.n2TrapClose, 5, 6, 1, 1)
        self.gridLayout.addWidget(self.n2TrapOpen, 5, 7, 1, 1)       

        self.gridLayout.addItem(n2MiscSpacer, 2, 7, 1, 1)

        self.gridLayout.addWidget(self.ventLed, 2, 8, 1, 1)
        self.gridLayout.addWidget(self.ventLabel, 2, 9, 1, 1)
        self.gridLayout.addWidget(self.ventClose, 2, 10, 1, 1)
        self.gridLayout.addWidget(self.ventOpen, 2, 11, 1, 1)
        
        self.gridLayout.addWidget(self.gateLed, 3, 8, 1, 1)
        self.gridLayout.addWidget(self.gateLabel, 3, 9, 1, 1)
        self.gridLayout.addWidget(self.gateClose, 3, 10, 1, 1)
        self.gridLayout.addWidget(self.gateOpen, 3, 11, 1, 1) 
        
        self.gridLayout.addWidget(self.guiLabel, 5, 9, 1, 2)
        self.gridLayout.addWidget(self.guiLock, 5, 11, 1, 1)      

        self.setLayout(self.gridLayout)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt5.QtWidgets.QGroupBox</li>
<li>PyQt5.QtWidgets.QWidget</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>PyQt5.QtGui.QPaintDevice</li>
<li>sip.simplewrapper</li>
</ul>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker"><code class="flex name class">
<span>class <span class="ident">ValveMonitoringWorker</span></span>
</code></dt>
<dd>
<div class="desc"><p>QObject(parent: QObject = None)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ValveMonitoringWorker(QObject):
    valve_remote_status_signal = pyqtSignal(dict)
    valve_feedback_status_signal = pyqtSignal(dict)
    
    def __init__(self):
        super(ValveMonitoringWorker, self).__init__()
        
        self.active = False
        self.just_reconnected = True
        
        self.monitoring_socket = None
        self.is_socket_connected = True
        self.monitoring_timeout = 1
        
        self.connect_socket()
        
        self.previous_valve_remote_status_signal   = {}
        self.previous_valve_feedback_status_signal = {}


    def connect_socket(self):
        &#34;&#34;&#34; Create a socket and connect to the monitoring port.
        &#34;&#34;&#34;
        

        try:
            transport   = CTRL_SETTINGS.PROTOCOL
            hostname    = CTRL_SETTINGS.HOSTNAME
            
            monitoring_port = CTRL_SETTINGS.MONITORING_PORT
            monitoring_address = connect_address(transport, hostname, monitoring_port)
            
            self.monitoring_socket = zmq.Context().socket(zmq.SUB)
            self.monitoring_socket.connect(monitoring_address)
            self.monitoring_socket.setsockopt_string(zmq.SUBSCRIBE, &#34;&#34;)
            
            self.monitoring_timeout = 0.5
            
            self.is_socket_connected = True
            
        except:
            self.is_socket_connected = False

    def stop(self):
        self.monitoring_socket.close()
        self.is_socket_connected = False
        
        self.active = False
        
    def start_process(self):
        self.run()
        
    def run(self):
        self.active = True
        
        while self.is_socket_connected and self.active:
            try:
                socket_list, _, exc_list = zmq.select([self.monitoring_socket], [], [], timeout=self.monitoring_timeout)

                if self.monitoring_socket in socket_list:
                    try:
                        pickle_string = self.monitoring_socket.recv()
                    except Exception:
                        raise Exception

                    monitoring_info = pickle.loads(pickle_string)
                    
                    valve_remote      = monitoring_info[&#39;Remote&#39;]
                    valve_feedback   = monitoring_info[&#39;Feedback&#39;]

                    if valve_remote != self.previous_valve_remote_status_signal:
                        self.valve_remote_status_signal.emit(valve_remote)

                    self.previous_valve_remote_status_signal = valve_remote
                    
                    if valve_feedback != self.previous_valve_feedback_status_signal:
                        self.valve_feedback_status_signal.emit(valve_feedback)

                    self.previous_valve_feedback_status_signal = valve_feedback
                    
                    
            except Exception as exc:
                logger.info(exc)
                raise exc</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>sip.simplewrapper</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker.connect_socket"><code class="name flex">
<span>def <span class="ident">connect_socket</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Create a socket and connect to the monitoring port.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def connect_socket(self):
    &#34;&#34;&#34; Create a socket and connect to the monitoring port.
    &#34;&#34;&#34;
    

    try:
        transport   = CTRL_SETTINGS.PROTOCOL
        hostname    = CTRL_SETTINGS.HOSTNAME
        
        monitoring_port = CTRL_SETTINGS.MONITORING_PORT
        monitoring_address = connect_address(transport, hostname, monitoring_port)
        
        self.monitoring_socket = zmq.Context().socket(zmq.SUB)
        self.monitoring_socket.connect(monitoring_address)
        self.monitoring_socket.setsockopt_string(zmq.SUBSCRIBE, &#34;&#34;)
        
        self.monitoring_timeout = 0.5
        
        self.is_socket_connected = True
        
    except:
        self.is_socket_connected = False</code></pre>
</details>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker.run"><code class="name flex">
<span>def <span class="ident">run</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def run(self):
    self.active = True
    
    while self.is_socket_connected and self.active:
        try:
            socket_list, _, exc_list = zmq.select([self.monitoring_socket], [], [], timeout=self.monitoring_timeout)

            if self.monitoring_socket in socket_list:
                try:
                    pickle_string = self.monitoring_socket.recv()
                except Exception:
                    raise Exception

                monitoring_info = pickle.loads(pickle_string)
                
                valve_remote      = monitoring_info[&#39;Remote&#39;]
                valve_feedback   = monitoring_info[&#39;Feedback&#39;]

                if valve_remote != self.previous_valve_remote_status_signal:
                    self.valve_remote_status_signal.emit(valve_remote)

                self.previous_valve_remote_status_signal = valve_remote
                
                if valve_feedback != self.previous_valve_feedback_status_signal:
                    self.valve_feedback_status_signal.emit(valve_feedback)

                self.previous_valve_feedback_status_signal = valve_feedback
                
                
        except Exception as exc:
            logger.info(exc)
            raise exc</code></pre>
</details>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker.start_process"><code class="name flex">
<span>def <span class="ident">start_process</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def start_process(self):
    self.run()</code></pre>
</details>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker.stop"><code class="name flex">
<span>def <span class="ident">stop</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def stop(self):
    self.monitoring_socket.close()
    self.is_socket_connected = False
    
    self.active = False</code></pre>
</details>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker.valve_feedback_status_signal"><code class="name flex">
<span>def <span class="ident">valve_feedback_status_signal</span></span>(<span>...)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker.valve_remote_status_signal"><code class="name flex">
<span>def <span class="ident">valve_remote_status_signal</span></span>(<span>...)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveUIController"><code class="flex name class">
<span>class <span class="ident">ValveUIController</span></span>
<span>(</span><span>model: <a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel">ValveUIModel</a>, view: <a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIView" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIView">ValveUIView</a>)</span>
</code></dt>
<dd>
<div class="desc"><p>Helper class that provides a standard way to create an ABC using
inheritance.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ValveUIController(Observer):
    def __init__(self, model: ValveUIModel, view: ValveUIView):
        self.model = model
        self.view  = view
        self.view.addObserver(self)
        
    def update(self, changed_object):
        text = changed_object.text()

        if text == &#34;Reconnect&#34;:

            if changed_object.isChecked():

                logger.debug(&#34;Reconnecting the Valve model.&#34;)

                if self.model.reconnect():

                    self.view.set_connection_state(True)

                    if not self.model.has_commands():

                        self.model.load_commands()

                else:
                    self.view.reconnect_action.setChecked(False)
            else:

                logger.debug(&#34;Disconnecting the Heater model.&#34;)
                self.model.disconnect()
                self.view.set_connection_state(False)

            return
 
    
    def do(self, actions):
        for action, value in actions.items():
            logger.debug(f&#34;do {action} with {value}&#34;)
            if action == &#39;set_valve&#39;:
                name = value[0]
                state = value[1]
                logger.debug(f&#34;do: set_valve({name}, {state})&#34;)
                self.model.set_valve(name, state)
            if action == &#39;get_valve&#39;:
                name = value[0]
                logger.debug(f&#34;do: get_valve({name})&#34;)
                return self.model.get_valve(name)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="egse.observer.Observer" href="../../observer.html#egse.observer.Observer">Observer</a></li>
<li>abc.ABC</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveUIController.do"><code class="name flex">
<span>def <span class="ident">do</span></span>(<span>self, actions)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def do(self, actions):
    for action, value in actions.items():
        logger.debug(f&#34;do {action} with {value}&#34;)
        if action == &#39;set_valve&#39;:
            name = value[0]
            state = value[1]
            logger.debug(f&#34;do: set_valve({name}, {state})&#34;)
            self.model.set_valve(name, state)
        if action == &#39;get_valve&#39;:
            name = value[0]
            logger.debug(f&#34;do: get_valve({name})&#34;)
            return self.model.get_valve(name)</code></pre>
</details>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveUIController.update"><code class="name flex">
<span>def <span class="ident">update</span></span>(<span>self, changed_object)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update(self, changed_object):
    text = changed_object.text()

    if text == &#34;Reconnect&#34;:

        if changed_object.isChecked():

            logger.debug(&#34;Reconnecting the Valve model.&#34;)

            if self.model.reconnect():

                self.view.set_connection_state(True)

                if not self.model.has_commands():

                    self.model.load_commands()

            else:
                self.view.reconnect_action.setChecked(False)
        else:

            logger.debug(&#34;Disconnecting the Heater model.&#34;)
            self.model.disconnect()
            self.view.set_connection_state(False)

        return</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel"><code class="flex name class">
<span>class <span class="ident">ValveUIModel</span></span>
<span>(</span><span>mode)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ValveUIModel:
    def __init__(self, mode):
        self.mode = mode
        
        if self.mode == &#39;proxy&#39;:
            try:
                self.valve = BeagleboneProxy()
            except Exception as exc:
                raise exc
            
        elif self.mode == &#39;simulator&#39;:
            self.valve = BeagleboneSimulator()
        else:
            raise ValueError(f&#39;Unknown type of Valve implementation passed into the model&#39;)
            
        if self.valve is not None:
            logger.debug(f&#39;Valve Controller initialized as {self.valve.__class__.__name__}&#39;)

    def set_valve(self, name, state):
        with BeagleboneProxy() as proxy:
            proxy.set_valve(name, state)
    
    def get_valve(self, name):
        with BeagleboneProxy() as proxy:
            return proxy.get_valve(name)
        
    def has_commands(self):
        if self.mode == &#34;proxy&#34;:
            with BeagleboneProxy() as valve:
                return valve.has_commands()

        return True

    def load_commands(self):
        if self.mode == &#34;proxy&#34;:
            with BeagleboneProxy() as valve:
                    valve.load_commands()

    def is_simulator(self):
        with BeagleboneProxy() as valve:
            return valve.is_simulator()

    def is_connected(self):
        if self.mode == &#34;proxy&#34;:
            with BeagleboneProxy() as valve:
                return valve.is_cs_connected()

        else:

            return self.valve.is_connected()

    def reconnect(self):
        if self.mode == &#34;proxy&#34;:
            with BeagleboneProxy() as valve:

                valve.reconnect_cs()

                return valve.is_cs_connected()

        else:

            self.valve.reconnect()

            return self.valve.is_connected()

        return False

    def disconnect(self):
        if self.mode == &#34;proxy&#34;:

            self.mode.disconnect_cs()     </code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.disconnect"><code class="name flex">
<span>def <span class="ident">disconnect</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def disconnect(self):
    if self.mode == &#34;proxy&#34;:

        self.mode.disconnect_cs()     </code></pre>
</details>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.get_valve"><code class="name flex">
<span>def <span class="ident">get_valve</span></span>(<span>self, name)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_valve(self, name):
    with BeagleboneProxy() as proxy:
        return proxy.get_valve(name)</code></pre>
</details>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.has_commands"><code class="name flex">
<span>def <span class="ident">has_commands</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def has_commands(self):
    if self.mode == &#34;proxy&#34;:
        with BeagleboneProxy() as valve:
            return valve.has_commands()

    return True</code></pre>
</details>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.is_connected"><code class="name flex">
<span>def <span class="ident">is_connected</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def is_connected(self):
    if self.mode == &#34;proxy&#34;:
        with BeagleboneProxy() as valve:
            return valve.is_cs_connected()

    else:

        return self.valve.is_connected()</code></pre>
</details>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.is_simulator"><code class="name flex">
<span>def <span class="ident">is_simulator</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def is_simulator(self):
    with BeagleboneProxy() as valve:
        return valve.is_simulator()</code></pre>
</details>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.load_commands"><code class="name flex">
<span>def <span class="ident">load_commands</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def load_commands(self):
    if self.mode == &#34;proxy&#34;:
        with BeagleboneProxy() as valve:
                valve.load_commands()</code></pre>
</details>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.reconnect"><code class="name flex">
<span>def <span class="ident">reconnect</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def reconnect(self):
    if self.mode == &#34;proxy&#34;:
        with BeagleboneProxy() as valve:

            valve.reconnect_cs()

            return valve.is_cs_connected()

    else:

        self.valve.reconnect()

        return self.valve.is_connected()

    return False</code></pre>
</details>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.set_valve"><code class="name flex">
<span>def <span class="ident">set_valve</span></span>(<span>self, name, state)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_valve(self, name, state):
    with BeagleboneProxy() as proxy:
        proxy.set_valve(name, state)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveUIView"><code class="flex name class">
<span>class <span class="ident">ValveUIView</span></span>
</code></dt>
<dd>
<div class="desc"><p>QMainWindow(parent: QWidget = None, flags: Union[Qt.WindowFlags, Qt.WindowType] = Qt.WindowFlags())</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ValveUIView(QMainWindow, Observable):
    def __init__(self):
        super().__init__()
        self.setWindowTitle(&#34;Beaglebone Valves&#34;)
        self.initUI()
        self.guiEnabled = True
        self.remote = {
            &#39;MV011&#39; : None,
            &#39;MV012&#39; : None,
            &#39;MV013&#39; : None,
            &#39;MV014&#39; : None,
            &#39;MV021&#39; : None,
            &#39;MV022&#39; : None,
            &#39;MV023&#39; : None,
            &#39;MV024&#39; : None,
            &#39;MV001&#39; : None,
            &#39;MV002&#39; : None
        }
        
        self.feedback = {
            &#39;MV011&#39; : None,
            &#39;MV012&#39; : None,
            &#39;MV013&#39; : None,
            &#39;MV014&#39; : None,
            &#39;MV021&#39; : None,
            &#39;MV022&#39; : None,
            &#39;MV023&#39; : None,
            &#39;MV024&#39; : None,
            &#39;MV001-OPEN&#39; : None,
            &#39;MV001-CLOSE&#39; : None,
            &#39;MV002&#39; : None,
            &#39;DOOR&#39; : None
        }
        
        self.valve_monitoring_thread = QThread(self)
        self.valve_monitoring_worker = ValveMonitoringWorker()
        self.valve_monitoring_worker.moveToThread(self.valve_monitoring_thread)
        
        self.valve_monitoring_worker.valve_feedback_status_signal.connect(self.on_feedback_status_change)
        self.valve_monitoring_worker.valve_remote_status_signal.connect(self.on_remote_status_change)
        
        for child in self.findChildren(QPushButton):
            if &#39;open&#39; in child.objectName():
                child.clicked.connect(self.on_open_click)
            if &#39;close&#39; in child.objectName():
                child.clicked.connect(self.on_close_click)
        
        self.valve_ctrl.guiLock.clicked.connect(self.on_lock_click)
        
        self.valve_monitoring_thread.started.connect(self.valve_monitoring_worker.start_process)
        self.valve_monitoring_thread.start()
        
    def initUI(self):
        app_frame = QFrame()
        app_frame.setObjectName(&#34;AppFrame&#34;)
        
        layout = QVBoxLayout()
        self.valve_ctrl = ValveControl()
        layout.addWidget(self.valve_ctrl)
        
        app_frame.setLayout(layout)
        self.setCentralWidget(app_frame)
    
    def on_lock_click(self):
        sender = self.sender()
        self.guiEnabled = False
        if sender.text() == &#39;Lock&#39;:
            sender.setText(&#39;Unlock&#39;)
            for child in self.findChildren(QPushButton):
                if &#39;open&#39; in child.objectName() or &#39;close&#39; in child.objectName():
                    child.setEnabled(False)
        elif sender.text() == &#39;Unlock&#39;:
            msg = QMessageBox()
            msg.setIcon(QMessageBox.Warning)
            msg.setWindowTitle(&#34;Vent GUI lock&#34;)
            msg.setText(&#34;You are about to unlock the vent controller GUI&#34;)
            msg.setInformativeText(&#34;Are you sure that you want to unlock the vent controller GUI?&#34;)
            msg.setStandardButtons(QMessageBox.Ok | QMessageBox.Abort)
            
            retval = msg.exec_()
            if retval == QMessageBox.Ok:
                sender.setText(&#39;Lock&#39;)
                self.guiEnabled = True    
            else:
                return
                

    
    def on_open_click(self):
        sender = self.sender()
        code = sender.objectName().split(&#39;-&#39;)[0]
        # print(sender.objectName())
        if code == &#39;MV002&#39;:
            msg = QMessageBox()
            msg.setIcon(QMessageBox.Warning)
            msg.setWindowTitle(&#34;Vent valve warning&#34;)
            msg.setText(&#34;You are about to open the vent valve&#34;)
            msg.setInformativeText(&#34;Are you sure that you want to open the vent valve?&#34;)
            msg.setStandardButtons(QMessageBox.Ok | QMessageBox.Abort)
            
            retval = msg.exec_()
            if retval == QMessageBox.Ok:
                self.actionObservers({&#39;set_valve&#39;: [code, True]})   
            else:
                return
        else:
            self.actionObservers({&#39;set_valve&#39;: [code, True]})
    
    def on_close_click(self):
        sender = self.sender()
        code = sender.objectName().split(&#39;-&#39;)[0]
        self.actionObservers({&#39;set_valve&#39;: [code, False]})
        
    def on_feedback_status_change(self, monitoring_info):
        monitoring_info.pop(&#39;GSRON_VALVE_INTERLOCK_DOOR&#39;)
        if self.guiEnabled:
            for key, value in monitoring_info.items():
                code  = key.split(&#34;_&#34;)[-1]
                if self.remote[code]:
                    for child in self.findChildren(QPushButton):
                        if code in child.objectName():
                            if code != &#39;MV001&#39;:
                                if value:
                                    led = self.findChild(QLabel, f&#39;{code}-led&#39;)
                                    # print(led)
                                    led.set_color(Indic.RED)
                                    if &#39;open&#39; in child.objectName():
                                        child.setEnabled(False)
                                    if &#39;close&#39; in child.objectName():
                                        child.setEnabled(True)
                                else:
                                    led = self.findChild(QLabel, f&#39;{code}-led&#39;)
                                    led.set_color(Indic.GREEN)
                                    if &#39;open&#39; in child.objectName():
                                        child.setEnabled(True)
                                    if &#39;close&#39; in child.objectName():
                                        child.setEnabled(False)
                            else:
                                led = self.findChild(QLabel, f&#39;MV001-led&#39;)
                                if &#39;OPEN&#39; in key:
                                    if value:
                                        led.set_color(Indic.RED)
                                        if &#39;open&#39; in child.objectName():
                                            child.setEnabled(True)
                                        if &#39;close&#39; in child.objectName():
                                            child.setEnabled(False)
                                elif &#39;CLOSE&#39; in key:
                                    if value:
                                        led.set_color(Indic.GREEN)
                                        if &#39;open&#39; in child.objectName():
                                            child.setEnabled(False)
                                        if &#39;close&#39; in child.objectName():
                                            child.setEnabled(True)
                                                   
    
    def on_remote_status_change(self, monitoring_info):
        if self.guiEnabled:
            for key, value in monitoring_info.items():
                code  = key.split(&#34;_&#34;)[-1]
                if self.remote[code] != value:
                    if value:
                        if &#39;MV001&#39; in key:
                            if self.feedback[&#39;MV001-OPEN&#39;]:
                                child = self.findChild(QPushButton, f&#39;{code}-close&#39;)
                                child.setEnabled(True)
                            elif self.feedback[&#39;MV001-CLOSE&#39;]:
                                child = self.findChild(QPushButton, f&#39;{code}-open&#39;)
                                child.setEnabled(True)
                        else:
                            if self.feedback[code]:
                                child = self.findChild(QPushButton, f&#39;{code}-open&#39;)
                                child.setEnabled(True)
                            else:
                                child = self.findChild(QPushButton, f&#39;{code}-close&#39;)
                                child.setEnabled(True)
                    else:
                        code  = key.split(&#34;_&#34;)[-1]
                        child = self.findChild(QPushButton, f&#39;{code}-open&#39;)
                        child.setEnabled(False)
                        child = self.findChild(QPushButton, f&#39;{code}-close&#39;)
                        child.setEnabled(False)
                self.remote[code] = value        
    
    
    def closeEvent(self, close_event:QCloseEvent) -&gt; None:
        self.valve_monitoring_worker.stop()
        self.valve_monitoring_thread.quit()</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt5.QtWidgets.QMainWindow</li>
<li>PyQt5.QtWidgets.QWidget</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>PyQt5.QtGui.QPaintDevice</li>
<li>sip.simplewrapper</li>
<li><a title="egse.observer.Observable" href="../../observer.html#egse.observer.Observable">Observable</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.closeEvent"><code class="name flex">
<span>def <span class="ident">closeEvent</span></span>(<span>self, close_event: PyQt5.QtGui.QCloseEvent) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>closeEvent(self, QCloseEvent)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def closeEvent(self, close_event:QCloseEvent) -&gt; None:
    self.valve_monitoring_worker.stop()
    self.valve_monitoring_thread.quit()</code></pre>
</details>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.initUI"><code class="name flex">
<span>def <span class="ident">initUI</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def initUI(self):
    app_frame = QFrame()
    app_frame.setObjectName(&#34;AppFrame&#34;)
    
    layout = QVBoxLayout()
    self.valve_ctrl = ValveControl()
    layout.addWidget(self.valve_ctrl)
    
    app_frame.setLayout(layout)
    self.setCentralWidget(app_frame)</code></pre>
</details>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.on_close_click"><code class="name flex">
<span>def <span class="ident">on_close_click</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def on_close_click(self):
    sender = self.sender()
    code = sender.objectName().split(&#39;-&#39;)[0]
    self.actionObservers({&#39;set_valve&#39;: [code, False]})</code></pre>
</details>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.on_feedback_status_change"><code class="name flex">
<span>def <span class="ident">on_feedback_status_change</span></span>(<span>self, monitoring_info)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def on_feedback_status_change(self, monitoring_info):
    monitoring_info.pop(&#39;GSRON_VALVE_INTERLOCK_DOOR&#39;)
    if self.guiEnabled:
        for key, value in monitoring_info.items():
            code  = key.split(&#34;_&#34;)[-1]
            if self.remote[code]:
                for child in self.findChildren(QPushButton):
                    if code in child.objectName():
                        if code != &#39;MV001&#39;:
                            if value:
                                led = self.findChild(QLabel, f&#39;{code}-led&#39;)
                                # print(led)
                                led.set_color(Indic.RED)
                                if &#39;open&#39; in child.objectName():
                                    child.setEnabled(False)
                                if &#39;close&#39; in child.objectName():
                                    child.setEnabled(True)
                            else:
                                led = self.findChild(QLabel, f&#39;{code}-led&#39;)
                                led.set_color(Indic.GREEN)
                                if &#39;open&#39; in child.objectName():
                                    child.setEnabled(True)
                                if &#39;close&#39; in child.objectName():
                                    child.setEnabled(False)
                        else:
                            led = self.findChild(QLabel, f&#39;MV001-led&#39;)
                            if &#39;OPEN&#39; in key:
                                if value:
                                    led.set_color(Indic.RED)
                                    if &#39;open&#39; in child.objectName():
                                        child.setEnabled(True)
                                    if &#39;close&#39; in child.objectName():
                                        child.setEnabled(False)
                            elif &#39;CLOSE&#39; in key:
                                if value:
                                    led.set_color(Indic.GREEN)
                                    if &#39;open&#39; in child.objectName():
                                        child.setEnabled(False)
                                    if &#39;close&#39; in child.objectName():
                                        child.setEnabled(True)</code></pre>
</details>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.on_lock_click"><code class="name flex">
<span>def <span class="ident">on_lock_click</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def on_lock_click(self):
    sender = self.sender()
    self.guiEnabled = False
    if sender.text() == &#39;Lock&#39;:
        sender.setText(&#39;Unlock&#39;)
        for child in self.findChildren(QPushButton):
            if &#39;open&#39; in child.objectName() or &#39;close&#39; in child.objectName():
                child.setEnabled(False)
    elif sender.text() == &#39;Unlock&#39;:
        msg = QMessageBox()
        msg.setIcon(QMessageBox.Warning)
        msg.setWindowTitle(&#34;Vent GUI lock&#34;)
        msg.setText(&#34;You are about to unlock the vent controller GUI&#34;)
        msg.setInformativeText(&#34;Are you sure that you want to unlock the vent controller GUI?&#34;)
        msg.setStandardButtons(QMessageBox.Ok | QMessageBox.Abort)
        
        retval = msg.exec_()
        if retval == QMessageBox.Ok:
            sender.setText(&#39;Lock&#39;)
            self.guiEnabled = True    
        else:
            return</code></pre>
</details>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.on_open_click"><code class="name flex">
<span>def <span class="ident">on_open_click</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def on_open_click(self):
    sender = self.sender()
    code = sender.objectName().split(&#39;-&#39;)[0]
    # print(sender.objectName())
    if code == &#39;MV002&#39;:
        msg = QMessageBox()
        msg.setIcon(QMessageBox.Warning)
        msg.setWindowTitle(&#34;Vent valve warning&#34;)
        msg.setText(&#34;You are about to open the vent valve&#34;)
        msg.setInformativeText(&#34;Are you sure that you want to open the vent valve?&#34;)
        msg.setStandardButtons(QMessageBox.Ok | QMessageBox.Abort)
        
        retval = msg.exec_()
        if retval == QMessageBox.Ok:
            self.actionObservers({&#39;set_valve&#39;: [code, True]})   
        else:
            return
    else:
        self.actionObservers({&#39;set_valve&#39;: [code, True]})</code></pre>
</details>
</dd>
<dt id="egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.on_remote_status_change"><code class="name flex">
<span>def <span class="ident">on_remote_status_change</span></span>(<span>self, monitoring_info)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def on_remote_status_change(self, monitoring_info):
    if self.guiEnabled:
        for key, value in monitoring_info.items():
            code  = key.split(&#34;_&#34;)[-1]
            if self.remote[code] != value:
                if value:
                    if &#39;MV001&#39; in key:
                        if self.feedback[&#39;MV001-OPEN&#39;]:
                            child = self.findChild(QPushButton, f&#39;{code}-close&#39;)
                            child.setEnabled(True)
                        elif self.feedback[&#39;MV001-CLOSE&#39;]:
                            child = self.findChild(QPushButton, f&#39;{code}-open&#39;)
                            child.setEnabled(True)
                    else:
                        if self.feedback[code]:
                            child = self.findChild(QPushButton, f&#39;{code}-open&#39;)
                            child.setEnabled(True)
                        else:
                            child = self.findChild(QPushButton, f&#39;{code}-close&#39;)
                            child.setEnabled(True)
                else:
                    code  = key.split(&#34;_&#34;)[-1]
                    child = self.findChild(QPushButton, f&#39;{code}-open&#39;)
                    child.setEnabled(False)
                    child = self.findChild(QPushButton, f&#39;{code}-close&#39;)
                    child.setEnabled(False)
            self.remote[code] = value        </code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="egse.vacuum.beaglebone" href="index.html">egse.vacuum.beaglebone</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.main" href="#egse.vacuum.beaglebone.beaglebone_ui.main">main</a></code></li>
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.parse_arguments" href="#egse.vacuum.beaglebone.beaglebone_ui.parse_arguments">parse_arguments</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveControl" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveControl">ValveControl</a></code></h4>
</li>
<li>
<h4><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker">ValveMonitoringWorker</a></code></h4>
<ul class="">
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker.connect_socket" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker.connect_socket">connect_socket</a></code></li>
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker.run" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker.run">run</a></code></li>
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker.start_process" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker.start_process">start_process</a></code></li>
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker.stop" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker.stop">stop</a></code></li>
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker.valve_feedback_status_signal" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker.valve_feedback_status_signal">valve_feedback_status_signal</a></code></li>
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker.valve_remote_status_signal" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveMonitoringWorker.valve_remote_status_signal">valve_remote_status_signal</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIController" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIController">ValveUIController</a></code></h4>
<ul class="">
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIController.do" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIController.do">do</a></code></li>
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIController.update" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIController.update">update</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel">ValveUIModel</a></code></h4>
<ul class="two-column">
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.disconnect" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.disconnect">disconnect</a></code></li>
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.get_valve" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.get_valve">get_valve</a></code></li>
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.has_commands" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.has_commands">has_commands</a></code></li>
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.is_connected" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.is_connected">is_connected</a></code></li>
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.is_simulator" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.is_simulator">is_simulator</a></code></li>
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.load_commands" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.load_commands">load_commands</a></code></li>
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.reconnect" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.reconnect">reconnect</a></code></li>
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.set_valve" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIModel.set_valve">set_valve</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIView" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIView">ValveUIView</a></code></h4>
<ul class="">
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.closeEvent" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.closeEvent">closeEvent</a></code></li>
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.initUI" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.initUI">initUI</a></code></li>
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.on_close_click" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.on_close_click">on_close_click</a></code></li>
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.on_feedback_status_change" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.on_feedback_status_change">on_feedback_status_change</a></code></li>
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.on_lock_click" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.on_lock_click">on_lock_click</a></code></li>
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.on_open_click" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.on_open_click">on_open_click</a></code></li>
<li><code><a title="egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.on_remote_status_change" href="#egse.vacuum.beaglebone.beaglebone_ui.ValveUIView.on_remote_status_change">on_remote_status_change</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>