<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>egse.collimator.fcul.ogse_ui API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>egse.collimator.fcul.ogse_ui</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import logging
import multiprocessing
import os
from pathlib import Path

import sys
import threading
from typing import Optional
from typing import Tuple
from typing import Union

from PyQt5 import QtCore
from PyQt5.QtCore import QObject, QLockFile
from PyQt5.QtCore import QRunnable
from PyQt5.QtCore import QThreadPool
from PyQt5.QtCore import QTimer
from PyQt5.QtCore import pyqtSignal
from PyQt5.QtCore import pyqtSlot
from PyQt5.QtGui import QIcon
from PyQt5.QtWidgets import QAction
from PyQt5.QtWidgets import QApplication
from PyQt5.QtWidgets import QGridLayout
from PyQt5.QtWidgets import QGroupBox
from PyQt5.QtWidgets import QHBoxLayout
from PyQt5.QtWidgets import QLabel
from PyQt5.QtWidgets import QMainWindow
from PyQt5.QtWidgets import QMessageBox
from PyQt5.QtWidgets import QSizePolicy
from PyQt5.QtWidgets import QSlider
from PyQt5.QtWidgets import QStatusBar
from PyQt5.QtWidgets import QToolBar
from PyQt5.QtWidgets import QVBoxLayout
from PyQt5.QtWidgets import QWidget
from prometheus_client import start_http_server
from zmq import ZMQError

from egse.collimator.fcul.ogse import OGSEProxy
from egse.decorators import timer
from egse.gui import VLine
from egse.gui.buttons import BUTTON_SELECTED
from egse.gui.buttons import ToggleButton
from egse.gui.buttons import TouchButton
from egse.gui.led import Indic
from egse.gui.led import ShapeEnum
from egse.gui.states import States
from egse.help.help_ui import HELP_TOPICS
from egse.help.help_ui import HelpWindow
from egse.observer import Observable
from egse.observer import Observer
from egse.settings import Settings
from egse.state import UnknownStateError

multiprocessing.current_process().name = &#34;ogse_ui&#34;

from egse.process import ProcessStatus
from egse.resource import get_resource
from egse.system import do_every


MODULE_LOGGER = logging.getLogger(&#34;egse.collimator.fcul.ogse_ui&#34;)

GUI_SETTINGS = Settings.load(&#34;OGSE GUI&#34;)

TITLE_FONT_SIZE = 18


class ConfirmationBox(QMessageBox):
    def __init__(self, text: str, title=None, parent=None):
        super().__init__(parent)
        self.setWindowTitle(title)
        self.setText(text)
        self.setStandardButtons(QMessageBox.Yes | QMessageBox.No)


class OGSETUIView:
    ...


STATES = [
    [&#34;Interlock&#34;, Indic.BLACK],
    [&#34;Power&#34;, Indic.BLACK],
    [&#34;Laser&#34;, Indic.BLACK],
    [&#34;Lamp&#34;, Indic.BLACK],
    [&#34;PSU&#34;, Indic.BLACK],
    [&#34;LDLS&#34;, Indic.GREEN],
    [&#34;FW moving&#34;, Indic.BLACK],
]

FAULTS = [
    [&#34;Lamp Fault&#34;, Indic.GREEN],
    [&#34;Controller Fault&#34;, Indic.GREEN],
]


class StatusWidget(QWidget):
    def __init__(self):
        super().__init__()

        vbox = QVBoxLayout()

        self.title = QLabel(&#34;Status&#34;)
        font = self.title.font()
        font.setPointSize(TITLE_FONT_SIZE)
        font.setBold(True)
        self.title.setFont(font)

        self.states = States(STATES, shape=ShapeEnum.SQUARE, title=None)

        vbox.addWidget(self.title, alignment=QtCore.Qt.AlignHCenter)
        vbox.addWidget(self.states)

        self.setLayout(vbox)


class FaultsWidget(QWidget):
    def __init__(self):
        super().__init__()

        vbox = QVBoxLayout()

        self.title = QLabel(&#34;Fault Detection&#34;)
        font = self.title.font()
        font.setPointSize(TITLE_FONT_SIZE)
        font.setBold(True)
        self.title.setFont(font)

        self.states = States(FAULTS, shape=ShapeEnum.SQUARE, title=None)

        vbox.addWidget(self.title, alignment=QtCore.Qt.AlignHCenter)
        vbox.addWidget(self.states)

        self.setLayout(vbox)


class AttenuationWidget(QWidget):
    def __init__(self):
        super().__init__()

        vbox = QVBoxLayout()

        self.title = QLabel(&#34;Attenuation Values&#34;)
        font = self.title.font()
        font.setPointSize(TITLE_FONT_SIZE)
        font.setBold(True)
        self.title.setFont(font)

        vbox.addWidget(self.title, alignment=QtCore.Qt.AlignHCenter)

        hbox = QHBoxLayout()
        hbox.setContentsMargins(0, 20, 0, 0)

        labels_vbox = QVBoxLayout()
        labels_vbox.addWidget(QLabel(&#34;Index:&#34;))
        labels_vbox.addWidget(QLabel(&#34;Factor:&#34;))
        hbox.addLayout(labels_vbox)

        self.index = QLabel()
        self.factor = QLabel()

        values_vbox = QVBoxLayout()
        values_vbox.addWidget(self.index, alignment=QtCore.Qt.AlignRight)
        values_vbox.addWidget(self.factor, alignment=QtCore.Qt.AlignRight)
        hbox.addLayout(values_vbox)

        vbox.addLayout(hbox)

        self.setLayout(vbox)


class PowerMeterWidget(QWidget):
    def __init__(self):
        super().__init__()

        vbox = QVBoxLayout()

        self.title = QLabel(&#34;Power Meter&#34;)
        font = self.title.font()
        font.setPointSize(TITLE_FONT_SIZE)
        font.setBold(True)
        self.title.setFont(font)

        vbox.addWidget(self.title, alignment=QtCore.Qt.AlignHCenter)

        vbox_labels = QVBoxLayout()
        vbox_values_1 = QVBoxLayout()
        vbox_units_1 = QVBoxLayout()
        vbox_values_2 = QVBoxLayout()
        vbox_units_2 = QVBoxLayout()

        hbox = QHBoxLayout()

        self.power_meter_info = [
            [QLabel(&#34;PM1&#34;), QLabel(), QLabel(&#34;Watt&#34;), QLabel(), QLabel(&#34;ºC&#34;)],
            [QLabel(&#34;PM2&#34;), QLabel(), QLabel(&#34;Watt&#34;), QLabel(), QLabel(&#34;ºC&#34;)],
        ]

        for pw in self.power_meter_info:
            vbox_labels.addWidget(pw[0])

            vbox_values_1.addWidget(pw[1])
            pw[1].setStyleSheet(&#34;QLabel { background-color : White; }&#34;)
            pw[1].setAlignment(QtCore.Qt.AlignRight | QtCore.Qt.AlignVCenter)
            pw[1].setMinimumWidth(80)

            vbox_units_1.addWidget(pw[2])

            vbox_values_2.addWidget(pw[3])
            pw[3].setStyleSheet(&#34;QLabel { background-color : White; }&#34;)
            pw[3].setAlignment(QtCore.Qt.AlignRight | QtCore.Qt.AlignVCenter)
            pw[3].setMinimumWidth(80)

            vbox_units_2.addWidget(pw[4])

        # Make sure the labels stay nicely together when vertically resizing the Frame.
        for w in vbox_labels, vbox_values_1, vbox_units_1, vbox_values_2, vbox_units_2:
            w.addStretch(1)

        hbox.addLayout(vbox_labels)
        hbox.addLayout(vbox_values_1)
        hbox.addLayout(vbox_units_1)
        hbox.addLayout(vbox_values_2)
        hbox.addLayout(vbox_units_2)

        # Make sure the leds and labels stay nicely together when horizontally resizing the Frame.
        hbox.addStretch(1)

        gbox = QGroupBox(self)
        gbox.setLayout(hbox)

        vbox.addWidget(gbox)
        self.setLayout(vbox)

    @property
    def power_1(self) -&gt; str:
        return self.power_meter_info[0][1].text()

    @power_1.setter
    def power_1(self, value: str):
        self.power_meter_info[0][1].setText(value)

    @property
    def power_2(self) -&gt; str:
        return self.power_meter_info[1][1].text()

    @power_2.setter
    def power_2(self, value: str):
        self.power_meter_info[1][1].setText(value)

    @property
    def temp_1(self) -&gt; str:
        return self.power_meter_info[0][3].text()

    @temp_1.setter
    def temp_1(self, value: str):
        self.power_meter_info[0][3].setText(value)

    @property
    def temp_2(self) -&gt; str:
        return self.power_meter_info[1][3].text()

    @temp_2.setter
    def temp_2(self, value: str):
        self.power_meter_info[1][3].setText(value)


class CommandWidget(QWidget):
    def __init__(self, *, observable):
        super().__init__()
        self.observable = observable

        power_label = QLabel(&#34;Power&#34;)
        operate_label = QLabel(&#34;Operate&#34;)
        att_label = QLabel(&#34;Attenuation&#34;)

        self.cmd_power = ToggleButton(
            name=&#34;POWER-ON-OFF&#34;,
            width=50, height=25,
            status_tip=&#34;Power ON or OFF&#34;,
            selected=get_resource(&#34;:/icons/switch-on-square.svg&#34;),
            not_selected=get_resource(&#34;:/icons/switch-off-square.svg&#34;),
            disabled=get_resource(&#34;:/icons/switch-disabled-square.svg&#34;),
        )
        # To avoid repainting the on-off button, we monkey patch the mouseReleaseEvent to a function
        # that does nothing, not even calling its super() method.
        self.cmd_power.mouseReleaseEvent = lambda x: None
        # We want to use the pressed signal here instead of the clicked to avoid repainting the
        # button before the confirmation is asked (see self.on_press)
        self.cmd_power.pressed.connect(self.on_press)

        self.cmd_operate = ToggleButton(
            name=&#34;OPERATE-ON-OFF&#34;,
            width=50, height=25,
            status_tip=&#34;Operate ON or OFF&#34;,
            selected=get_resource(&#34;:/icons/switch-on-square.svg&#34;),
            not_selected=get_resource(&#34;:/icons/switch-off-square.svg&#34;),
            disabled=get_resource(&#34;:/icons/switch-disabled-square.svg&#34;),
        )
        self.cmd_operate.clicked.connect(self.on_click)

        self.att_go_button = TouchButton(
            name=&#34;ATTENUATION-GO&#34;,
            width=25, height=25,
            status_tip=&#34;Set the selected attenuation index&#34;,
            selected=get_resource(&#34;:/icons/small-buttons-go.svg&#34;)
        )
        self.att_go_button.clicked.connect(self.on_click)

        self.att_plus_button = TouchButton(
            name=&#34;ATTENUATION-PLUS&#34;,
            width=15, height=15,
            status_tip=&#34;Increase the selected attenuation index&#34;,
            selected=get_resource(&#34;:/icons/small-buttons-plus.svg&#34;)
        )
        self.att_plus_button.clicked.connect(self.on_click)

        self.att_minus_button = TouchButton(
            name=&#34;ATTENUATION-MINUS&#34;,
            width=15, height=15,
            status_tip=&#34;Decrease the selected attenuation index&#34;,
            selected=get_resource(&#34;:/icons/small-buttons-minus.svg&#34;)
        )
        self.att_minus_button.clicked.connect(self.on_click)

        self.att_index_slider = QSlider(QtCore.Qt.Horizontal)
        self.att_index_slider.setMinimum(0)
        self.att_index_slider.setMaximum(46)
        self.att_index_slider.setSingleStep(1)
        self.att_index_slider.setMinimumWidth(47*2)

        # sliderMoved is needed for updating the label
        self.att_index_slider.valueChanged.connect(self.slider_value_changed)
        # sliderReleased is used for
        self.att_index_slider.sliderReleased.connect(self.slider_released)

        self.att_index_slider_position = QLabel()
        self.att_index_slider_position.setMinimumWidth(20)

        layout = QVBoxLayout()

        self.title = QLabel(&#34;Commanding&#34;)
        font = self.title.font()
        font.setPointSize(TITLE_FONT_SIZE)
        font.setBold(True)
        self.title.setFont(font)

        layout.addWidget(self.title, alignment=QtCore.Qt.AlignHCenter)

        hbox = QHBoxLayout()
        hbox.addWidget(power_label)
        hbox.addWidget(self.cmd_power)
        layout.addLayout(hbox)

        hbox = QHBoxLayout()
        hbox.addWidget(operate_label)
        hbox.addWidget(self.cmd_operate)
        layout.addLayout(hbox)

        hbox = QHBoxLayout()
        hbox.addWidget(att_label)
        hbox.addWidget(self.att_minus_button)
        hbox.addWidget(self.att_index_slider)
        hbox.addWidget(self.att_plus_button)
        hbox.addWidget(self.att_index_slider_position)
        hbox.addWidget(self.att_go_button)
        hbox.setContentsMargins(0, 0, 0, 0)
        layout.addLayout(hbox)

        layout.addStretch()

        hbox = QHBoxLayout()
        hbox.addLayout(layout)
        hbox.addStretch()

        self.setLayout(hbox)

    def disable_commanding(self):
        self.cmd_operate.disable()

    def enable_commanding(self):
        self.cmd_operate.enable()

    def on_click(self, icon: Union[QIcon, bool]):
        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.on_click()&#34;)

        sender = self.sender()

        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__} {sender=!s}&#34;)

        # MODULE_LOGGER.info(f&#34;type(sender) = {type(sender)}&#34;)
        # MODULE_LOGGER.info(f&#34;sender.text() = {sender.text()}&#34;)
        # MODULE_LOGGER.info(f&#34;sender.isCheckable() = {sender.isCheckable()}&#34;)
        # MODULE_LOGGER.info(f&#34;sender.isChecked() = {sender.isChecked()}&#34;)
        # MODULE_LOGGER.info(f&#34;{type(icon) = }, {icon = }&#34;)

        # This will trigger the update() method on all the observers

        self.observable.notifyObservers(sender)

    def slider_moved(self, pos):
        self.att_index_slider_position.setText(str(pos))
        # MODULE_LOGGER.info(f&#34;slider_moved: {pos = }&#34;)

    def slider_pressed(self):
        pos = self.att_index_slider_position.text()
        # MODULE_LOGGER.info(f&#34;slider_pressed: {pos = }&#34;)

    def slider_released(self):
        pos = self.att_index_slider_position.text()
        # MODULE_LOGGER.info(f&#34;slider_released: {pos = }&#34;)

    def slider_value_changed(self, pos):
        self.att_index_slider_position.setText(str(pos))
        # MODULE_LOGGER.info(f&#34;slider_value_changed: {pos = }&#34;)

    def on_press(self):
        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.on_press()&#34;)

        sender = self.sender()

        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__} {sender=!s}&#34;)

        if sender.is_selected():
            response = QMessageBox.question(
                self,
                &#34;Confirmation Required&#34;,
                &#34;Are you sure to power OFF the OGSE?&#34;,
            )
            if response == QMessageBox.Yes:
                self.cmd_power.set_selected(False)
                self.observable.notifyObservers(sender)
        else:
            self.cmd_power.set_selected(True)
            self.observable.notifyObservers(sender)


class OGSEGUIView(QMainWindow, Observable):
    def __init__(self):
        super().__init__()

        self.status_puller = None
        self.threadpool = QThreadPool()

        self.cs_connection: ToggleButton = ...
        self.device_connection: ToggleButton = ...
        self.help_action: QAction = ...
        self.toolbar: QToolBar = ...
        self.on_off_button: ToggleButton = ...

        self.setWindowTitle(&#34;OGSE Controller GUI&#34;)
        self.setGeometry(300, 300, 600, 300)

        # The mode_label describes the current mode in which the controller is running.
        # The mode can be Proxy, Simulator, Direct

        self.mode_label = QLabel(&#34;&#34;)

        self.create_toolbar()
        self.create_status_bar()

        self.status = StatusWidget()
        self.power_meter = PowerMeterWidget()
        self.faults = FaultsWidget()
        self.commanding = CommandWidget(observable=self)
        self.attenuation = AttenuationWidget()

        layout = QHBoxLayout()
        #
        # vbox_layout = QVBoxLayout()
        # vbox_layout.addWidget(self.power_meter)
        # vbox_layout.addWidget(self.commanding)
        # vbox_layout.addStretch()
        #
        layout.addWidget(self.status, alignment=QtCore.Qt.AlignTop)
        # layout.addLayout(vbox_layout)
        # layout.addWidget(self.faults, alignment=QtCore.Qt.AlignTop)

        grid_layout = QGridLayout()
        grid_layout.setSpacing(0)

        grid_layout.addWidget(self.power_meter, 0, 0, alignment=QtCore.Qt.AlignTop)
        grid_layout.addWidget(self.attenuation, 0, 1, alignment=QtCore.Qt.AlignTop)
        grid_layout.addWidget(self.faults, 1, 0, alignment=QtCore.Qt.AlignTop)
        grid_layout.addWidget(self.commanding, 1, 1, alignment=QtCore.Qt.AlignTop)

        layout.addLayout(grid_layout)

        widget = QWidget()
        widget.setLayout(layout)

        self.setCentralWidget(widget)

    def closeEvent(self, event):
        MODULE_LOGGER.info(&#34;Window closed, quiting....&#34;)
        self.status_puller.quit()
        event.accept()

        all_threads_finished = self.threadpool.waitForDone(msecs=2000)
        if not all_threads_finished:
            MODULE_LOGGER.warning(&#34;Not all threads were finished before the OGSE GUI terminated.&#34;)

    def start_pulling_status(self):
        self.status_puller = worker = StatusPuller(OGSEUIModel())
        self.threadpool.start(worker)
        worker.signals.states.connect(self.worker_states)
        worker.signals.faults.connect(self.worker_faults)
        worker.signals.att.connect(self.worker_att)
        worker.signals.dev.connect(self.worker_dev)
        worker.signals.pm.connect(self.worker_pm)

    @pyqtSlot(list)
    def worker_states(self, states):
        self.status.states.set_states(states)

    @pyqtSlot(list)
    def worker_faults(self, faults):
        self.faults.states.set_states(faults)

    @pyqtSlot(list)
    def worker_att(self, att):
        self.attenuation.index.setText( str(att[0]))
        self.attenuation.factor.setText(str(att[1]))

    @pyqtSlot(bool)
    def worker_dev(self, dev):
        self.device_connection.set_selected(dev)

    @pyqtSlot(dict)
    def worker_pm(self, pm):
        self.power_meter.power_1 = f&#34;{pm[&#39;power1&#39;]:.4e}&#34;
        self.power_meter.power_2 = f&#34;{pm[&#39;power2&#39;]:.4e}&#34;
        self.power_meter.temp_1 = f&#34;{pm[&#39;temp1&#39;]:5.2f}&#34;
        self.power_meter.temp_2 = f&#34;{pm[&#39;temp2&#39;]:5.2f}&#34;

    def on_click(self, icon: Union[QIcon, bool]):
        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.on_click()&#34;)

        sender = self.sender()

        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__} {sender=!s}&#34;)

        # MODULE_LOGGER.info(f&#34;type(sender) = {type(sender)}&#34;)
        # MODULE_LOGGER.info(f&#34;sender.text() = {sender.text()}&#34;)
        # MODULE_LOGGER.info(f&#34;sender.isCheckable() = {sender.isCheckable()}&#34;)
        # MODULE_LOGGER.info(f&#34;sender.isChecked() = {sender.isChecked()}&#34;)
        # MODULE_LOGGER.info(f&#34;type(icon) = {type(icon)}&#34;)

        # This will trigger the update() method on all the observers

        self.notifyObservers(sender)

    def on_press(self):
        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.on_press()&#34;)

        sender: ToggleButton = self.sender()

        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__} {sender=!s}&#34;)

        if sender.is_selected():
            response = QMessageBox.question(
                self,
                &#34;Confirmation Required&#34;,
                &#34;Are you sure to switch OFF the OGSE?&#34;,
            )
            if response == QMessageBox.Yes:
                self.on_off_button.set_selected(False)
                self.notifyObservers(sender)
        else:
            self.on_off_button.set_selected(True)
            self.notifyObservers(sender)

    def is_cs_action_enabled(self):
        return self.cs_connection.isEnabled()

    def disable_cs_action(self):
        self.cs_connection.disable()

    def enable_cs_action(self):
        self.cs_connection.enable()

    def check_cs_action(self):
        self.cs_connection.set_selected()

    def uncheck_cs_action(self):
        self.cs_connection.set_selected(False)

    def check_device_action(self):
        self.device_connection.set_selected()

    def uncheck_device_action(self):
        self.device_connection.set_selected(False)

    def create_status_bar(self):

        self.statusBar().setStyleSheet(&#34;border: 0; background-color: #FFF8DC;&#34;)
        self.statusBar().setStyleSheet(&#34;QStatusBar::item {border: none;}&#34;)
        self.statusBar().addPermanentWidget(VLine())
        self.statusBar().addPermanentWidget(self.mode_label)

    def create_toolbar(self):

        # The Reconnect action is used to reconnect to the control server

        self.cs_connection = ToggleButton(
            name=&#34;CS-CONNECT&#34;,
            status_tip=&#34;connect-disconnect the OGSE control server&#34;,
            selected=get_resource(&#34;:/icons/cs-connected.svg&#34;),
            not_selected=get_resource(&#34;:/icons/cs-not-connected.svg&#34;),
            disabled=get_resource(&#34;:/icons/cs-connected-disabled.svg&#34;)
        )
        self.cs_connection.clicked.connect(self.on_click)

        # The Reconnect action is used to reconnect the device

        self.device_connection = ToggleButton(
            name=&#34;DEVICE-CONNECT&#34;,
            status_tip=&#34;connect-disconnect the OGSE device controller&#34;,
            selected=get_resource(&#34;:/icons/plugged.svg&#34;),
            not_selected=get_resource(&#34;:/icons/unplugged.svg&#34;),
            disabled=get_resource(&#34;:/icons/plugged-disabled.svg&#34;)
        )
        self.device_connection.clicked.connect(self.on_click)

        # The HELP button is used to show the on-line help in a browser window

        help_button = QIcon(str(get_resource(&#34;:/icons/info.svg&#34;)))

        self.help_action = QAction(help_button, &#34;INFO&#34;, self)
        self.help_action.setToolTip(&#34;Browse the on-line documentation&#34;)
        self.help_action.triggered.connect(self.on_click)

        # spacer widget to help with aligning STOP button to the right

        spacer = QWidget()
        spacer.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Expanding)

        self.toolbar = self.addToolBar(&#34;MainToolbar&#34;)
        self.toolbar.addWidget(self.device_connection)
        self.toolbar.addWidget(self.cs_connection)
        self.toolbar.addWidget(spacer)
        self.toolbar.addAction(self.help_action)

        return self.toolbar

    def set_connection_state(self, state):
        # enable or disable all actions that involve a device or cs connection
        # don&#39;t change the action buttons for the device nor the cs, that is handled
        # in the caller because it might be a device connection loss that causes this state
        # or a control server, or both...

        # MODULE_LOGGER.info(f&#34;{state=}&#34;)

        if state == &#34;connected&#34;:
            self.commanding.enable_commanding()
        elif state == &#34;disconnected&#34;:
            self.commanding.disable_commanding()
        else:
            raise UnknownStateError(
                f&#34;Unknown State ({state}), expected &#39;connected&#39; or &#39;disconnected&#39;.&#34;
            )

    def update_status_bar(self, message=None, mode=None, timeout=2000):
        if message:
            self.statusBar().showMessage(message, msecs=timeout)
        if mode:
            self.mode_label.setStyleSheet(
                f&#34;border: 0; &#34; f&#34;color: {&#39;red&#39; if &#39;Simulator&#39; in mode else &#39;black&#39;};&#34;
            )
            self.mode_label.setText(f&#34;mode: {mode}&#34;)
        self.statusBar().repaint()



class OGSEUIModel:
    def __init__(self):

        self.device = OGSEProxy()

    def reconnect_device(self):
        self.device.reconnect()
        return self.device.is_connected()

    def reconnect_cs(self):
        self.device.reconnect_cs()
        return self.device.is_cs_connected()

    def disconnect(self):
        self.device.disconnect()

    def disconnect_cs(self):
        try:
            self.device.disconnect_cs()
        except ZMQError as exc:
            MODULE_LOGGER.error(f&#34;{exc=}&#34;)

    def is_cs_connected(self):
        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.is_cs_connected()&#34;)
        return self.device.is_cs_connected()

    def is_device_connected(self):
        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.is_device_connected()&#34;)
        response = self.device.is_connected()
        # MODULE_LOGGER.info(f&#34;{self.__class__.__name__}.device.is_connected() = {response}&#34;)
        return response if response is not None else False

    def is_simulator(self):
        return &#34;sim&#34; in self.device.version()

    def power_on(self):
        MODULE_LOGGER.debug(f&#34;in {self.__class__.__name__}.power_on()&#34;)
        self.device.power_on()

    def power_off(self):
        MODULE_LOGGER.debug(f&#34;in {self.__class__.__name__}.power_off()&#34;)
        self.device.power_off()

    def operate_on(self):
        MODULE_LOGGER.debug(f&#34;in {self.__class__.__name__}.operate_on()&#34;)
        self.device.operate_on()

    def operate_off(self):
        MODULE_LOGGER.debug(f&#34;in {self.__class__.__name__}.operate_off()&#34;)
        self.device.operate_off()

    def set_att_level(
            self,
            index: Optional[int] = None,
            factor: Optional[float] = None,
            position: Optional[Tuple[int, int]] = None,
    ):
        MODULE_LOGGER.debug(f&#34;in {self.__class__.__name__}.set_att_level({index=}, &#34;
                           f&#34;{factor=}, {position=})&#34;)
        if index and factor and position:
            raise ValueError(f&#34;Only one of the keyword arguments can be provided, {index=}, &#34;
                             f&#34;{factor=}, {position=}&#34;)
        if index:
            self.device.att_set_level_index(index)
        if factor:
            self.device.att_set_level_factor(factor)
        if position:
            self.device.att_set_level_factor(factor)

    def get_interlock(self) -&gt; bool:
        interlock = self.device.get_interlock()
        return &#34;ON&#34; in interlock

    def get_power(self) -&gt; bool:
        power = self.device.get_power()
        return &#34;ON&#34; in power

    def get_operate(self) -&gt; bool:
        operate = self.device.get_operate()
        return &#34;ON&#34; in operate

    def get_laser(self) -&gt; bool:
        laser = self.device.get_laser()
        return &#34;ON&#34; in laser

    def get_ldls_status(self):
        ldls = self.device.ldls_status()
        return &#34;OK&#34; in ldls

    def status(self) -&gt; dict:
        &#34;&#34;&#34;
        Returns a dictionary with the following keys:

            &#39;power&#39;, &#39;lamp&#39;, &#39;interlock&#39;, &#39;psu&#39;, &#39;att_moving&#39;, &#39;att_factor&#39;,
            &#39;att_index&#39;, &#39;power1&#39;, &#39;temp1&#39;, &#39;power2&#39;, &#39;temp2&#39;
        &#34;&#34;&#34;
        return self.device.status()

    def pm_power_1(self) -&gt; float:
        status = self.device.status()
        return status[&#34;power1&#34;]

    def pm_power_2(self) -&gt; float:
        status = self.device.status()
        return status[&#34;power2&#34;]

    def pm_temperature_1(self) -&gt; float:
        status = self.device.status()
        return status[&#34;temp1&#34;]

    def pm_temperature_2(self) -&gt; float:
        status = self.device.status()
        return status[&#34;temp2&#34;]

    def get_lamp_fault(self):
        fault = self.device.get_lamp_fault()

        # get_lamp_fault response contains &#39;NO-ERROR&#39; if all good, and &#39;ERROR&#39; if there
        # was an error. The model will return True if there is a fault detected!

        return &#34;NO-ERROR&#34; not in fault

    def get_controller_fault(self):
        fault = self.device.get_controller_fault()

        # get_controller_fault response contains &#39;NO-ERROR&#39; if all good, and &#39;ERROR&#39; if there
        # was an error. The model will return True if there is a fault detected!

        return &#34;NO-ERROR&#34; not in fault

    def set_attenuation_index(self, index):
        # MODULE_LOGGER.info(f&#34;set_attenuation_index to {index} ({type(index)=})&#34;)
        self.device.att_set_level_index(int(index))


class StatusSignals(QObject):
    states = pyqtSignal(list)
    faults = pyqtSignal(list)
    att = pyqtSignal(list)
    dev = pyqtSignal(bool)
    pm = pyqtSignal(dict)


class StatusPuller(QRunnable):
    def __init__(self, model: OGSEUIModel):
        super().__init__()
        self.signals = StatusSignals()
        self.model = model
        self.quit_request = False

    @pyqtSlot()
    def run(self):
        while not self.quit_request:

            self.signals.dev.emit(self.model.is_device_connected())

            # Set all the status LEDs

            status = self.model.status()
            states = [
                Indic.GREEN if &#39;ON&#39; in status[&#34;interlock&#34;] else Indic.BLACK,
                Indic.GREEN if &#39;ON&#39; in status[&#34;power&#34;] else Indic.BLACK,
                Indic.GREEN if self.model.get_laser() else Indic.BLACK,
                Indic.GREEN if &#39;ON&#39; in status[&#34;lamp&#34;] else Indic.BLACK,
                Indic.GREEN if &#39;ON&#39; in status[&#34;psu&#34;] else Indic.BLACK,
                Indic.GREEN if self.model.get_ldls_status() else Indic.BLACK,
                Indic.ORANGE if status[&#34;att_moving&#34;] else Indic.BLACK,
            ]
            self.signals.states.emit(states)

            self.signals.pm.emit(
                {
                    &#34;power1&#34;: status[&#39;power1&#39;],
                    &#34;power2&#34;: status[&#39;power2&#39;],
                    &#34;temp1&#34;: status[&#39;temp1&#39;],
                    &#34;temp2&#34;: status[&#39;temp2&#39;],
                })

            # Set the fault detection on the lamp and controller

            faults = [
                Indic.RED if self.model.get_lamp_fault() else Indic.GREEN,
                Indic.RED if self.model.get_controller_fault() else Indic.GREEN,
            ]
            self.signals.faults.emit(faults)

            self.signals.att.emit([status[&#34;att_index&#34;], status[&#34;att_factor&#34;]])

    def quit(self):
        self.quit_request = True


class OGSEUIController(Observer):
    def __init__(self, model: OGSEUIModel, view: Union[OGSEGUIView, OGSETUIView]):
        super().__init__()

        self.model = model
        self.view = view

        self.view.addObserver(self)

        self.help_window = HelpWindow(topic_url=HELP_TOPICS[&#34;ogse_ui&#34;])

        self.states_capture_timer_interval = 1000  # [ms]
        self.create_timer()

        if self.model.is_cs_connected():
            mode = f&#34;Proxy{&#39; [Simulator]&#39; if self.model.is_simulator() else &#39;&#39;}&#34;
            self.view.update_status_bar(mode=mode)
            self.view.check_cs_action()
        else:
            self.view.uncheck_cs_action()
            # if the control server is not connected, we should not check for the other connection
            # status but just uncheck actions and return
            self.view.uncheck_device_action()
            self.view.set_connection_state(&#34;disconnected&#34;)
            self.stop_timer()
            return

        if self.model.is_device_connected():
            self.view.check_device_action()
        else:
            self.view.uncheck_device_action()

        if self.has_connection():
            self.view.set_connection_state(&#34;connected&#34;)
            self.start_timer()
        else:
            self.view.set_connection_state(&#34;disconnected&#34;)
            self.stop_timer()

        self.view.start_pulling_status()

    def has_connection(self):
        &#34;&#34;&#34;
        Returns True if the controller has a connection to the device. This takes into account
        that the control server might be disabled when the controller is directly connected to
        the device or to a simulator.
        &#34;&#34;&#34;
        if self.view.is_cs_action_enabled():
            return bool(self.model.is_device_connected() and self.model.is_cs_connected())
        else:
            return bool(self.model.is_device_connected())

    def create_timer(self):
        &#34;&#34;&#34;Create a Timer that will update the States every second.&#34;&#34;&#34;

        self.states_capture_timer = QTimer()
        self.states_capture_timer.timeout.connect(self.update_state)
        self.states_capture_timer.setInterval(self.states_capture_timer_interval)

    def start_timer(self):
        self.states_capture_timer.start()

    def stop_timer(self):
        self.states_capture_timer.stop()

    def do(self, actions):
        # This method is part of the Observer protocol and will be called when there is an
        # action requested by the Observable.

        for action, value in actions.items():
            ...

    def update(self, changed_object):
        # This method is part of the Observer protocol and will be called when there is a
        # notification of a change in the Observable.

        text = changed_object.text()
        # MODULE_LOGGER.debug(f&#34;in {self.__class__.__name__}.update({type(changed_object)}), text=\&#34;{text}\&#34;&#34;)

        if text == &#34;INFO&#34;:
            self.help_window.show()

        if text == &#34;POWER-ON-OFF&#34;:
            obj: ToggleButton = changed_object
            if obj.state == BUTTON_SELECTED:
                self.model.power_on()
                # Should we also execute `operate_on()` or leave that to the user by pressing
                # the button in the GUI?
                self.view.commanding.cmd_operate.enable()
            else:
                self.model.operate_off()
                self.model.power_off()
                self.view.commanding.cmd_operate.disable()

        if text == &#34;OPERATE-ON-OFF&#34;:
            if changed_object.is_selected():
                self.model.operate_on()
            else:
                self.model.operate_off()

        if text == &#34;ATTENUATION-GO&#34;:
            position = self.view.commanding.att_index_slider_position.text()
            self.model.set_attenuation_index(position)

        if text == &#34;ATTENUATION-PLUS&#34;:
            position = min(self.view.commanding.att_index_slider.value() + 1, 46)
            self.view.commanding.att_index_slider_position.setText(str(position))
            self.view.commanding.att_index_slider.setSliderPosition(position)

        if text == &#34;ATTENUATION-MINUS&#34;:
            position = max(self.view.commanding.att_index_slider.value() - 1, 0)
            self.view.commanding.att_index_slider_position.setText(str(position))
            self.view.commanding.att_index_slider.setSliderPosition(position)

        if text == &#34;CS-CONNECT&#34;:
            if changed_object.is_selected():
                MODULE_LOGGER.debug(&#34;Reconnecting the OGSE Control Server.&#34;)
                self.model.reconnect_cs()
                # if not self.model.has_commands():
                #     self.model.load_commands()
                self.start_timer()
                if self.model.is_device_connected() and self.model.is_cs_connected():
                    self.view.set_connection_state(&#34;connected&#34;)
                    self.view.device_connection.enable()
            else:
                MODULE_LOGGER.debug(&#34;Disconnecting the OGSE Control Server.&#34;)
                self.stop_timer()
                self.model.disconnect_cs()
                self.view.device_connection.disable()
                self.view.set_connection_state(&#34;disconnected&#34;)
            return

        if text == &#34;DEVICE-CONNECT&#34;:
            if changed_object.is_selected():
                MODULE_LOGGER.debug(&#34;Reconnecting the OGSE device controller.&#34;)
                if self.model.reconnect_device():
                    self.view.set_connection_state(&#34;connected&#34;)
                    # if not self.model.has_commands():
                    #     self.model.load_commands()
                    self.start_timer()
                else:
                    self.view.device_connection.set_selected(False)
            else:
                MODULE_LOGGER.debug(&#34;Disconnecting the OGSE device Controller.&#34;)
                self.stop_timer()
                self.model.disconnect()
                self.view.set_connection_state(&#34;disconnected&#34;)
            return

    def update_state(self):
        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.update_state()&#34;)
        # MODULE_LOGGER.info(&#34;Disabled update_state() from OGSEUIController&#34;)
        # return

        self.view.device_connection.set_selected(self.model.is_device_connected())

        m = self.model

        # Set all the status LEDs

        status = m.status()
        states = [
            Indic.GREEN if &#39;ON&#39; in status[&#34;interlock&#34;] else Indic.BLACK,
            Indic.GREEN if &#39;ON&#39; in status[&#34;power&#34;] else Indic.BLACK,
            Indic.GREEN if m.get_laser() else Indic.BLACK,
            Indic.GREEN if &#39;ON&#39; in status[&#34;lamp&#34;] else Indic.BLACK,
            Indic.GREEN if &#39;ON&#39; in status[&#34;psu&#34;] else Indic.BLACK,
            Indic.GREEN if m.get_ldls_status() else Indic.BLACK,
            Indic.ORANGE if status[&#34;att_moving&#34;] else Indic.BLACK,
        ]
        self.view.status.states.set_states(states)

        # Set the value of the power meter

        self.view.power_meter.power_1 = f&#34;{status[&#39;power1&#39;]:.4e}&#34;
        self.view.power_meter.power_2 = f&#34;{status[&#39;power2&#39;]:.4e}&#34;
        self.view.power_meter.temp_1 = f&#34;{status[&#39;temp1&#39;]:5.2f}&#34;
        self.view.power_meter.temp_2 = f&#34;{status[&#39;temp2&#39;]:5.2f}&#34;

        # Set the fault detection on the lamp and controller

        states = [
            Indic.RED if m.get_lamp_fault() else Indic.GREEN,
            Indic.RED if m.get_controller_fault() else Indic.GREEN,
        ]
        self.view.faults.states.set_states(states)

        if m.get_operate():
            self.view.commanding.cmd_operate.set_selected(True)
        else:
            self.view.commanding.cmd_operate.set_selected(False)

        if &#39;ON&#39; in status[&#34;power&#34;]:
            self.view.commanding.cmd_power.set_selected(True)
            self.view.commanding.enable_commanding()
        else:
            self.view.commanding.cmd_power.set_selected(False)
            self.view.commanding.disable_commanding()

        self.view.attenuation.index.setText( str(status[&#34;att_index&#34;]))
        self.view.attenuation.factor.setText(str(status[&#34;att_factor&#34;]))


def main():
    lock_file = QLockFile(str(Path(&#34;~/ogse_ui.app.lock&#34;).expanduser()))

    app_logo = get_resource(&#34;:/icons/logo-ogse.svg&#34;)
    app = QApplication(sys.argv)
    app.setWindowIcon(QIcon(str(app_logo)))

    if lock_file.tryLock(100):

        process_status = ProcessStatus()

        timer_thread = threading.Thread(target=do_every, args=(10, process_status.update))
        timer_thread.daemon = True
        timer_thread.start()

        start_http_server(GUI_SETTINGS.METRICS_PORT)

        os.environ[&#34;QT_ENABLE_HIGHDPI_SCALING&#34;] = &#34;1&#34;
        QApplication.setHighDpiScaleFactorRoundingPolicy(
            QtCore.Qt.HighDpiScaleFactorRoundingPolicy.PassThrough)

        view = OGSEGUIView()
        model = OGSEUIModel()
        OGSEUIController(model, view)

        view.show()

        return app.exec_()
    else:
        error_message = QMessageBox()
        error_message.setIcon(QMessageBox.Warning)
        error_message.setWindowTitle(&#34;Error&#34;)
        error_message.setText(&#34;The OGSE GUI application is already running!&#34;)
        error_message.setStandardButtons(QMessageBox.Ok)

        return error_message.exec()


if __name__ == &#39;__main__&#39;:

    sys.exit(main())</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="egse.collimator.fcul.ogse_ui.main"><code class="name flex">
<span>def <span class="ident">main</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def main():
    lock_file = QLockFile(str(Path(&#34;~/ogse_ui.app.lock&#34;).expanduser()))

    app_logo = get_resource(&#34;:/icons/logo-ogse.svg&#34;)
    app = QApplication(sys.argv)
    app.setWindowIcon(QIcon(str(app_logo)))

    if lock_file.tryLock(100):

        process_status = ProcessStatus()

        timer_thread = threading.Thread(target=do_every, args=(10, process_status.update))
        timer_thread.daemon = True
        timer_thread.start()

        start_http_server(GUI_SETTINGS.METRICS_PORT)

        os.environ[&#34;QT_ENABLE_HIGHDPI_SCALING&#34;] = &#34;1&#34;
        QApplication.setHighDpiScaleFactorRoundingPolicy(
            QtCore.Qt.HighDpiScaleFactorRoundingPolicy.PassThrough)

        view = OGSEGUIView()
        model = OGSEUIModel()
        OGSEUIController(model, view)

        view.show()

        return app.exec_()
    else:
        error_message = QMessageBox()
        error_message.setIcon(QMessageBox.Warning)
        error_message.setWindowTitle(&#34;Error&#34;)
        error_message.setText(&#34;The OGSE GUI application is already running!&#34;)
        error_message.setStandardButtons(QMessageBox.Ok)

        return error_message.exec()</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="egse.collimator.fcul.ogse_ui.AttenuationWidget"><code class="flex name class">
<span>class <span class="ident">AttenuationWidget</span></span>
</code></dt>
<dd>
<div class="desc"><p>QWidget(parent: QWidget = None, flags: Union[Qt.WindowFlags, Qt.WindowType] = Qt.WindowFlags())</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class AttenuationWidget(QWidget):
    def __init__(self):
        super().__init__()

        vbox = QVBoxLayout()

        self.title = QLabel(&#34;Attenuation Values&#34;)
        font = self.title.font()
        font.setPointSize(TITLE_FONT_SIZE)
        font.setBold(True)
        self.title.setFont(font)

        vbox.addWidget(self.title, alignment=QtCore.Qt.AlignHCenter)

        hbox = QHBoxLayout()
        hbox.setContentsMargins(0, 20, 0, 0)

        labels_vbox = QVBoxLayout()
        labels_vbox.addWidget(QLabel(&#34;Index:&#34;))
        labels_vbox.addWidget(QLabel(&#34;Factor:&#34;))
        hbox.addLayout(labels_vbox)

        self.index = QLabel()
        self.factor = QLabel()

        values_vbox = QVBoxLayout()
        values_vbox.addWidget(self.index, alignment=QtCore.Qt.AlignRight)
        values_vbox.addWidget(self.factor, alignment=QtCore.Qt.AlignRight)
        hbox.addLayout(values_vbox)

        vbox.addLayout(hbox)

        self.setLayout(vbox)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt5.QtWidgets.QWidget</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>PyQt5.QtGui.QPaintDevice</li>
<li>sip.simplewrapper</li>
</ul>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.CommandWidget"><code class="flex name class">
<span>class <span class="ident">CommandWidget</span></span>
<span>(</span><span>*, observable)</span>
</code></dt>
<dd>
<div class="desc"><p>QWidget(parent: QWidget = None, flags: Union[Qt.WindowFlags, Qt.WindowType] = Qt.WindowFlags())</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class CommandWidget(QWidget):
    def __init__(self, *, observable):
        super().__init__()
        self.observable = observable

        power_label = QLabel(&#34;Power&#34;)
        operate_label = QLabel(&#34;Operate&#34;)
        att_label = QLabel(&#34;Attenuation&#34;)

        self.cmd_power = ToggleButton(
            name=&#34;POWER-ON-OFF&#34;,
            width=50, height=25,
            status_tip=&#34;Power ON or OFF&#34;,
            selected=get_resource(&#34;:/icons/switch-on-square.svg&#34;),
            not_selected=get_resource(&#34;:/icons/switch-off-square.svg&#34;),
            disabled=get_resource(&#34;:/icons/switch-disabled-square.svg&#34;),
        )
        # To avoid repainting the on-off button, we monkey patch the mouseReleaseEvent to a function
        # that does nothing, not even calling its super() method.
        self.cmd_power.mouseReleaseEvent = lambda x: None
        # We want to use the pressed signal here instead of the clicked to avoid repainting the
        # button before the confirmation is asked (see self.on_press)
        self.cmd_power.pressed.connect(self.on_press)

        self.cmd_operate = ToggleButton(
            name=&#34;OPERATE-ON-OFF&#34;,
            width=50, height=25,
            status_tip=&#34;Operate ON or OFF&#34;,
            selected=get_resource(&#34;:/icons/switch-on-square.svg&#34;),
            not_selected=get_resource(&#34;:/icons/switch-off-square.svg&#34;),
            disabled=get_resource(&#34;:/icons/switch-disabled-square.svg&#34;),
        )
        self.cmd_operate.clicked.connect(self.on_click)

        self.att_go_button = TouchButton(
            name=&#34;ATTENUATION-GO&#34;,
            width=25, height=25,
            status_tip=&#34;Set the selected attenuation index&#34;,
            selected=get_resource(&#34;:/icons/small-buttons-go.svg&#34;)
        )
        self.att_go_button.clicked.connect(self.on_click)

        self.att_plus_button = TouchButton(
            name=&#34;ATTENUATION-PLUS&#34;,
            width=15, height=15,
            status_tip=&#34;Increase the selected attenuation index&#34;,
            selected=get_resource(&#34;:/icons/small-buttons-plus.svg&#34;)
        )
        self.att_plus_button.clicked.connect(self.on_click)

        self.att_minus_button = TouchButton(
            name=&#34;ATTENUATION-MINUS&#34;,
            width=15, height=15,
            status_tip=&#34;Decrease the selected attenuation index&#34;,
            selected=get_resource(&#34;:/icons/small-buttons-minus.svg&#34;)
        )
        self.att_minus_button.clicked.connect(self.on_click)

        self.att_index_slider = QSlider(QtCore.Qt.Horizontal)
        self.att_index_slider.setMinimum(0)
        self.att_index_slider.setMaximum(46)
        self.att_index_slider.setSingleStep(1)
        self.att_index_slider.setMinimumWidth(47*2)

        # sliderMoved is needed for updating the label
        self.att_index_slider.valueChanged.connect(self.slider_value_changed)
        # sliderReleased is used for
        self.att_index_slider.sliderReleased.connect(self.slider_released)

        self.att_index_slider_position = QLabel()
        self.att_index_slider_position.setMinimumWidth(20)

        layout = QVBoxLayout()

        self.title = QLabel(&#34;Commanding&#34;)
        font = self.title.font()
        font.setPointSize(TITLE_FONT_SIZE)
        font.setBold(True)
        self.title.setFont(font)

        layout.addWidget(self.title, alignment=QtCore.Qt.AlignHCenter)

        hbox = QHBoxLayout()
        hbox.addWidget(power_label)
        hbox.addWidget(self.cmd_power)
        layout.addLayout(hbox)

        hbox = QHBoxLayout()
        hbox.addWidget(operate_label)
        hbox.addWidget(self.cmd_operate)
        layout.addLayout(hbox)

        hbox = QHBoxLayout()
        hbox.addWidget(att_label)
        hbox.addWidget(self.att_minus_button)
        hbox.addWidget(self.att_index_slider)
        hbox.addWidget(self.att_plus_button)
        hbox.addWidget(self.att_index_slider_position)
        hbox.addWidget(self.att_go_button)
        hbox.setContentsMargins(0, 0, 0, 0)
        layout.addLayout(hbox)

        layout.addStretch()

        hbox = QHBoxLayout()
        hbox.addLayout(layout)
        hbox.addStretch()

        self.setLayout(hbox)

    def disable_commanding(self):
        self.cmd_operate.disable()

    def enable_commanding(self):
        self.cmd_operate.enable()

    def on_click(self, icon: Union[QIcon, bool]):
        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.on_click()&#34;)

        sender = self.sender()

        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__} {sender=!s}&#34;)

        # MODULE_LOGGER.info(f&#34;type(sender) = {type(sender)}&#34;)
        # MODULE_LOGGER.info(f&#34;sender.text() = {sender.text()}&#34;)
        # MODULE_LOGGER.info(f&#34;sender.isCheckable() = {sender.isCheckable()}&#34;)
        # MODULE_LOGGER.info(f&#34;sender.isChecked() = {sender.isChecked()}&#34;)
        # MODULE_LOGGER.info(f&#34;{type(icon) = }, {icon = }&#34;)

        # This will trigger the update() method on all the observers

        self.observable.notifyObservers(sender)

    def slider_moved(self, pos):
        self.att_index_slider_position.setText(str(pos))
        # MODULE_LOGGER.info(f&#34;slider_moved: {pos = }&#34;)

    def slider_pressed(self):
        pos = self.att_index_slider_position.text()
        # MODULE_LOGGER.info(f&#34;slider_pressed: {pos = }&#34;)

    def slider_released(self):
        pos = self.att_index_slider_position.text()
        # MODULE_LOGGER.info(f&#34;slider_released: {pos = }&#34;)

    def slider_value_changed(self, pos):
        self.att_index_slider_position.setText(str(pos))
        # MODULE_LOGGER.info(f&#34;slider_value_changed: {pos = }&#34;)

    def on_press(self):
        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.on_press()&#34;)

        sender = self.sender()

        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__} {sender=!s}&#34;)

        if sender.is_selected():
            response = QMessageBox.question(
                self,
                &#34;Confirmation Required&#34;,
                &#34;Are you sure to power OFF the OGSE?&#34;,
            )
            if response == QMessageBox.Yes:
                self.cmd_power.set_selected(False)
                self.observable.notifyObservers(sender)
        else:
            self.cmd_power.set_selected(True)
            self.observable.notifyObservers(sender)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt5.QtWidgets.QWidget</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>PyQt5.QtGui.QPaintDevice</li>
<li>sip.simplewrapper</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="egse.collimator.fcul.ogse_ui.CommandWidget.disable_commanding"><code class="name flex">
<span>def <span class="ident">disable_commanding</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def disable_commanding(self):
    self.cmd_operate.disable()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.CommandWidget.enable_commanding"><code class="name flex">
<span>def <span class="ident">enable_commanding</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def enable_commanding(self):
    self.cmd_operate.enable()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.CommandWidget.on_click"><code class="name flex">
<span>def <span class="ident">on_click</span></span>(<span>self, icon: Union[PyQt5.QtGui.QIcon, bool])</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def on_click(self, icon: Union[QIcon, bool]):
    # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.on_click()&#34;)

    sender = self.sender()

    # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__} {sender=!s}&#34;)

    # MODULE_LOGGER.info(f&#34;type(sender) = {type(sender)}&#34;)
    # MODULE_LOGGER.info(f&#34;sender.text() = {sender.text()}&#34;)
    # MODULE_LOGGER.info(f&#34;sender.isCheckable() = {sender.isCheckable()}&#34;)
    # MODULE_LOGGER.info(f&#34;sender.isChecked() = {sender.isChecked()}&#34;)
    # MODULE_LOGGER.info(f&#34;{type(icon) = }, {icon = }&#34;)

    # This will trigger the update() method on all the observers

    self.observable.notifyObservers(sender)</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.CommandWidget.on_press"><code class="name flex">
<span>def <span class="ident">on_press</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def on_press(self):
    # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.on_press()&#34;)

    sender = self.sender()

    # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__} {sender=!s}&#34;)

    if sender.is_selected():
        response = QMessageBox.question(
            self,
            &#34;Confirmation Required&#34;,
            &#34;Are you sure to power OFF the OGSE?&#34;,
        )
        if response == QMessageBox.Yes:
            self.cmd_power.set_selected(False)
            self.observable.notifyObservers(sender)
    else:
        self.cmd_power.set_selected(True)
        self.observable.notifyObservers(sender)</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.CommandWidget.slider_moved"><code class="name flex">
<span>def <span class="ident">slider_moved</span></span>(<span>self, pos)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def slider_moved(self, pos):
    self.att_index_slider_position.setText(str(pos))
    # MODULE_LOGGER.info(f&#34;slider_moved: {pos = }&#34;)</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.CommandWidget.slider_pressed"><code class="name flex">
<span>def <span class="ident">slider_pressed</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def slider_pressed(self):
    pos = self.att_index_slider_position.text()
    # MODULE_LOGGER.info(f&#34;slider_pressed: {pos = }&#34;)</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.CommandWidget.slider_released"><code class="name flex">
<span>def <span class="ident">slider_released</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def slider_released(self):
    pos = self.att_index_slider_position.text()
    # MODULE_LOGGER.info(f&#34;slider_released: {pos = }&#34;)</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.CommandWidget.slider_value_changed"><code class="name flex">
<span>def <span class="ident">slider_value_changed</span></span>(<span>self, pos)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def slider_value_changed(self, pos):
    self.att_index_slider_position.setText(str(pos))
    # MODULE_LOGGER.info(f&#34;slider_value_changed: {pos = }&#34;)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.ConfirmationBox"><code class="flex name class">
<span>class <span class="ident">ConfirmationBox</span></span>
<span>(</span><span>text: str, title=None, parent=None)</span>
</code></dt>
<dd>
<div class="desc"><p>QMessageBox(parent: QWidget = None)
QMessageBox(QMessageBox.Icon, str, str, buttons: Union[QMessageBox.StandardButtons, QMessageBox.StandardButton] = QMessageBox.NoButton, parent: QWidget = None, flags: Union[Qt.WindowFlags, Qt.WindowType] = Qt.Dialog|Qt.MSWindowsFixedSizeDialogHint)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ConfirmationBox(QMessageBox):
    def __init__(self, text: str, title=None, parent=None):
        super().__init__(parent)
        self.setWindowTitle(title)
        self.setText(text)
        self.setStandardButtons(QMessageBox.Yes | QMessageBox.No)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt5.QtWidgets.QMessageBox</li>
<li>PyQt5.QtWidgets.QDialog</li>
<li>PyQt5.QtWidgets.QWidget</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>PyQt5.QtGui.QPaintDevice</li>
<li>sip.simplewrapper</li>
</ul>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.FaultsWidget"><code class="flex name class">
<span>class <span class="ident">FaultsWidget</span></span>
</code></dt>
<dd>
<div class="desc"><p>QWidget(parent: QWidget = None, flags: Union[Qt.WindowFlags, Qt.WindowType] = Qt.WindowFlags())</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class FaultsWidget(QWidget):
    def __init__(self):
        super().__init__()

        vbox = QVBoxLayout()

        self.title = QLabel(&#34;Fault Detection&#34;)
        font = self.title.font()
        font.setPointSize(TITLE_FONT_SIZE)
        font.setBold(True)
        self.title.setFont(font)

        self.states = States(FAULTS, shape=ShapeEnum.SQUARE, title=None)

        vbox.addWidget(self.title, alignment=QtCore.Qt.AlignHCenter)
        vbox.addWidget(self.states)

        self.setLayout(vbox)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt5.QtWidgets.QWidget</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>PyQt5.QtGui.QPaintDevice</li>
<li>sip.simplewrapper</li>
</ul>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView"><code class="flex name class">
<span>class <span class="ident">OGSEGUIView</span></span>
</code></dt>
<dd>
<div class="desc"><p>QMainWindow(parent: QWidget = None, flags: Union[Qt.WindowFlags, Qt.WindowType] = Qt.WindowFlags())</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class OGSEGUIView(QMainWindow, Observable):
    def __init__(self):
        super().__init__()

        self.status_puller = None
        self.threadpool = QThreadPool()

        self.cs_connection: ToggleButton = ...
        self.device_connection: ToggleButton = ...
        self.help_action: QAction = ...
        self.toolbar: QToolBar = ...
        self.on_off_button: ToggleButton = ...

        self.setWindowTitle(&#34;OGSE Controller GUI&#34;)
        self.setGeometry(300, 300, 600, 300)

        # The mode_label describes the current mode in which the controller is running.
        # The mode can be Proxy, Simulator, Direct

        self.mode_label = QLabel(&#34;&#34;)

        self.create_toolbar()
        self.create_status_bar()

        self.status = StatusWidget()
        self.power_meter = PowerMeterWidget()
        self.faults = FaultsWidget()
        self.commanding = CommandWidget(observable=self)
        self.attenuation = AttenuationWidget()

        layout = QHBoxLayout()
        #
        # vbox_layout = QVBoxLayout()
        # vbox_layout.addWidget(self.power_meter)
        # vbox_layout.addWidget(self.commanding)
        # vbox_layout.addStretch()
        #
        layout.addWidget(self.status, alignment=QtCore.Qt.AlignTop)
        # layout.addLayout(vbox_layout)
        # layout.addWidget(self.faults, alignment=QtCore.Qt.AlignTop)

        grid_layout = QGridLayout()
        grid_layout.setSpacing(0)

        grid_layout.addWidget(self.power_meter, 0, 0, alignment=QtCore.Qt.AlignTop)
        grid_layout.addWidget(self.attenuation, 0, 1, alignment=QtCore.Qt.AlignTop)
        grid_layout.addWidget(self.faults, 1, 0, alignment=QtCore.Qt.AlignTop)
        grid_layout.addWidget(self.commanding, 1, 1, alignment=QtCore.Qt.AlignTop)

        layout.addLayout(grid_layout)

        widget = QWidget()
        widget.setLayout(layout)

        self.setCentralWidget(widget)

    def closeEvent(self, event):
        MODULE_LOGGER.info(&#34;Window closed, quiting....&#34;)
        self.status_puller.quit()
        event.accept()

        all_threads_finished = self.threadpool.waitForDone(msecs=2000)
        if not all_threads_finished:
            MODULE_LOGGER.warning(&#34;Not all threads were finished before the OGSE GUI terminated.&#34;)

    def start_pulling_status(self):
        self.status_puller = worker = StatusPuller(OGSEUIModel())
        self.threadpool.start(worker)
        worker.signals.states.connect(self.worker_states)
        worker.signals.faults.connect(self.worker_faults)
        worker.signals.att.connect(self.worker_att)
        worker.signals.dev.connect(self.worker_dev)
        worker.signals.pm.connect(self.worker_pm)

    @pyqtSlot(list)
    def worker_states(self, states):
        self.status.states.set_states(states)

    @pyqtSlot(list)
    def worker_faults(self, faults):
        self.faults.states.set_states(faults)

    @pyqtSlot(list)
    def worker_att(self, att):
        self.attenuation.index.setText( str(att[0]))
        self.attenuation.factor.setText(str(att[1]))

    @pyqtSlot(bool)
    def worker_dev(self, dev):
        self.device_connection.set_selected(dev)

    @pyqtSlot(dict)
    def worker_pm(self, pm):
        self.power_meter.power_1 = f&#34;{pm[&#39;power1&#39;]:.4e}&#34;
        self.power_meter.power_2 = f&#34;{pm[&#39;power2&#39;]:.4e}&#34;
        self.power_meter.temp_1 = f&#34;{pm[&#39;temp1&#39;]:5.2f}&#34;
        self.power_meter.temp_2 = f&#34;{pm[&#39;temp2&#39;]:5.2f}&#34;

    def on_click(self, icon: Union[QIcon, bool]):
        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.on_click()&#34;)

        sender = self.sender()

        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__} {sender=!s}&#34;)

        # MODULE_LOGGER.info(f&#34;type(sender) = {type(sender)}&#34;)
        # MODULE_LOGGER.info(f&#34;sender.text() = {sender.text()}&#34;)
        # MODULE_LOGGER.info(f&#34;sender.isCheckable() = {sender.isCheckable()}&#34;)
        # MODULE_LOGGER.info(f&#34;sender.isChecked() = {sender.isChecked()}&#34;)
        # MODULE_LOGGER.info(f&#34;type(icon) = {type(icon)}&#34;)

        # This will trigger the update() method on all the observers

        self.notifyObservers(sender)

    def on_press(self):
        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.on_press()&#34;)

        sender: ToggleButton = self.sender()

        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__} {sender=!s}&#34;)

        if sender.is_selected():
            response = QMessageBox.question(
                self,
                &#34;Confirmation Required&#34;,
                &#34;Are you sure to switch OFF the OGSE?&#34;,
            )
            if response == QMessageBox.Yes:
                self.on_off_button.set_selected(False)
                self.notifyObservers(sender)
        else:
            self.on_off_button.set_selected(True)
            self.notifyObservers(sender)

    def is_cs_action_enabled(self):
        return self.cs_connection.isEnabled()

    def disable_cs_action(self):
        self.cs_connection.disable()

    def enable_cs_action(self):
        self.cs_connection.enable()

    def check_cs_action(self):
        self.cs_connection.set_selected()

    def uncheck_cs_action(self):
        self.cs_connection.set_selected(False)

    def check_device_action(self):
        self.device_connection.set_selected()

    def uncheck_device_action(self):
        self.device_connection.set_selected(False)

    def create_status_bar(self):

        self.statusBar().setStyleSheet(&#34;border: 0; background-color: #FFF8DC;&#34;)
        self.statusBar().setStyleSheet(&#34;QStatusBar::item {border: none;}&#34;)
        self.statusBar().addPermanentWidget(VLine())
        self.statusBar().addPermanentWidget(self.mode_label)

    def create_toolbar(self):

        # The Reconnect action is used to reconnect to the control server

        self.cs_connection = ToggleButton(
            name=&#34;CS-CONNECT&#34;,
            status_tip=&#34;connect-disconnect the OGSE control server&#34;,
            selected=get_resource(&#34;:/icons/cs-connected.svg&#34;),
            not_selected=get_resource(&#34;:/icons/cs-not-connected.svg&#34;),
            disabled=get_resource(&#34;:/icons/cs-connected-disabled.svg&#34;)
        )
        self.cs_connection.clicked.connect(self.on_click)

        # The Reconnect action is used to reconnect the device

        self.device_connection = ToggleButton(
            name=&#34;DEVICE-CONNECT&#34;,
            status_tip=&#34;connect-disconnect the OGSE device controller&#34;,
            selected=get_resource(&#34;:/icons/plugged.svg&#34;),
            not_selected=get_resource(&#34;:/icons/unplugged.svg&#34;),
            disabled=get_resource(&#34;:/icons/plugged-disabled.svg&#34;)
        )
        self.device_connection.clicked.connect(self.on_click)

        # The HELP button is used to show the on-line help in a browser window

        help_button = QIcon(str(get_resource(&#34;:/icons/info.svg&#34;)))

        self.help_action = QAction(help_button, &#34;INFO&#34;, self)
        self.help_action.setToolTip(&#34;Browse the on-line documentation&#34;)
        self.help_action.triggered.connect(self.on_click)

        # spacer widget to help with aligning STOP button to the right

        spacer = QWidget()
        spacer.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Expanding)

        self.toolbar = self.addToolBar(&#34;MainToolbar&#34;)
        self.toolbar.addWidget(self.device_connection)
        self.toolbar.addWidget(self.cs_connection)
        self.toolbar.addWidget(spacer)
        self.toolbar.addAction(self.help_action)

        return self.toolbar

    def set_connection_state(self, state):
        # enable or disable all actions that involve a device or cs connection
        # don&#39;t change the action buttons for the device nor the cs, that is handled
        # in the caller because it might be a device connection loss that causes this state
        # or a control server, or both...

        # MODULE_LOGGER.info(f&#34;{state=}&#34;)

        if state == &#34;connected&#34;:
            self.commanding.enable_commanding()
        elif state == &#34;disconnected&#34;:
            self.commanding.disable_commanding()
        else:
            raise UnknownStateError(
                f&#34;Unknown State ({state}), expected &#39;connected&#39; or &#39;disconnected&#39;.&#34;
            )

    def update_status_bar(self, message=None, mode=None, timeout=2000):
        if message:
            self.statusBar().showMessage(message, msecs=timeout)
        if mode:
            self.mode_label.setStyleSheet(
                f&#34;border: 0; &#34; f&#34;color: {&#39;red&#39; if &#39;Simulator&#39; in mode else &#39;black&#39;};&#34;
            )
            self.mode_label.setText(f&#34;mode: {mode}&#34;)
        self.statusBar().repaint()</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt5.QtWidgets.QMainWindow</li>
<li>PyQt5.QtWidgets.QWidget</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>PyQt5.QtGui.QPaintDevice</li>
<li>sip.simplewrapper</li>
<li><a title="egse.observer.Observable" href="../../observer.html#egse.observer.Observable">Observable</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView.check_cs_action"><code class="name flex">
<span>def <span class="ident">check_cs_action</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def check_cs_action(self):
    self.cs_connection.set_selected()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView.check_device_action"><code class="name flex">
<span>def <span class="ident">check_device_action</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def check_device_action(self):
    self.device_connection.set_selected()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView.closeEvent"><code class="name flex">
<span>def <span class="ident">closeEvent</span></span>(<span>self, event)</span>
</code></dt>
<dd>
<div class="desc"><p>closeEvent(self, QCloseEvent)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def closeEvent(self, event):
    MODULE_LOGGER.info(&#34;Window closed, quiting....&#34;)
    self.status_puller.quit()
    event.accept()

    all_threads_finished = self.threadpool.waitForDone(msecs=2000)
    if not all_threads_finished:
        MODULE_LOGGER.warning(&#34;Not all threads were finished before the OGSE GUI terminated.&#34;)</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView.create_status_bar"><code class="name flex">
<span>def <span class="ident">create_status_bar</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create_status_bar(self):

    self.statusBar().setStyleSheet(&#34;border: 0; background-color: #FFF8DC;&#34;)
    self.statusBar().setStyleSheet(&#34;QStatusBar::item {border: none;}&#34;)
    self.statusBar().addPermanentWidget(VLine())
    self.statusBar().addPermanentWidget(self.mode_label)</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView.create_toolbar"><code class="name flex">
<span>def <span class="ident">create_toolbar</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create_toolbar(self):

    # The Reconnect action is used to reconnect to the control server

    self.cs_connection = ToggleButton(
        name=&#34;CS-CONNECT&#34;,
        status_tip=&#34;connect-disconnect the OGSE control server&#34;,
        selected=get_resource(&#34;:/icons/cs-connected.svg&#34;),
        not_selected=get_resource(&#34;:/icons/cs-not-connected.svg&#34;),
        disabled=get_resource(&#34;:/icons/cs-connected-disabled.svg&#34;)
    )
    self.cs_connection.clicked.connect(self.on_click)

    # The Reconnect action is used to reconnect the device

    self.device_connection = ToggleButton(
        name=&#34;DEVICE-CONNECT&#34;,
        status_tip=&#34;connect-disconnect the OGSE device controller&#34;,
        selected=get_resource(&#34;:/icons/plugged.svg&#34;),
        not_selected=get_resource(&#34;:/icons/unplugged.svg&#34;),
        disabled=get_resource(&#34;:/icons/plugged-disabled.svg&#34;)
    )
    self.device_connection.clicked.connect(self.on_click)

    # The HELP button is used to show the on-line help in a browser window

    help_button = QIcon(str(get_resource(&#34;:/icons/info.svg&#34;)))

    self.help_action = QAction(help_button, &#34;INFO&#34;, self)
    self.help_action.setToolTip(&#34;Browse the on-line documentation&#34;)
    self.help_action.triggered.connect(self.on_click)

    # spacer widget to help with aligning STOP button to the right

    spacer = QWidget()
    spacer.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Expanding)

    self.toolbar = self.addToolBar(&#34;MainToolbar&#34;)
    self.toolbar.addWidget(self.device_connection)
    self.toolbar.addWidget(self.cs_connection)
    self.toolbar.addWidget(spacer)
    self.toolbar.addAction(self.help_action)

    return self.toolbar</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView.disable_cs_action"><code class="name flex">
<span>def <span class="ident">disable_cs_action</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def disable_cs_action(self):
    self.cs_connection.disable()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView.enable_cs_action"><code class="name flex">
<span>def <span class="ident">enable_cs_action</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def enable_cs_action(self):
    self.cs_connection.enable()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView.is_cs_action_enabled"><code class="name flex">
<span>def <span class="ident">is_cs_action_enabled</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def is_cs_action_enabled(self):
    return self.cs_connection.isEnabled()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView.on_click"><code class="name flex">
<span>def <span class="ident">on_click</span></span>(<span>self, icon: Union[PyQt5.QtGui.QIcon, bool])</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def on_click(self, icon: Union[QIcon, bool]):
    # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.on_click()&#34;)

    sender = self.sender()

    # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__} {sender=!s}&#34;)

    # MODULE_LOGGER.info(f&#34;type(sender) = {type(sender)}&#34;)
    # MODULE_LOGGER.info(f&#34;sender.text() = {sender.text()}&#34;)
    # MODULE_LOGGER.info(f&#34;sender.isCheckable() = {sender.isCheckable()}&#34;)
    # MODULE_LOGGER.info(f&#34;sender.isChecked() = {sender.isChecked()}&#34;)
    # MODULE_LOGGER.info(f&#34;type(icon) = {type(icon)}&#34;)

    # This will trigger the update() method on all the observers

    self.notifyObservers(sender)</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView.on_press"><code class="name flex">
<span>def <span class="ident">on_press</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def on_press(self):
    # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.on_press()&#34;)

    sender: ToggleButton = self.sender()

    # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__} {sender=!s}&#34;)

    if sender.is_selected():
        response = QMessageBox.question(
            self,
            &#34;Confirmation Required&#34;,
            &#34;Are you sure to switch OFF the OGSE?&#34;,
        )
        if response == QMessageBox.Yes:
            self.on_off_button.set_selected(False)
            self.notifyObservers(sender)
    else:
        self.on_off_button.set_selected(True)
        self.notifyObservers(sender)</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView.set_connection_state"><code class="name flex">
<span>def <span class="ident">set_connection_state</span></span>(<span>self, state)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_connection_state(self, state):
    # enable or disable all actions that involve a device or cs connection
    # don&#39;t change the action buttons for the device nor the cs, that is handled
    # in the caller because it might be a device connection loss that causes this state
    # or a control server, or both...

    # MODULE_LOGGER.info(f&#34;{state=}&#34;)

    if state == &#34;connected&#34;:
        self.commanding.enable_commanding()
    elif state == &#34;disconnected&#34;:
        self.commanding.disable_commanding()
    else:
        raise UnknownStateError(
            f&#34;Unknown State ({state}), expected &#39;connected&#39; or &#39;disconnected&#39;.&#34;
        )</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView.start_pulling_status"><code class="name flex">
<span>def <span class="ident">start_pulling_status</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def start_pulling_status(self):
    self.status_puller = worker = StatusPuller(OGSEUIModel())
    self.threadpool.start(worker)
    worker.signals.states.connect(self.worker_states)
    worker.signals.faults.connect(self.worker_faults)
    worker.signals.att.connect(self.worker_att)
    worker.signals.dev.connect(self.worker_dev)
    worker.signals.pm.connect(self.worker_pm)</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView.uncheck_cs_action"><code class="name flex">
<span>def <span class="ident">uncheck_cs_action</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def uncheck_cs_action(self):
    self.cs_connection.set_selected(False)</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView.uncheck_device_action"><code class="name flex">
<span>def <span class="ident">uncheck_device_action</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def uncheck_device_action(self):
    self.device_connection.set_selected(False)</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView.update_status_bar"><code class="name flex">
<span>def <span class="ident">update_status_bar</span></span>(<span>self, message=None, mode=None, timeout=2000)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update_status_bar(self, message=None, mode=None, timeout=2000):
    if message:
        self.statusBar().showMessage(message, msecs=timeout)
    if mode:
        self.mode_label.setStyleSheet(
            f&#34;border: 0; &#34; f&#34;color: {&#39;red&#39; if &#39;Simulator&#39; in mode else &#39;black&#39;};&#34;
        )
        self.mode_label.setText(f&#34;mode: {mode}&#34;)
    self.statusBar().repaint()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView.worker_att"><code class="name flex">
<span>def <span class="ident">worker_att</span></span>(<span>self, att)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@pyqtSlot(list)
def worker_att(self, att):
    self.attenuation.index.setText( str(att[0]))
    self.attenuation.factor.setText(str(att[1]))</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView.worker_dev"><code class="name flex">
<span>def <span class="ident">worker_dev</span></span>(<span>self, dev)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@pyqtSlot(bool)
def worker_dev(self, dev):
    self.device_connection.set_selected(dev)</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView.worker_faults"><code class="name flex">
<span>def <span class="ident">worker_faults</span></span>(<span>self, faults)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@pyqtSlot(list)
def worker_faults(self, faults):
    self.faults.states.set_states(faults)</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView.worker_pm"><code class="name flex">
<span>def <span class="ident">worker_pm</span></span>(<span>self, pm)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@pyqtSlot(dict)
def worker_pm(self, pm):
    self.power_meter.power_1 = f&#34;{pm[&#39;power1&#39;]:.4e}&#34;
    self.power_meter.power_2 = f&#34;{pm[&#39;power2&#39;]:.4e}&#34;
    self.power_meter.temp_1 = f&#34;{pm[&#39;temp1&#39;]:5.2f}&#34;
    self.power_meter.temp_2 = f&#34;{pm[&#39;temp2&#39;]:5.2f}&#34;</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEGUIView.worker_states"><code class="name flex">
<span>def <span class="ident">worker_states</span></span>(<span>self, states)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@pyqtSlot(list)
def worker_states(self, states):
    self.status.states.set_states(states)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSETUIView"><code class="flex name class">
<span>class <span class="ident">OGSETUIView</span></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class OGSETUIView:
    ...</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIController"><code class="flex name class">
<span>class <span class="ident">OGSEUIController</span></span>
<span>(</span><span>model: <a title="egse.collimator.fcul.ogse_ui.OGSEUIModel" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel">OGSEUIModel</a>, view: Union[<a title="egse.collimator.fcul.ogse_ui.OGSEGUIView" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView">OGSEGUIView</a>, <a title="egse.collimator.fcul.ogse_ui.OGSETUIView" href="#egse.collimator.fcul.ogse_ui.OGSETUIView">OGSETUIView</a>])</span>
</code></dt>
<dd>
<div class="desc"><p>Helper class that provides a standard way to create an ABC using
inheritance.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class OGSEUIController(Observer):
    def __init__(self, model: OGSEUIModel, view: Union[OGSEGUIView, OGSETUIView]):
        super().__init__()

        self.model = model
        self.view = view

        self.view.addObserver(self)

        self.help_window = HelpWindow(topic_url=HELP_TOPICS[&#34;ogse_ui&#34;])

        self.states_capture_timer_interval = 1000  # [ms]
        self.create_timer()

        if self.model.is_cs_connected():
            mode = f&#34;Proxy{&#39; [Simulator]&#39; if self.model.is_simulator() else &#39;&#39;}&#34;
            self.view.update_status_bar(mode=mode)
            self.view.check_cs_action()
        else:
            self.view.uncheck_cs_action()
            # if the control server is not connected, we should not check for the other connection
            # status but just uncheck actions and return
            self.view.uncheck_device_action()
            self.view.set_connection_state(&#34;disconnected&#34;)
            self.stop_timer()
            return

        if self.model.is_device_connected():
            self.view.check_device_action()
        else:
            self.view.uncheck_device_action()

        if self.has_connection():
            self.view.set_connection_state(&#34;connected&#34;)
            self.start_timer()
        else:
            self.view.set_connection_state(&#34;disconnected&#34;)
            self.stop_timer()

        self.view.start_pulling_status()

    def has_connection(self):
        &#34;&#34;&#34;
        Returns True if the controller has a connection to the device. This takes into account
        that the control server might be disabled when the controller is directly connected to
        the device or to a simulator.
        &#34;&#34;&#34;
        if self.view.is_cs_action_enabled():
            return bool(self.model.is_device_connected() and self.model.is_cs_connected())
        else:
            return bool(self.model.is_device_connected())

    def create_timer(self):
        &#34;&#34;&#34;Create a Timer that will update the States every second.&#34;&#34;&#34;

        self.states_capture_timer = QTimer()
        self.states_capture_timer.timeout.connect(self.update_state)
        self.states_capture_timer.setInterval(self.states_capture_timer_interval)

    def start_timer(self):
        self.states_capture_timer.start()

    def stop_timer(self):
        self.states_capture_timer.stop()

    def do(self, actions):
        # This method is part of the Observer protocol and will be called when there is an
        # action requested by the Observable.

        for action, value in actions.items():
            ...

    def update(self, changed_object):
        # This method is part of the Observer protocol and will be called when there is a
        # notification of a change in the Observable.

        text = changed_object.text()
        # MODULE_LOGGER.debug(f&#34;in {self.__class__.__name__}.update({type(changed_object)}), text=\&#34;{text}\&#34;&#34;)

        if text == &#34;INFO&#34;:
            self.help_window.show()

        if text == &#34;POWER-ON-OFF&#34;:
            obj: ToggleButton = changed_object
            if obj.state == BUTTON_SELECTED:
                self.model.power_on()
                # Should we also execute `operate_on()` or leave that to the user by pressing
                # the button in the GUI?
                self.view.commanding.cmd_operate.enable()
            else:
                self.model.operate_off()
                self.model.power_off()
                self.view.commanding.cmd_operate.disable()

        if text == &#34;OPERATE-ON-OFF&#34;:
            if changed_object.is_selected():
                self.model.operate_on()
            else:
                self.model.operate_off()

        if text == &#34;ATTENUATION-GO&#34;:
            position = self.view.commanding.att_index_slider_position.text()
            self.model.set_attenuation_index(position)

        if text == &#34;ATTENUATION-PLUS&#34;:
            position = min(self.view.commanding.att_index_slider.value() + 1, 46)
            self.view.commanding.att_index_slider_position.setText(str(position))
            self.view.commanding.att_index_slider.setSliderPosition(position)

        if text == &#34;ATTENUATION-MINUS&#34;:
            position = max(self.view.commanding.att_index_slider.value() - 1, 0)
            self.view.commanding.att_index_slider_position.setText(str(position))
            self.view.commanding.att_index_slider.setSliderPosition(position)

        if text == &#34;CS-CONNECT&#34;:
            if changed_object.is_selected():
                MODULE_LOGGER.debug(&#34;Reconnecting the OGSE Control Server.&#34;)
                self.model.reconnect_cs()
                # if not self.model.has_commands():
                #     self.model.load_commands()
                self.start_timer()
                if self.model.is_device_connected() and self.model.is_cs_connected():
                    self.view.set_connection_state(&#34;connected&#34;)
                    self.view.device_connection.enable()
            else:
                MODULE_LOGGER.debug(&#34;Disconnecting the OGSE Control Server.&#34;)
                self.stop_timer()
                self.model.disconnect_cs()
                self.view.device_connection.disable()
                self.view.set_connection_state(&#34;disconnected&#34;)
            return

        if text == &#34;DEVICE-CONNECT&#34;:
            if changed_object.is_selected():
                MODULE_LOGGER.debug(&#34;Reconnecting the OGSE device controller.&#34;)
                if self.model.reconnect_device():
                    self.view.set_connection_state(&#34;connected&#34;)
                    # if not self.model.has_commands():
                    #     self.model.load_commands()
                    self.start_timer()
                else:
                    self.view.device_connection.set_selected(False)
            else:
                MODULE_LOGGER.debug(&#34;Disconnecting the OGSE device Controller.&#34;)
                self.stop_timer()
                self.model.disconnect()
                self.view.set_connection_state(&#34;disconnected&#34;)
            return

    def update_state(self):
        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.update_state()&#34;)
        # MODULE_LOGGER.info(&#34;Disabled update_state() from OGSEUIController&#34;)
        # return

        self.view.device_connection.set_selected(self.model.is_device_connected())

        m = self.model

        # Set all the status LEDs

        status = m.status()
        states = [
            Indic.GREEN if &#39;ON&#39; in status[&#34;interlock&#34;] else Indic.BLACK,
            Indic.GREEN if &#39;ON&#39; in status[&#34;power&#34;] else Indic.BLACK,
            Indic.GREEN if m.get_laser() else Indic.BLACK,
            Indic.GREEN if &#39;ON&#39; in status[&#34;lamp&#34;] else Indic.BLACK,
            Indic.GREEN if &#39;ON&#39; in status[&#34;psu&#34;] else Indic.BLACK,
            Indic.GREEN if m.get_ldls_status() else Indic.BLACK,
            Indic.ORANGE if status[&#34;att_moving&#34;] else Indic.BLACK,
        ]
        self.view.status.states.set_states(states)

        # Set the value of the power meter

        self.view.power_meter.power_1 = f&#34;{status[&#39;power1&#39;]:.4e}&#34;
        self.view.power_meter.power_2 = f&#34;{status[&#39;power2&#39;]:.4e}&#34;
        self.view.power_meter.temp_1 = f&#34;{status[&#39;temp1&#39;]:5.2f}&#34;
        self.view.power_meter.temp_2 = f&#34;{status[&#39;temp2&#39;]:5.2f}&#34;

        # Set the fault detection on the lamp and controller

        states = [
            Indic.RED if m.get_lamp_fault() else Indic.GREEN,
            Indic.RED if m.get_controller_fault() else Indic.GREEN,
        ]
        self.view.faults.states.set_states(states)

        if m.get_operate():
            self.view.commanding.cmd_operate.set_selected(True)
        else:
            self.view.commanding.cmd_operate.set_selected(False)

        if &#39;ON&#39; in status[&#34;power&#34;]:
            self.view.commanding.cmd_power.set_selected(True)
            self.view.commanding.enable_commanding()
        else:
            self.view.commanding.cmd_power.set_selected(False)
            self.view.commanding.disable_commanding()

        self.view.attenuation.index.setText( str(status[&#34;att_index&#34;]))
        self.view.attenuation.factor.setText(str(status[&#34;att_factor&#34;]))</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="egse.observer.Observer" href="../../observer.html#egse.observer.Observer">Observer</a></li>
<li>abc.ABC</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIController.create_timer"><code class="name flex">
<span>def <span class="ident">create_timer</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Create a Timer that will update the States every second.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create_timer(self):
    &#34;&#34;&#34;Create a Timer that will update the States every second.&#34;&#34;&#34;

    self.states_capture_timer = QTimer()
    self.states_capture_timer.timeout.connect(self.update_state)
    self.states_capture_timer.setInterval(self.states_capture_timer_interval)</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIController.do"><code class="name flex">
<span>def <span class="ident">do</span></span>(<span>self, actions)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def do(self, actions):
    # This method is part of the Observer protocol and will be called when there is an
    # action requested by the Observable.

    for action, value in actions.items():
        ...</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIController.has_connection"><code class="name flex">
<span>def <span class="ident">has_connection</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns True if the controller has a connection to the device. This takes into account
that the control server might be disabled when the controller is directly connected to
the device or to a simulator.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def has_connection(self):
    &#34;&#34;&#34;
    Returns True if the controller has a connection to the device. This takes into account
    that the control server might be disabled when the controller is directly connected to
    the device or to a simulator.
    &#34;&#34;&#34;
    if self.view.is_cs_action_enabled():
        return bool(self.model.is_device_connected() and self.model.is_cs_connected())
    else:
        return bool(self.model.is_device_connected())</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIController.start_timer"><code class="name flex">
<span>def <span class="ident">start_timer</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def start_timer(self):
    self.states_capture_timer.start()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIController.stop_timer"><code class="name flex">
<span>def <span class="ident">stop_timer</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def stop_timer(self):
    self.states_capture_timer.stop()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIController.update"><code class="name flex">
<span>def <span class="ident">update</span></span>(<span>self, changed_object)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update(self, changed_object):
    # This method is part of the Observer protocol and will be called when there is a
    # notification of a change in the Observable.

    text = changed_object.text()
    # MODULE_LOGGER.debug(f&#34;in {self.__class__.__name__}.update({type(changed_object)}), text=\&#34;{text}\&#34;&#34;)

    if text == &#34;INFO&#34;:
        self.help_window.show()

    if text == &#34;POWER-ON-OFF&#34;:
        obj: ToggleButton = changed_object
        if obj.state == BUTTON_SELECTED:
            self.model.power_on()
            # Should we also execute `operate_on()` or leave that to the user by pressing
            # the button in the GUI?
            self.view.commanding.cmd_operate.enable()
        else:
            self.model.operate_off()
            self.model.power_off()
            self.view.commanding.cmd_operate.disable()

    if text == &#34;OPERATE-ON-OFF&#34;:
        if changed_object.is_selected():
            self.model.operate_on()
        else:
            self.model.operate_off()

    if text == &#34;ATTENUATION-GO&#34;:
        position = self.view.commanding.att_index_slider_position.text()
        self.model.set_attenuation_index(position)

    if text == &#34;ATTENUATION-PLUS&#34;:
        position = min(self.view.commanding.att_index_slider.value() + 1, 46)
        self.view.commanding.att_index_slider_position.setText(str(position))
        self.view.commanding.att_index_slider.setSliderPosition(position)

    if text == &#34;ATTENUATION-MINUS&#34;:
        position = max(self.view.commanding.att_index_slider.value() - 1, 0)
        self.view.commanding.att_index_slider_position.setText(str(position))
        self.view.commanding.att_index_slider.setSliderPosition(position)

    if text == &#34;CS-CONNECT&#34;:
        if changed_object.is_selected():
            MODULE_LOGGER.debug(&#34;Reconnecting the OGSE Control Server.&#34;)
            self.model.reconnect_cs()
            # if not self.model.has_commands():
            #     self.model.load_commands()
            self.start_timer()
            if self.model.is_device_connected() and self.model.is_cs_connected():
                self.view.set_connection_state(&#34;connected&#34;)
                self.view.device_connection.enable()
        else:
            MODULE_LOGGER.debug(&#34;Disconnecting the OGSE Control Server.&#34;)
            self.stop_timer()
            self.model.disconnect_cs()
            self.view.device_connection.disable()
            self.view.set_connection_state(&#34;disconnected&#34;)
        return

    if text == &#34;DEVICE-CONNECT&#34;:
        if changed_object.is_selected():
            MODULE_LOGGER.debug(&#34;Reconnecting the OGSE device controller.&#34;)
            if self.model.reconnect_device():
                self.view.set_connection_state(&#34;connected&#34;)
                # if not self.model.has_commands():
                #     self.model.load_commands()
                self.start_timer()
            else:
                self.view.device_connection.set_selected(False)
        else:
            MODULE_LOGGER.debug(&#34;Disconnecting the OGSE device Controller.&#34;)
            self.stop_timer()
            self.model.disconnect()
            self.view.set_connection_state(&#34;disconnected&#34;)
        return</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIController.update_state"><code class="name flex">
<span>def <span class="ident">update_state</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update_state(self):
    # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.update_state()&#34;)
    # MODULE_LOGGER.info(&#34;Disabled update_state() from OGSEUIController&#34;)
    # return

    self.view.device_connection.set_selected(self.model.is_device_connected())

    m = self.model

    # Set all the status LEDs

    status = m.status()
    states = [
        Indic.GREEN if &#39;ON&#39; in status[&#34;interlock&#34;] else Indic.BLACK,
        Indic.GREEN if &#39;ON&#39; in status[&#34;power&#34;] else Indic.BLACK,
        Indic.GREEN if m.get_laser() else Indic.BLACK,
        Indic.GREEN if &#39;ON&#39; in status[&#34;lamp&#34;] else Indic.BLACK,
        Indic.GREEN if &#39;ON&#39; in status[&#34;psu&#34;] else Indic.BLACK,
        Indic.GREEN if m.get_ldls_status() else Indic.BLACK,
        Indic.ORANGE if status[&#34;att_moving&#34;] else Indic.BLACK,
    ]
    self.view.status.states.set_states(states)

    # Set the value of the power meter

    self.view.power_meter.power_1 = f&#34;{status[&#39;power1&#39;]:.4e}&#34;
    self.view.power_meter.power_2 = f&#34;{status[&#39;power2&#39;]:.4e}&#34;
    self.view.power_meter.temp_1 = f&#34;{status[&#39;temp1&#39;]:5.2f}&#34;
    self.view.power_meter.temp_2 = f&#34;{status[&#39;temp2&#39;]:5.2f}&#34;

    # Set the fault detection on the lamp and controller

    states = [
        Indic.RED if m.get_lamp_fault() else Indic.GREEN,
        Indic.RED if m.get_controller_fault() else Indic.GREEN,
    ]
    self.view.faults.states.set_states(states)

    if m.get_operate():
        self.view.commanding.cmd_operate.set_selected(True)
    else:
        self.view.commanding.cmd_operate.set_selected(False)

    if &#39;ON&#39; in status[&#34;power&#34;]:
        self.view.commanding.cmd_power.set_selected(True)
        self.view.commanding.enable_commanding()
    else:
        self.view.commanding.cmd_power.set_selected(False)
        self.view.commanding.disable_commanding()

    self.view.attenuation.index.setText( str(status[&#34;att_index&#34;]))
    self.view.attenuation.factor.setText(str(status[&#34;att_factor&#34;]))</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel"><code class="flex name class">
<span>class <span class="ident">OGSEUIModel</span></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class OGSEUIModel:
    def __init__(self):

        self.device = OGSEProxy()

    def reconnect_device(self):
        self.device.reconnect()
        return self.device.is_connected()

    def reconnect_cs(self):
        self.device.reconnect_cs()
        return self.device.is_cs_connected()

    def disconnect(self):
        self.device.disconnect()

    def disconnect_cs(self):
        try:
            self.device.disconnect_cs()
        except ZMQError as exc:
            MODULE_LOGGER.error(f&#34;{exc=}&#34;)

    def is_cs_connected(self):
        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.is_cs_connected()&#34;)
        return self.device.is_cs_connected()

    def is_device_connected(self):
        # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.is_device_connected()&#34;)
        response = self.device.is_connected()
        # MODULE_LOGGER.info(f&#34;{self.__class__.__name__}.device.is_connected() = {response}&#34;)
        return response if response is not None else False

    def is_simulator(self):
        return &#34;sim&#34; in self.device.version()

    def power_on(self):
        MODULE_LOGGER.debug(f&#34;in {self.__class__.__name__}.power_on()&#34;)
        self.device.power_on()

    def power_off(self):
        MODULE_LOGGER.debug(f&#34;in {self.__class__.__name__}.power_off()&#34;)
        self.device.power_off()

    def operate_on(self):
        MODULE_LOGGER.debug(f&#34;in {self.__class__.__name__}.operate_on()&#34;)
        self.device.operate_on()

    def operate_off(self):
        MODULE_LOGGER.debug(f&#34;in {self.__class__.__name__}.operate_off()&#34;)
        self.device.operate_off()

    def set_att_level(
            self,
            index: Optional[int] = None,
            factor: Optional[float] = None,
            position: Optional[Tuple[int, int]] = None,
    ):
        MODULE_LOGGER.debug(f&#34;in {self.__class__.__name__}.set_att_level({index=}, &#34;
                           f&#34;{factor=}, {position=})&#34;)
        if index and factor and position:
            raise ValueError(f&#34;Only one of the keyword arguments can be provided, {index=}, &#34;
                             f&#34;{factor=}, {position=}&#34;)
        if index:
            self.device.att_set_level_index(index)
        if factor:
            self.device.att_set_level_factor(factor)
        if position:
            self.device.att_set_level_factor(factor)

    def get_interlock(self) -&gt; bool:
        interlock = self.device.get_interlock()
        return &#34;ON&#34; in interlock

    def get_power(self) -&gt; bool:
        power = self.device.get_power()
        return &#34;ON&#34; in power

    def get_operate(self) -&gt; bool:
        operate = self.device.get_operate()
        return &#34;ON&#34; in operate

    def get_laser(self) -&gt; bool:
        laser = self.device.get_laser()
        return &#34;ON&#34; in laser

    def get_ldls_status(self):
        ldls = self.device.ldls_status()
        return &#34;OK&#34; in ldls

    def status(self) -&gt; dict:
        &#34;&#34;&#34;
        Returns a dictionary with the following keys:

            &#39;power&#39;, &#39;lamp&#39;, &#39;interlock&#39;, &#39;psu&#39;, &#39;att_moving&#39;, &#39;att_factor&#39;,
            &#39;att_index&#39;, &#39;power1&#39;, &#39;temp1&#39;, &#39;power2&#39;, &#39;temp2&#39;
        &#34;&#34;&#34;
        return self.device.status()

    def pm_power_1(self) -&gt; float:
        status = self.device.status()
        return status[&#34;power1&#34;]

    def pm_power_2(self) -&gt; float:
        status = self.device.status()
        return status[&#34;power2&#34;]

    def pm_temperature_1(self) -&gt; float:
        status = self.device.status()
        return status[&#34;temp1&#34;]

    def pm_temperature_2(self) -&gt; float:
        status = self.device.status()
        return status[&#34;temp2&#34;]

    def get_lamp_fault(self):
        fault = self.device.get_lamp_fault()

        # get_lamp_fault response contains &#39;NO-ERROR&#39; if all good, and &#39;ERROR&#39; if there
        # was an error. The model will return True if there is a fault detected!

        return &#34;NO-ERROR&#34; not in fault

    def get_controller_fault(self):
        fault = self.device.get_controller_fault()

        # get_controller_fault response contains &#39;NO-ERROR&#39; if all good, and &#39;ERROR&#39; if there
        # was an error. The model will return True if there is a fault detected!

        return &#34;NO-ERROR&#34; not in fault

    def set_attenuation_index(self, index):
        # MODULE_LOGGER.info(f&#34;set_attenuation_index to {index} ({type(index)=})&#34;)
        self.device.att_set_level_index(int(index))</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.disconnect"><code class="name flex">
<span>def <span class="ident">disconnect</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def disconnect(self):
    self.device.disconnect()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.disconnect_cs"><code class="name flex">
<span>def <span class="ident">disconnect_cs</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def disconnect_cs(self):
    try:
        self.device.disconnect_cs()
    except ZMQError as exc:
        MODULE_LOGGER.error(f&#34;{exc=}&#34;)</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.get_controller_fault"><code class="name flex">
<span>def <span class="ident">get_controller_fault</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_controller_fault(self):
    fault = self.device.get_controller_fault()

    # get_controller_fault response contains &#39;NO-ERROR&#39; if all good, and &#39;ERROR&#39; if there
    # was an error. The model will return True if there is a fault detected!

    return &#34;NO-ERROR&#34; not in fault</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.get_interlock"><code class="name flex">
<span>def <span class="ident">get_interlock</span></span>(<span>self) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_interlock(self) -&gt; bool:
    interlock = self.device.get_interlock()
    return &#34;ON&#34; in interlock</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.get_lamp_fault"><code class="name flex">
<span>def <span class="ident">get_lamp_fault</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_lamp_fault(self):
    fault = self.device.get_lamp_fault()

    # get_lamp_fault response contains &#39;NO-ERROR&#39; if all good, and &#39;ERROR&#39; if there
    # was an error. The model will return True if there is a fault detected!

    return &#34;NO-ERROR&#34; not in fault</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.get_laser"><code class="name flex">
<span>def <span class="ident">get_laser</span></span>(<span>self) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_laser(self) -&gt; bool:
    laser = self.device.get_laser()
    return &#34;ON&#34; in laser</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.get_ldls_status"><code class="name flex">
<span>def <span class="ident">get_ldls_status</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_ldls_status(self):
    ldls = self.device.ldls_status()
    return &#34;OK&#34; in ldls</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.get_operate"><code class="name flex">
<span>def <span class="ident">get_operate</span></span>(<span>self) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_operate(self) -&gt; bool:
    operate = self.device.get_operate()
    return &#34;ON&#34; in operate</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.get_power"><code class="name flex">
<span>def <span class="ident">get_power</span></span>(<span>self) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_power(self) -&gt; bool:
    power = self.device.get_power()
    return &#34;ON&#34; in power</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.is_cs_connected"><code class="name flex">
<span>def <span class="ident">is_cs_connected</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def is_cs_connected(self):
    # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.is_cs_connected()&#34;)
    return self.device.is_cs_connected()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.is_device_connected"><code class="name flex">
<span>def <span class="ident">is_device_connected</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def is_device_connected(self):
    # MODULE_LOGGER.info(f&#34;in {self.__class__.__name__}.is_device_connected()&#34;)
    response = self.device.is_connected()
    # MODULE_LOGGER.info(f&#34;{self.__class__.__name__}.device.is_connected() = {response}&#34;)
    return response if response is not None else False</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.is_simulator"><code class="name flex">
<span>def <span class="ident">is_simulator</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def is_simulator(self):
    return &#34;sim&#34; in self.device.version()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.operate_off"><code class="name flex">
<span>def <span class="ident">operate_off</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def operate_off(self):
    MODULE_LOGGER.debug(f&#34;in {self.__class__.__name__}.operate_off()&#34;)
    self.device.operate_off()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.operate_on"><code class="name flex">
<span>def <span class="ident">operate_on</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def operate_on(self):
    MODULE_LOGGER.debug(f&#34;in {self.__class__.__name__}.operate_on()&#34;)
    self.device.operate_on()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.pm_power_1"><code class="name flex">
<span>def <span class="ident">pm_power_1</span></span>(<span>self) ‑> float</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def pm_power_1(self) -&gt; float:
    status = self.device.status()
    return status[&#34;power1&#34;]</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.pm_power_2"><code class="name flex">
<span>def <span class="ident">pm_power_2</span></span>(<span>self) ‑> float</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def pm_power_2(self) -&gt; float:
    status = self.device.status()
    return status[&#34;power2&#34;]</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.pm_temperature_1"><code class="name flex">
<span>def <span class="ident">pm_temperature_1</span></span>(<span>self) ‑> float</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def pm_temperature_1(self) -&gt; float:
    status = self.device.status()
    return status[&#34;temp1&#34;]</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.pm_temperature_2"><code class="name flex">
<span>def <span class="ident">pm_temperature_2</span></span>(<span>self) ‑> float</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def pm_temperature_2(self) -&gt; float:
    status = self.device.status()
    return status[&#34;temp2&#34;]</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.power_off"><code class="name flex">
<span>def <span class="ident">power_off</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def power_off(self):
    MODULE_LOGGER.debug(f&#34;in {self.__class__.__name__}.power_off()&#34;)
    self.device.power_off()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.power_on"><code class="name flex">
<span>def <span class="ident">power_on</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def power_on(self):
    MODULE_LOGGER.debug(f&#34;in {self.__class__.__name__}.power_on()&#34;)
    self.device.power_on()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.reconnect_cs"><code class="name flex">
<span>def <span class="ident">reconnect_cs</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def reconnect_cs(self):
    self.device.reconnect_cs()
    return self.device.is_cs_connected()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.reconnect_device"><code class="name flex">
<span>def <span class="ident">reconnect_device</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def reconnect_device(self):
    self.device.reconnect()
    return self.device.is_connected()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.set_att_level"><code class="name flex">
<span>def <span class="ident">set_att_level</span></span>(<span>self, index: Optional[int] = None, factor: Optional[float] = None, position: Optional[Tuple[int, int]] = None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_att_level(
        self,
        index: Optional[int] = None,
        factor: Optional[float] = None,
        position: Optional[Tuple[int, int]] = None,
):
    MODULE_LOGGER.debug(f&#34;in {self.__class__.__name__}.set_att_level({index=}, &#34;
                       f&#34;{factor=}, {position=})&#34;)
    if index and factor and position:
        raise ValueError(f&#34;Only one of the keyword arguments can be provided, {index=}, &#34;
                         f&#34;{factor=}, {position=}&#34;)
    if index:
        self.device.att_set_level_index(index)
    if factor:
        self.device.att_set_level_factor(factor)
    if position:
        self.device.att_set_level_factor(factor)</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.set_attenuation_index"><code class="name flex">
<span>def <span class="ident">set_attenuation_index</span></span>(<span>self, index)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_attenuation_index(self, index):
    # MODULE_LOGGER.info(f&#34;set_attenuation_index to {index} ({type(index)=})&#34;)
    self.device.att_set_level_index(int(index))</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.OGSEUIModel.status"><code class="name flex">
<span>def <span class="ident">status</span></span>(<span>self) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Returns a dictionary with the following keys:</p>
<pre><code>'power', 'lamp', 'interlock', 'psu', 'att_moving', 'att_factor',
'att_index', 'power1', 'temp1', 'power2', 'temp2'
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def status(self) -&gt; dict:
    &#34;&#34;&#34;
    Returns a dictionary with the following keys:

        &#39;power&#39;, &#39;lamp&#39;, &#39;interlock&#39;, &#39;psu&#39;, &#39;att_moving&#39;, &#39;att_factor&#39;,
        &#39;att_index&#39;, &#39;power1&#39;, &#39;temp1&#39;, &#39;power2&#39;, &#39;temp2&#39;
    &#34;&#34;&#34;
    return self.device.status()</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.PowerMeterWidget"><code class="flex name class">
<span>class <span class="ident">PowerMeterWidget</span></span>
</code></dt>
<dd>
<div class="desc"><p>QWidget(parent: QWidget = None, flags: Union[Qt.WindowFlags, Qt.WindowType] = Qt.WindowFlags())</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class PowerMeterWidget(QWidget):
    def __init__(self):
        super().__init__()

        vbox = QVBoxLayout()

        self.title = QLabel(&#34;Power Meter&#34;)
        font = self.title.font()
        font.setPointSize(TITLE_FONT_SIZE)
        font.setBold(True)
        self.title.setFont(font)

        vbox.addWidget(self.title, alignment=QtCore.Qt.AlignHCenter)

        vbox_labels = QVBoxLayout()
        vbox_values_1 = QVBoxLayout()
        vbox_units_1 = QVBoxLayout()
        vbox_values_2 = QVBoxLayout()
        vbox_units_2 = QVBoxLayout()

        hbox = QHBoxLayout()

        self.power_meter_info = [
            [QLabel(&#34;PM1&#34;), QLabel(), QLabel(&#34;Watt&#34;), QLabel(), QLabel(&#34;ºC&#34;)],
            [QLabel(&#34;PM2&#34;), QLabel(), QLabel(&#34;Watt&#34;), QLabel(), QLabel(&#34;ºC&#34;)],
        ]

        for pw in self.power_meter_info:
            vbox_labels.addWidget(pw[0])

            vbox_values_1.addWidget(pw[1])
            pw[1].setStyleSheet(&#34;QLabel { background-color : White; }&#34;)
            pw[1].setAlignment(QtCore.Qt.AlignRight | QtCore.Qt.AlignVCenter)
            pw[1].setMinimumWidth(80)

            vbox_units_1.addWidget(pw[2])

            vbox_values_2.addWidget(pw[3])
            pw[3].setStyleSheet(&#34;QLabel { background-color : White; }&#34;)
            pw[3].setAlignment(QtCore.Qt.AlignRight | QtCore.Qt.AlignVCenter)
            pw[3].setMinimumWidth(80)

            vbox_units_2.addWidget(pw[4])

        # Make sure the labels stay nicely together when vertically resizing the Frame.
        for w in vbox_labels, vbox_values_1, vbox_units_1, vbox_values_2, vbox_units_2:
            w.addStretch(1)

        hbox.addLayout(vbox_labels)
        hbox.addLayout(vbox_values_1)
        hbox.addLayout(vbox_units_1)
        hbox.addLayout(vbox_values_2)
        hbox.addLayout(vbox_units_2)

        # Make sure the leds and labels stay nicely together when horizontally resizing the Frame.
        hbox.addStretch(1)

        gbox = QGroupBox(self)
        gbox.setLayout(hbox)

        vbox.addWidget(gbox)
        self.setLayout(vbox)

    @property
    def power_1(self) -&gt; str:
        return self.power_meter_info[0][1].text()

    @power_1.setter
    def power_1(self, value: str):
        self.power_meter_info[0][1].setText(value)

    @property
    def power_2(self) -&gt; str:
        return self.power_meter_info[1][1].text()

    @power_2.setter
    def power_2(self, value: str):
        self.power_meter_info[1][1].setText(value)

    @property
    def temp_1(self) -&gt; str:
        return self.power_meter_info[0][3].text()

    @temp_1.setter
    def temp_1(self, value: str):
        self.power_meter_info[0][3].setText(value)

    @property
    def temp_2(self) -&gt; str:
        return self.power_meter_info[1][3].text()

    @temp_2.setter
    def temp_2(self, value: str):
        self.power_meter_info[1][3].setText(value)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt5.QtWidgets.QWidget</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>PyQt5.QtGui.QPaintDevice</li>
<li>sip.simplewrapper</li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="egse.collimator.fcul.ogse_ui.PowerMeterWidget.power_1"><code class="name">var <span class="ident">power_1</span> : str</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def power_1(self) -&gt; str:
    return self.power_meter_info[0][1].text()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.PowerMeterWidget.power_2"><code class="name">var <span class="ident">power_2</span> : str</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def power_2(self) -&gt; str:
    return self.power_meter_info[1][1].text()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.PowerMeterWidget.temp_1"><code class="name">var <span class="ident">temp_1</span> : str</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def temp_1(self) -&gt; str:
    return self.power_meter_info[0][3].text()</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.PowerMeterWidget.temp_2"><code class="name">var <span class="ident">temp_2</span> : str</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def temp_2(self) -&gt; str:
    return self.power_meter_info[1][3].text()</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.StatusPuller"><code class="flex name class">
<span>class <span class="ident">StatusPuller</span></span>
<span>(</span><span>model: <a title="egse.collimator.fcul.ogse_ui.OGSEUIModel" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel">OGSEUIModel</a>)</span>
</code></dt>
<dd>
<div class="desc"><p>QRunnable()
QRunnable(QRunnable)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class StatusPuller(QRunnable):
    def __init__(self, model: OGSEUIModel):
        super().__init__()
        self.signals = StatusSignals()
        self.model = model
        self.quit_request = False

    @pyqtSlot()
    def run(self):
        while not self.quit_request:

            self.signals.dev.emit(self.model.is_device_connected())

            # Set all the status LEDs

            status = self.model.status()
            states = [
                Indic.GREEN if &#39;ON&#39; in status[&#34;interlock&#34;] else Indic.BLACK,
                Indic.GREEN if &#39;ON&#39; in status[&#34;power&#34;] else Indic.BLACK,
                Indic.GREEN if self.model.get_laser() else Indic.BLACK,
                Indic.GREEN if &#39;ON&#39; in status[&#34;lamp&#34;] else Indic.BLACK,
                Indic.GREEN if &#39;ON&#39; in status[&#34;psu&#34;] else Indic.BLACK,
                Indic.GREEN if self.model.get_ldls_status() else Indic.BLACK,
                Indic.ORANGE if status[&#34;att_moving&#34;] else Indic.BLACK,
            ]
            self.signals.states.emit(states)

            self.signals.pm.emit(
                {
                    &#34;power1&#34;: status[&#39;power1&#39;],
                    &#34;power2&#34;: status[&#39;power2&#39;],
                    &#34;temp1&#34;: status[&#39;temp1&#39;],
                    &#34;temp2&#34;: status[&#39;temp2&#39;],
                })

            # Set the fault detection on the lamp and controller

            faults = [
                Indic.RED if self.model.get_lamp_fault() else Indic.GREEN,
                Indic.RED if self.model.get_controller_fault() else Indic.GREEN,
            ]
            self.signals.faults.emit(faults)

            self.signals.att.emit([status[&#34;att_index&#34;], status[&#34;att_factor&#34;]])

    def quit(self):
        self.quit_request = True</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt5.QtCore.QRunnable</li>
<li>sip.wrapper</li>
<li>sip.simplewrapper</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="egse.collimator.fcul.ogse_ui.StatusPuller.quit"><code class="name flex">
<span>def <span class="ident">quit</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def quit(self):
    self.quit_request = True</code></pre>
</details>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.StatusPuller.run"><code class="name flex">
<span>def <span class="ident">run</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>run(self)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@pyqtSlot()
def run(self):
    while not self.quit_request:

        self.signals.dev.emit(self.model.is_device_connected())

        # Set all the status LEDs

        status = self.model.status()
        states = [
            Indic.GREEN if &#39;ON&#39; in status[&#34;interlock&#34;] else Indic.BLACK,
            Indic.GREEN if &#39;ON&#39; in status[&#34;power&#34;] else Indic.BLACK,
            Indic.GREEN if self.model.get_laser() else Indic.BLACK,
            Indic.GREEN if &#39;ON&#39; in status[&#34;lamp&#34;] else Indic.BLACK,
            Indic.GREEN if &#39;ON&#39; in status[&#34;psu&#34;] else Indic.BLACK,
            Indic.GREEN if self.model.get_ldls_status() else Indic.BLACK,
            Indic.ORANGE if status[&#34;att_moving&#34;] else Indic.BLACK,
        ]
        self.signals.states.emit(states)

        self.signals.pm.emit(
            {
                &#34;power1&#34;: status[&#39;power1&#39;],
                &#34;power2&#34;: status[&#39;power2&#39;],
                &#34;temp1&#34;: status[&#39;temp1&#39;],
                &#34;temp2&#34;: status[&#39;temp2&#39;],
            })

        # Set the fault detection on the lamp and controller

        faults = [
            Indic.RED if self.model.get_lamp_fault() else Indic.GREEN,
            Indic.RED if self.model.get_controller_fault() else Indic.GREEN,
        ]
        self.signals.faults.emit(faults)

        self.signals.att.emit([status[&#34;att_index&#34;], status[&#34;att_factor&#34;]])</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.StatusSignals"><code class="flex name class">
<span>class <span class="ident">StatusSignals</span></span>
<span>(</span><span>*args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>QObject(parent: QObject = None)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class StatusSignals(QObject):
    states = pyqtSignal(list)
    faults = pyqtSignal(list)
    att = pyqtSignal(list)
    dev = pyqtSignal(bool)
    pm = pyqtSignal(dict)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>sip.simplewrapper</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="egse.collimator.fcul.ogse_ui.StatusSignals.att"><code class="name flex">
<span>def <span class="ident">att</span></span>(<span>...)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.StatusSignals.dev"><code class="name flex">
<span>def <span class="ident">dev</span></span>(<span>...)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.StatusSignals.faults"><code class="name flex">
<span>def <span class="ident">faults</span></span>(<span>...)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.StatusSignals.pm"><code class="name flex">
<span>def <span class="ident">pm</span></span>(<span>...)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.StatusSignals.states"><code class="name flex">
<span>def <span class="ident">states</span></span>(<span>...)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="egse.collimator.fcul.ogse_ui.StatusWidget"><code class="flex name class">
<span>class <span class="ident">StatusWidget</span></span>
</code></dt>
<dd>
<div class="desc"><p>QWidget(parent: QWidget = None, flags: Union[Qt.WindowFlags, Qt.WindowType] = Qt.WindowFlags())</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class StatusWidget(QWidget):
    def __init__(self):
        super().__init__()

        vbox = QVBoxLayout()

        self.title = QLabel(&#34;Status&#34;)
        font = self.title.font()
        font.setPointSize(TITLE_FONT_SIZE)
        font.setBold(True)
        self.title.setFont(font)

        self.states = States(STATES, shape=ShapeEnum.SQUARE, title=None)

        vbox.addWidget(self.title, alignment=QtCore.Qt.AlignHCenter)
        vbox.addWidget(self.states)

        self.setLayout(vbox)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt5.QtWidgets.QWidget</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>PyQt5.QtGui.QPaintDevice</li>
<li>sip.simplewrapper</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="egse.collimator.fcul" href="index.html">egse.collimator.fcul</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="egse.collimator.fcul.ogse_ui.main" href="#egse.collimator.fcul.ogse_ui.main">main</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="egse.collimator.fcul.ogse_ui.AttenuationWidget" href="#egse.collimator.fcul.ogse_ui.AttenuationWidget">AttenuationWidget</a></code></h4>
</li>
<li>
<h4><code><a title="egse.collimator.fcul.ogse_ui.CommandWidget" href="#egse.collimator.fcul.ogse_ui.CommandWidget">CommandWidget</a></code></h4>
<ul class="">
<li><code><a title="egse.collimator.fcul.ogse_ui.CommandWidget.disable_commanding" href="#egse.collimator.fcul.ogse_ui.CommandWidget.disable_commanding">disable_commanding</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.CommandWidget.enable_commanding" href="#egse.collimator.fcul.ogse_ui.CommandWidget.enable_commanding">enable_commanding</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.CommandWidget.on_click" href="#egse.collimator.fcul.ogse_ui.CommandWidget.on_click">on_click</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.CommandWidget.on_press" href="#egse.collimator.fcul.ogse_ui.CommandWidget.on_press">on_press</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.CommandWidget.slider_moved" href="#egse.collimator.fcul.ogse_ui.CommandWidget.slider_moved">slider_moved</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.CommandWidget.slider_pressed" href="#egse.collimator.fcul.ogse_ui.CommandWidget.slider_pressed">slider_pressed</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.CommandWidget.slider_released" href="#egse.collimator.fcul.ogse_ui.CommandWidget.slider_released">slider_released</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.CommandWidget.slider_value_changed" href="#egse.collimator.fcul.ogse_ui.CommandWidget.slider_value_changed">slider_value_changed</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.collimator.fcul.ogse_ui.ConfirmationBox" href="#egse.collimator.fcul.ogse_ui.ConfirmationBox">ConfirmationBox</a></code></h4>
</li>
<li>
<h4><code><a title="egse.collimator.fcul.ogse_ui.FaultsWidget" href="#egse.collimator.fcul.ogse_ui.FaultsWidget">FaultsWidget</a></code></h4>
</li>
<li>
<h4><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView">OGSEGUIView</a></code></h4>
<ul class="">
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView.check_cs_action" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView.check_cs_action">check_cs_action</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView.check_device_action" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView.check_device_action">check_device_action</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView.closeEvent" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView.closeEvent">closeEvent</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView.create_status_bar" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView.create_status_bar">create_status_bar</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView.create_toolbar" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView.create_toolbar">create_toolbar</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView.disable_cs_action" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView.disable_cs_action">disable_cs_action</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView.enable_cs_action" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView.enable_cs_action">enable_cs_action</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView.is_cs_action_enabled" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView.is_cs_action_enabled">is_cs_action_enabled</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView.on_click" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView.on_click">on_click</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView.on_press" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView.on_press">on_press</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView.set_connection_state" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView.set_connection_state">set_connection_state</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView.start_pulling_status" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView.start_pulling_status">start_pulling_status</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView.uncheck_cs_action" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView.uncheck_cs_action">uncheck_cs_action</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView.uncheck_device_action" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView.uncheck_device_action">uncheck_device_action</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView.update_status_bar" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView.update_status_bar">update_status_bar</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView.worker_att" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView.worker_att">worker_att</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView.worker_dev" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView.worker_dev">worker_dev</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView.worker_faults" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView.worker_faults">worker_faults</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView.worker_pm" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView.worker_pm">worker_pm</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEGUIView.worker_states" href="#egse.collimator.fcul.ogse_ui.OGSEGUIView.worker_states">worker_states</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.collimator.fcul.ogse_ui.OGSETUIView" href="#egse.collimator.fcul.ogse_ui.OGSETUIView">OGSETUIView</a></code></h4>
</li>
<li>
<h4><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIController" href="#egse.collimator.fcul.ogse_ui.OGSEUIController">OGSEUIController</a></code></h4>
<ul class="two-column">
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIController.create_timer" href="#egse.collimator.fcul.ogse_ui.OGSEUIController.create_timer">create_timer</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIController.do" href="#egse.collimator.fcul.ogse_ui.OGSEUIController.do">do</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIController.has_connection" href="#egse.collimator.fcul.ogse_ui.OGSEUIController.has_connection">has_connection</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIController.start_timer" href="#egse.collimator.fcul.ogse_ui.OGSEUIController.start_timer">start_timer</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIController.stop_timer" href="#egse.collimator.fcul.ogse_ui.OGSEUIController.stop_timer">stop_timer</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIController.update" href="#egse.collimator.fcul.ogse_ui.OGSEUIController.update">update</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIController.update_state" href="#egse.collimator.fcul.ogse_ui.OGSEUIController.update_state">update_state</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel">OGSEUIModel</a></code></h4>
<ul class="">
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.disconnect" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.disconnect">disconnect</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.disconnect_cs" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.disconnect_cs">disconnect_cs</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.get_controller_fault" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.get_controller_fault">get_controller_fault</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.get_interlock" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.get_interlock">get_interlock</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.get_lamp_fault" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.get_lamp_fault">get_lamp_fault</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.get_laser" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.get_laser">get_laser</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.get_ldls_status" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.get_ldls_status">get_ldls_status</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.get_operate" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.get_operate">get_operate</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.get_power" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.get_power">get_power</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.is_cs_connected" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.is_cs_connected">is_cs_connected</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.is_device_connected" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.is_device_connected">is_device_connected</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.is_simulator" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.is_simulator">is_simulator</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.operate_off" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.operate_off">operate_off</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.operate_on" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.operate_on">operate_on</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.pm_power_1" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.pm_power_1">pm_power_1</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.pm_power_2" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.pm_power_2">pm_power_2</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.pm_temperature_1" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.pm_temperature_1">pm_temperature_1</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.pm_temperature_2" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.pm_temperature_2">pm_temperature_2</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.power_off" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.power_off">power_off</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.power_on" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.power_on">power_on</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.reconnect_cs" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.reconnect_cs">reconnect_cs</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.reconnect_device" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.reconnect_device">reconnect_device</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.set_att_level" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.set_att_level">set_att_level</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.set_attenuation_index" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.set_attenuation_index">set_attenuation_index</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.OGSEUIModel.status" href="#egse.collimator.fcul.ogse_ui.OGSEUIModel.status">status</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.collimator.fcul.ogse_ui.PowerMeterWidget" href="#egse.collimator.fcul.ogse_ui.PowerMeterWidget">PowerMeterWidget</a></code></h4>
<ul class="">
<li><code><a title="egse.collimator.fcul.ogse_ui.PowerMeterWidget.power_1" href="#egse.collimator.fcul.ogse_ui.PowerMeterWidget.power_1">power_1</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.PowerMeterWidget.power_2" href="#egse.collimator.fcul.ogse_ui.PowerMeterWidget.power_2">power_2</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.PowerMeterWidget.temp_1" href="#egse.collimator.fcul.ogse_ui.PowerMeterWidget.temp_1">temp_1</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.PowerMeterWidget.temp_2" href="#egse.collimator.fcul.ogse_ui.PowerMeterWidget.temp_2">temp_2</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.collimator.fcul.ogse_ui.StatusPuller" href="#egse.collimator.fcul.ogse_ui.StatusPuller">StatusPuller</a></code></h4>
<ul class="">
<li><code><a title="egse.collimator.fcul.ogse_ui.StatusPuller.quit" href="#egse.collimator.fcul.ogse_ui.StatusPuller.quit">quit</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.StatusPuller.run" href="#egse.collimator.fcul.ogse_ui.StatusPuller.run">run</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.collimator.fcul.ogse_ui.StatusSignals" href="#egse.collimator.fcul.ogse_ui.StatusSignals">StatusSignals</a></code></h4>
<ul class="">
<li><code><a title="egse.collimator.fcul.ogse_ui.StatusSignals.att" href="#egse.collimator.fcul.ogse_ui.StatusSignals.att">att</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.StatusSignals.dev" href="#egse.collimator.fcul.ogse_ui.StatusSignals.dev">dev</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.StatusSignals.faults" href="#egse.collimator.fcul.ogse_ui.StatusSignals.faults">faults</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.StatusSignals.pm" href="#egse.collimator.fcul.ogse_ui.StatusSignals.pm">pm</a></code></li>
<li><code><a title="egse.collimator.fcul.ogse_ui.StatusSignals.states" href="#egse.collimator.fcul.ogse_ui.StatusSignals.states">states</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.collimator.fcul.ogse_ui.StatusWidget" href="#egse.collimator.fcul.ogse_ui.StatusWidget">StatusWidget</a></code></h4>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>