<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>egse.stages.aerotech.ensemble_controller API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>egse.stages.aerotech.ensemble_controller</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import logging
import time
from functools import partial
from enum import IntEnum

from numpy import sqrt, degrees, arccos, cos, radians
from egse.socketdevice import SocketDevice
from egse.command import Command
from egse.settings import Settings
from egse.state import GlobalState
from egse.setup import get_setup
from egse.stages.aerotech.ensemble_parameters import EnsembleParameter
from egse.stages.aerotech.ensemble_interface import EnsembleInterface

logger = logging.getLogger(__name__)

# Load the device settings from the global common-egse config file
DEVICE_SETTINGS = Settings.load(&#34;Aerotech Ensemble Controller&#34;)

# Load the device protocol
DEVICE_PROTOCOL = Settings.load(filename=&#39;ensemble.yaml&#39;)[&#39;Commands&#39;]


class EnsembleException(Exception):
    pass


class EnsembleController(SocketDevice, EnsembleInterface):
    def __init__(self, hostname=None, port=None):

        # Load device configuration from the common-egse global config file
        self._hostname      = DEVICE_SETTINGS.HOSTNAME if hostname is None else hostname
        self._port          = DEVICE_SETTINGS.PORT if port is None else port
        

        # Create a dict of Command objects for each function
        self._commands = {}
        for name, items in DEVICE_PROTOCOL.items():
            if &#39;cmd&#39; in items:
                self._commands[name] = Command(name, items[&#39;cmd&#39;])

        # Get the movement speed from the setup
        setup = get_setup()
        self.speed = setup.gse.ensemble.maximum_speed
        self.limit = setup.gse.ensemble.limit
        
        self.limits         = {&#39;X&#39;: [(0 - self.limit), self.limit], &#39;Y&#39;: [(0 - self.limit), self.limit]}
        # Initialize the parent class with the port and baudrate
        super().__init__(hostname=self._hostname, port=self._port, timeout=10000)
        self.connect()


    def get_idn(self):
        return self.query(self._commands[&#39;get_idn&#39;].get_cmd_string())


    def reset(self):
        return self.query(self._commands[&#39;reset&#39;].get_cmd_string())


    def abort(self):
        return self.query(self._commands[&#39;abort&#39;].get_cmd_string())


    def clear_errors(self):
        return self.query(self._commands[&#39;clear_errors&#39;].get_cmd_string())


    def get_status(self, axis):
        status = self.query(self._commands[&#39;get_status&#39;].get_cmd_string(axis=axis))
        return int(status) &amp; 0xFFFFFFFF # turn into unsigned


    def get_fault(self, axis):
        fault = self.query(self._commands[&#39;get_fault&#39;].get_cmd_string(axis=axis))
        return int(fault) &amp; 0xFFFFFFFF # turn into unsigned


    def set_blocking(self, axis, enable):
        enable_string = &#39;ON&#39; if enable else &#39;OFF&#39;
        return self.query(self._commands[&#39;set_blocking&#39;].get_cmd_string(
            axis=axis, enable=enable_string))

    def get_command_position(self, axis):
        return float(self.query(self._commands[&#39;get_command_position&#39;].get_cmd_string(axis=axis)))

    def get_actual_position(self, axis):
        return float(self.query(self._commands[&#39;get_actual_position&#39;].get_cmd_string(axis=axis)))

    def get_error_position(self, axis):
        return float(self.query(self._commands[&#39;get_error_position&#39;].get_cmd_string(axis=axis)))

    def get_command_velocity(self, axis):
        return float(self.query(self._commands[&#39;get_command_velocity&#39;].get_cmd_string(axis=axis)))

    def get_actual_velocity(self, axis):
        return float(self.query(self._commands[&#39;get_actual_velocity&#39;].get_cmd_string(axis=axis)))

    def get_command_current(self, axis):
        return float(self.query(self._commands[&#39;get_command_current&#39;].get_cmd_string(axis=axis)))

    def get_actual_current(self, axis):
        return float(self.query(self._commands[&#39;get_actual_current&#39;].get_cmd_string(axis=axis)))

    def enable_axis(self, axis):
        logger.info(f&#34;Enabeling the {axis} axis&#34;)
        return self.query(f&#34;ENABLE {axis}\n&#34;)

    def disable_axis(self, axis):
        logger.info(f&#34;Disabeling the {axis} axis&#34;)
        return self.query(f&#34;DISABLE {axis}\n&#34;)

    def set_absolute(self):
        return self.query(self._commands[&#39;set_absolute&#39;].get_cmd_string())

    def set_incremental(self):
        return self.query(self._commands[&#39;set_incremental&#39;].get_cmd_string())

    def move_axis_degrees(self, axis, position):
        if not self.is_homed(axis):
            logger.warning(&#34;The gimbal has not been homed&#34;)
            raise EnsembleException(f&#39;axis {axis} is not homed&#39;)

        if not (self.limits[axis][0] &lt;= position &lt;= self.limits[axis][1]):
            logger.warning(&#34;Move denied: Position out of limit&#34;)
            raise EnsembleException(f&#39;position {axis} outside limits\
                {self.limits[axis][0]} &lt;= {position} &lt;= {self.limits[axis][1]}&#39;)

        logger.info(f&#34;Moving {axis} axis to {position}&#34;)

        self.query(f&#34;MOVEABS {axis} {position} {axis}F {self.speed}\n&#34;)

    def move_axes_degrees(self, position_x, position_y):
        if not self.is_homed(&#39;X&#39;) or not self.is_homed(&#39;Y&#39;):
            logger.warning(&#34;The gimbal has not been homed&#34;)
            raise EnsembleException(f&#39;not all axes are homed&#39;)

        if not (self.limits[&#39;X&#39;][0] &lt;= position_x &lt;= self.limits[&#39;X&#39;][1]):
            logger.warning(&#34;Move denied: X Position out of limit&#34;)
            raise EnsembleException(f&#34;position X outside limits \
                {self.limits[&#39;X&#39;][0]} &lt;= {position_x} &lt;= {self.limits[&#39;X&#39;][1]}&#34;)

        if not (self.limits[&#39;Y&#39;][0] &lt;= position_y &lt;= self.limits[&#39;Y&#39;][1]):
            logger.warning(&#34;Move denied: Y Position out of limit&#34;)
            raise EnsembleException(f&#34;position Y outside limits \
                {self.limits[&#39;Y&#39;][0]} &lt;= {position_y} &lt;= {self.limits[&#39;Y&#39;][1]}&#34;)

        radius = degrees(arccos(cos(radians(position_x)) * cos(radians(position_y))))

        # Due to rounding errors, we have to round the radius as well
        radius = round(radius, 6)
        
        logger.info(f&#34;Radial distance is: {radius}&#34;)
      
        if not (radius &lt;= self.limit):
            logger.warning(&#34;Move denied: radial distance out of limit&#34;)
            raise EnsembleException(f&#34;Command is outside allowed radial distance \
                {radius} &lt;= {self.limit}&#34;)                

        logger.info(f&#34;Moving Y to {position_y} and X to {position_x}&#34;)

        self.query(f&#34;MOVEABS X {position_x} Y {position_y} XF {self.speed} YF {self.speed}\n&#34;)


    def home_axis(self, axis):
        if self.is_homed(axis):
            logger.info(&#34;Gimbal has already been homed&#34;)
            return

        logger.info(f&#34;Homing the {axis} axis...&#34;)

        self.query(f&#34;HOME {axis}\n&#34;)

        logger.info(f&#34;{axis} axis has been homed&#34;)


    def home_axes(self):
        if self.is_homed(&#39;Y&#39;) and self.is_homed(&#39;X&#39;):
            logger.info(&#34;Gimbal was already homed&#34;)
            return

        logger.info(f&#34;Homing both axis&#34;)

        self.query(f&#34;HOME Y\n&#34;)

        self.query(f&#34;HOME X\n&#34;)

        logger.info(f&#34;Homing complete&#34;)

    def is_moving(self, axis):
        return bool(self.get_status(axis) &amp; 0x08)

    def is_homed(self, axis):
        return bool(self.get_status(axis) &amp; 0x02)

    def get_parameter(self, paramId: EnsembleParameter):
        return int(self.query(self._commands[&#39;get_parameter&#39;].get_cmd_string(index=paramId)))

    def set_parameter(self, paramId: EnsembleParameter, value):
        return self.query(self._commands[&#39;set_parameter&#39;].get_cmd_string(index=paramId, value=value))

    def print_status(self):
        &#34;&#34;&#34; Pretty print the status word. &#34;&#34;&#34;
        status = self.get_status(&#39;X&#39;)
        print(&#39;STATUS:&#39;)
        print(f&#39;\t{&#34;Enabled&#34;:20s}: {bool(status &amp; 0x00000001)}&#39;)
        print(f&#39;\t{&#34;Homed&#34;:20s}: {bool(status &amp; 0x00000002)}&#39;)
        print(f&#39;\t{&#34;InPosition&#34;:20s}: {bool(status &amp; 0x00000004)}&#39;)
        print(f&#39;\t{&#34;MoveActive&#34;:20s}: {bool(status &amp; 0x00000008)}&#39;)
        print(f&#39;\t{&#34;AccelPhase&#34;:20s}: {bool(status &amp; 0x00000010)}&#39;)
        print(f&#39;\t{&#34;DecelPhase&#34;:20s}: {bool(status &amp; 0x00000020)}&#39;)
        print(f&#39;\t{&#34;PositionCapture&#34;:20s}: {bool(status &amp; 0x00000040)}&#39;)
        print(f&#39;\t{&#34;CurrentClamp&#34;:20s}: {bool(status &amp; 0x00000080)}&#39;)
        print(f&#39;\t{&#34;BrakeOutput&#34;:20s}: {bool(status &amp; 0x00000100)}&#39;)
        print(f&#39;\t{&#34;MotionIsCw&#34;:20s}: {bool(status &amp; 0x00000200)}&#39;)
        print(f&#39;\t{&#34;MasterSlaveControl&#34;:20s}: {bool(status &amp; 0x0000400)}&#39;)
        print(f&#39;\t{&#34;CalActive&#34;:20s}: {bool(status &amp; 0x00000800)}&#39;)
        print(f&#39;\t{&#34;CallEnabled&#34;:20s}: {bool(status &amp; 0x00001000)}&#39;)
        print(f&#39;\t{&#34;JoystickControl&#34;:20s}: {bool(status &amp; 0x0002000)}&#39;)
        print(f&#39;\t{&#34;Homing&#34;:20s}: {bool(status &amp; 0x00004000)}&#39;)
        print(f&#39;\t{&#34;MasterSupress&#34;:20s}: {bool(status &amp; 0x00008000)}&#39;)
        print(f&#39;\t{&#34;GantryActive&#34;:20s}: {bool(status &amp; 0x00010000)}&#39;)
        print(f&#39;\t{&#34;GantryMaster&#34;:20s}: {bool(status &amp; 0x00020000)}&#39;)
        print(f&#39;\t{&#34;AutoFocusActive&#34;:20s}: {bool(status &amp; 0x00040000)}&#39;)
        print(f&#39;\t{&#34;CommandFilterDone&#34;:20s}: {bool(status &amp; 0x00080000)}&#39;)
        print(f&#39;\t{&#34;InPosition2&#34;:20s}: {bool(status &amp; 0x00100000)}&#39;)
        print(f&#39;\t{&#34;ServoControl&#34;:20s}: {bool(status &amp; 0x002000000)}&#39;)
        print(f&#39;\t{&#34;CwEOTLimit&#34;:20s}: {bool(status &amp; 0x004000000)}&#39;)
        print(f&#39;\t{&#34;CcwEOTLimit&#34;:20s}: {bool(status &amp; 0x008000000)}&#39;)
        print(f&#39;\t{&#34;HomeLimit&#34;:20s}: {bool(status &amp; 0x01000000)}&#39;)
        print(f&#39;\t{&#34;MarkerInput&#34;:20s}: {bool(status &amp; 0x02000000)}&#39;)
        print(f&#39;\t{&#34;HallAInput&#34;:20s}: {bool(status &amp; 0x04000000)}&#39;)
        print(f&#39;\t{&#34;HallBInput&#34;:20s}: {bool(status &amp; 0x08000000)}&#39;)
        print(f&#39;\t{&#34;HallCInput&#34;:20s}: {bool(status &amp; 0x10000000)}&#39;)
        print(f&#39;\t{&#34;SineEncoderError&#34;:20s}: {bool(status &amp; 0x20000000)}&#39;)
        print(f&#39;\t{&#34;CosineEncoderError&#34;:20s}: {bool(status &amp; 0x40000000)}&#39;)
        print(f&#39;\t{&#34;ESTOPInput&#34;:20s}: {bool(status &amp; 0x80000000)}&#39;)

    def query(self, command: str):
        &#34;&#34;&#34; Override the parent class to do some error checking on the response. &#34;&#34;&#34;

        # print(command)

        response = super().query(command)

        # print(response)

        if response[-1] != &#39;\n&#39;:
            raise ConnectionError(f&#34;Invalid termination character in response: {response}&#34;)
        elif response[0] == &#39;!&#39;:
            raise ConnectionError(f&#34;Command invalid error for command: {command}&#34;)
        elif response[0] == &#39;#&#39;:
            raise ConnectionError(f&#34;Command fault error for command: {command}&#34;)
        elif response[0] != &#39;%&#39;:
            raise ConnectionError(f&#34;Invalid starting character in response: {response}&#34;)
        elif len(response[:-1]) &gt; 1:
            return response[1:-1]
        else:
            return None
        
if __name__ == &#34;__main__&#34;:
    ens = EnsembleController()
    ens.get_idn()
    
    ens.move_axes_degrees(14, 13, True)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController"><code class="flex name class">
<span>class <span class="ident">EnsembleController</span></span>
<span>(</span><span>hostname=None, port=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Generic base class for socket based device interface classes.</p>
<p>This base class handles the socket connection.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class EnsembleController(SocketDevice, EnsembleInterface):
    def __init__(self, hostname=None, port=None):

        # Load device configuration from the common-egse global config file
        self._hostname      = DEVICE_SETTINGS.HOSTNAME if hostname is None else hostname
        self._port          = DEVICE_SETTINGS.PORT if port is None else port
        

        # Create a dict of Command objects for each function
        self._commands = {}
        for name, items in DEVICE_PROTOCOL.items():
            if &#39;cmd&#39; in items:
                self._commands[name] = Command(name, items[&#39;cmd&#39;])

        # Get the movement speed from the setup
        setup = get_setup()
        self.speed = setup.gse.ensemble.maximum_speed
        self.limit = setup.gse.ensemble.limit
        
        self.limits         = {&#39;X&#39;: [(0 - self.limit), self.limit], &#39;Y&#39;: [(0 - self.limit), self.limit]}
        # Initialize the parent class with the port and baudrate
        super().__init__(hostname=self._hostname, port=self._port, timeout=10000)
        self.connect()


    def get_idn(self):
        return self.query(self._commands[&#39;get_idn&#39;].get_cmd_string())


    def reset(self):
        return self.query(self._commands[&#39;reset&#39;].get_cmd_string())


    def abort(self):
        return self.query(self._commands[&#39;abort&#39;].get_cmd_string())


    def clear_errors(self):
        return self.query(self._commands[&#39;clear_errors&#39;].get_cmd_string())


    def get_status(self, axis):
        status = self.query(self._commands[&#39;get_status&#39;].get_cmd_string(axis=axis))
        return int(status) &amp; 0xFFFFFFFF # turn into unsigned


    def get_fault(self, axis):
        fault = self.query(self._commands[&#39;get_fault&#39;].get_cmd_string(axis=axis))
        return int(fault) &amp; 0xFFFFFFFF # turn into unsigned


    def set_blocking(self, axis, enable):
        enable_string = &#39;ON&#39; if enable else &#39;OFF&#39;
        return self.query(self._commands[&#39;set_blocking&#39;].get_cmd_string(
            axis=axis, enable=enable_string))

    def get_command_position(self, axis):
        return float(self.query(self._commands[&#39;get_command_position&#39;].get_cmd_string(axis=axis)))

    def get_actual_position(self, axis):
        return float(self.query(self._commands[&#39;get_actual_position&#39;].get_cmd_string(axis=axis)))

    def get_error_position(self, axis):
        return float(self.query(self._commands[&#39;get_error_position&#39;].get_cmd_string(axis=axis)))

    def get_command_velocity(self, axis):
        return float(self.query(self._commands[&#39;get_command_velocity&#39;].get_cmd_string(axis=axis)))

    def get_actual_velocity(self, axis):
        return float(self.query(self._commands[&#39;get_actual_velocity&#39;].get_cmd_string(axis=axis)))

    def get_command_current(self, axis):
        return float(self.query(self._commands[&#39;get_command_current&#39;].get_cmd_string(axis=axis)))

    def get_actual_current(self, axis):
        return float(self.query(self._commands[&#39;get_actual_current&#39;].get_cmd_string(axis=axis)))

    def enable_axis(self, axis):
        logger.info(f&#34;Enabeling the {axis} axis&#34;)
        return self.query(f&#34;ENABLE {axis}\n&#34;)

    def disable_axis(self, axis):
        logger.info(f&#34;Disabeling the {axis} axis&#34;)
        return self.query(f&#34;DISABLE {axis}\n&#34;)

    def set_absolute(self):
        return self.query(self._commands[&#39;set_absolute&#39;].get_cmd_string())

    def set_incremental(self):
        return self.query(self._commands[&#39;set_incremental&#39;].get_cmd_string())

    def move_axis_degrees(self, axis, position):
        if not self.is_homed(axis):
            logger.warning(&#34;The gimbal has not been homed&#34;)
            raise EnsembleException(f&#39;axis {axis} is not homed&#39;)

        if not (self.limits[axis][0] &lt;= position &lt;= self.limits[axis][1]):
            logger.warning(&#34;Move denied: Position out of limit&#34;)
            raise EnsembleException(f&#39;position {axis} outside limits\
                {self.limits[axis][0]} &lt;= {position} &lt;= {self.limits[axis][1]}&#39;)

        logger.info(f&#34;Moving {axis} axis to {position}&#34;)

        self.query(f&#34;MOVEABS {axis} {position} {axis}F {self.speed}\n&#34;)

    def move_axes_degrees(self, position_x, position_y):
        if not self.is_homed(&#39;X&#39;) or not self.is_homed(&#39;Y&#39;):
            logger.warning(&#34;The gimbal has not been homed&#34;)
            raise EnsembleException(f&#39;not all axes are homed&#39;)

        if not (self.limits[&#39;X&#39;][0] &lt;= position_x &lt;= self.limits[&#39;X&#39;][1]):
            logger.warning(&#34;Move denied: X Position out of limit&#34;)
            raise EnsembleException(f&#34;position X outside limits \
                {self.limits[&#39;X&#39;][0]} &lt;= {position_x} &lt;= {self.limits[&#39;X&#39;][1]}&#34;)

        if not (self.limits[&#39;Y&#39;][0] &lt;= position_y &lt;= self.limits[&#39;Y&#39;][1]):
            logger.warning(&#34;Move denied: Y Position out of limit&#34;)
            raise EnsembleException(f&#34;position Y outside limits \
                {self.limits[&#39;Y&#39;][0]} &lt;= {position_y} &lt;= {self.limits[&#39;Y&#39;][1]}&#34;)

        radius = degrees(arccos(cos(radians(position_x)) * cos(radians(position_y))))

        # Due to rounding errors, we have to round the radius as well
        radius = round(radius, 6)
        
        logger.info(f&#34;Radial distance is: {radius}&#34;)
      
        if not (radius &lt;= self.limit):
            logger.warning(&#34;Move denied: radial distance out of limit&#34;)
            raise EnsembleException(f&#34;Command is outside allowed radial distance \
                {radius} &lt;= {self.limit}&#34;)                

        logger.info(f&#34;Moving Y to {position_y} and X to {position_x}&#34;)

        self.query(f&#34;MOVEABS X {position_x} Y {position_y} XF {self.speed} YF {self.speed}\n&#34;)


    def home_axis(self, axis):
        if self.is_homed(axis):
            logger.info(&#34;Gimbal has already been homed&#34;)
            return

        logger.info(f&#34;Homing the {axis} axis...&#34;)

        self.query(f&#34;HOME {axis}\n&#34;)

        logger.info(f&#34;{axis} axis has been homed&#34;)


    def home_axes(self):
        if self.is_homed(&#39;Y&#39;) and self.is_homed(&#39;X&#39;):
            logger.info(&#34;Gimbal was already homed&#34;)
            return

        logger.info(f&#34;Homing both axis&#34;)

        self.query(f&#34;HOME Y\n&#34;)

        self.query(f&#34;HOME X\n&#34;)

        logger.info(f&#34;Homing complete&#34;)

    def is_moving(self, axis):
        return bool(self.get_status(axis) &amp; 0x08)

    def is_homed(self, axis):
        return bool(self.get_status(axis) &amp; 0x02)

    def get_parameter(self, paramId: EnsembleParameter):
        return int(self.query(self._commands[&#39;get_parameter&#39;].get_cmd_string(index=paramId)))

    def set_parameter(self, paramId: EnsembleParameter, value):
        return self.query(self._commands[&#39;set_parameter&#39;].get_cmd_string(index=paramId, value=value))

    def print_status(self):
        &#34;&#34;&#34; Pretty print the status word. &#34;&#34;&#34;
        status = self.get_status(&#39;X&#39;)
        print(&#39;STATUS:&#39;)
        print(f&#39;\t{&#34;Enabled&#34;:20s}: {bool(status &amp; 0x00000001)}&#39;)
        print(f&#39;\t{&#34;Homed&#34;:20s}: {bool(status &amp; 0x00000002)}&#39;)
        print(f&#39;\t{&#34;InPosition&#34;:20s}: {bool(status &amp; 0x00000004)}&#39;)
        print(f&#39;\t{&#34;MoveActive&#34;:20s}: {bool(status &amp; 0x00000008)}&#39;)
        print(f&#39;\t{&#34;AccelPhase&#34;:20s}: {bool(status &amp; 0x00000010)}&#39;)
        print(f&#39;\t{&#34;DecelPhase&#34;:20s}: {bool(status &amp; 0x00000020)}&#39;)
        print(f&#39;\t{&#34;PositionCapture&#34;:20s}: {bool(status &amp; 0x00000040)}&#39;)
        print(f&#39;\t{&#34;CurrentClamp&#34;:20s}: {bool(status &amp; 0x00000080)}&#39;)
        print(f&#39;\t{&#34;BrakeOutput&#34;:20s}: {bool(status &amp; 0x00000100)}&#39;)
        print(f&#39;\t{&#34;MotionIsCw&#34;:20s}: {bool(status &amp; 0x00000200)}&#39;)
        print(f&#39;\t{&#34;MasterSlaveControl&#34;:20s}: {bool(status &amp; 0x0000400)}&#39;)
        print(f&#39;\t{&#34;CalActive&#34;:20s}: {bool(status &amp; 0x00000800)}&#39;)
        print(f&#39;\t{&#34;CallEnabled&#34;:20s}: {bool(status &amp; 0x00001000)}&#39;)
        print(f&#39;\t{&#34;JoystickControl&#34;:20s}: {bool(status &amp; 0x0002000)}&#39;)
        print(f&#39;\t{&#34;Homing&#34;:20s}: {bool(status &amp; 0x00004000)}&#39;)
        print(f&#39;\t{&#34;MasterSupress&#34;:20s}: {bool(status &amp; 0x00008000)}&#39;)
        print(f&#39;\t{&#34;GantryActive&#34;:20s}: {bool(status &amp; 0x00010000)}&#39;)
        print(f&#39;\t{&#34;GantryMaster&#34;:20s}: {bool(status &amp; 0x00020000)}&#39;)
        print(f&#39;\t{&#34;AutoFocusActive&#34;:20s}: {bool(status &amp; 0x00040000)}&#39;)
        print(f&#39;\t{&#34;CommandFilterDone&#34;:20s}: {bool(status &amp; 0x00080000)}&#39;)
        print(f&#39;\t{&#34;InPosition2&#34;:20s}: {bool(status &amp; 0x00100000)}&#39;)
        print(f&#39;\t{&#34;ServoControl&#34;:20s}: {bool(status &amp; 0x002000000)}&#39;)
        print(f&#39;\t{&#34;CwEOTLimit&#34;:20s}: {bool(status &amp; 0x004000000)}&#39;)
        print(f&#39;\t{&#34;CcwEOTLimit&#34;:20s}: {bool(status &amp; 0x008000000)}&#39;)
        print(f&#39;\t{&#34;HomeLimit&#34;:20s}: {bool(status &amp; 0x01000000)}&#39;)
        print(f&#39;\t{&#34;MarkerInput&#34;:20s}: {bool(status &amp; 0x02000000)}&#39;)
        print(f&#39;\t{&#34;HallAInput&#34;:20s}: {bool(status &amp; 0x04000000)}&#39;)
        print(f&#39;\t{&#34;HallBInput&#34;:20s}: {bool(status &amp; 0x08000000)}&#39;)
        print(f&#39;\t{&#34;HallCInput&#34;:20s}: {bool(status &amp; 0x10000000)}&#39;)
        print(f&#39;\t{&#34;SineEncoderError&#34;:20s}: {bool(status &amp; 0x20000000)}&#39;)
        print(f&#39;\t{&#34;CosineEncoderError&#34;:20s}: {bool(status &amp; 0x40000000)}&#39;)
        print(f&#39;\t{&#34;ESTOPInput&#34;:20s}: {bool(status &amp; 0x80000000)}&#39;)

    def query(self, command: str):
        &#34;&#34;&#34; Override the parent class to do some error checking on the response. &#34;&#34;&#34;

        # print(command)

        response = super().query(command)

        # print(response)

        if response[-1] != &#39;\n&#39;:
            raise ConnectionError(f&#34;Invalid termination character in response: {response}&#34;)
        elif response[0] == &#39;!&#39;:
            raise ConnectionError(f&#34;Command invalid error for command: {command}&#34;)
        elif response[0] == &#39;#&#39;:
            raise ConnectionError(f&#34;Command fault error for command: {command}&#34;)
        elif response[0] != &#39;%&#39;:
            raise ConnectionError(f&#34;Invalid starting character in response: {response}&#34;)
        elif len(response[:-1]) &gt; 1:
            return response[1:-1]
        else:
            return None</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="egse.socketdevice.SocketDevice" href="../../socketdevice.html#egse.socketdevice.SocketDevice">SocketDevice</a></li>
<li><a title="egse.stages.aerotech.ensemble_interface.EnsembleInterface" href="ensemble_interface.html#egse.stages.aerotech.ensemble_interface.EnsembleInterface">EnsembleInterface</a></li>
<li><a title="egse.device.DeviceInterface" href="../../device.html#egse.device.DeviceInterface">DeviceInterface</a></li>
<li><a title="egse.device.DeviceConnectionInterface" href="../../device.html#egse.device.DeviceConnectionInterface">DeviceConnectionInterface</a></li>
<li><a title="egse.device.DeviceConnectionObservable" href="../../device.html#egse.device.DeviceConnectionObservable">DeviceConnectionObservable</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.abort"><code class="name flex">
<span>def <span class="ident">abort</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def abort(self):
    return self.query(self._commands[&#39;abort&#39;].get_cmd_string())</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.clear_errors"><code class="name flex">
<span>def <span class="ident">clear_errors</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def clear_errors(self):
    return self.query(self._commands[&#39;clear_errors&#39;].get_cmd_string())</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.disable_axis"><code class="name flex">
<span>def <span class="ident">disable_axis</span></span>(<span>self, axis)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def disable_axis(self, axis):
    logger.info(f&#34;Disabeling the {axis} axis&#34;)
    return self.query(f&#34;DISABLE {axis}\n&#34;)</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.enable_axis"><code class="name flex">
<span>def <span class="ident">enable_axis</span></span>(<span>self, axis)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def enable_axis(self, axis):
    logger.info(f&#34;Enabeling the {axis} axis&#34;)
    return self.query(f&#34;ENABLE {axis}\n&#34;)</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.get_actual_current"><code class="name flex">
<span>def <span class="ident">get_actual_current</span></span>(<span>self, axis)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_actual_current(self, axis):
    return float(self.query(self._commands[&#39;get_actual_current&#39;].get_cmd_string(axis=axis)))</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.get_actual_position"><code class="name flex">
<span>def <span class="ident">get_actual_position</span></span>(<span>self, axis)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_actual_position(self, axis):
    return float(self.query(self._commands[&#39;get_actual_position&#39;].get_cmd_string(axis=axis)))</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.get_actual_velocity"><code class="name flex">
<span>def <span class="ident">get_actual_velocity</span></span>(<span>self, axis)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_actual_velocity(self, axis):
    return float(self.query(self._commands[&#39;get_actual_velocity&#39;].get_cmd_string(axis=axis)))</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.get_command_current"><code class="name flex">
<span>def <span class="ident">get_command_current</span></span>(<span>self, axis)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_command_current(self, axis):
    return float(self.query(self._commands[&#39;get_command_current&#39;].get_cmd_string(axis=axis)))</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.get_command_position"><code class="name flex">
<span>def <span class="ident">get_command_position</span></span>(<span>self, axis)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_command_position(self, axis):
    return float(self.query(self._commands[&#39;get_command_position&#39;].get_cmd_string(axis=axis)))</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.get_command_velocity"><code class="name flex">
<span>def <span class="ident">get_command_velocity</span></span>(<span>self, axis)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_command_velocity(self, axis):
    return float(self.query(self._commands[&#39;get_command_velocity&#39;].get_cmd_string(axis=axis)))</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.get_error_position"><code class="name flex">
<span>def <span class="ident">get_error_position</span></span>(<span>self, axis)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_error_position(self, axis):
    return float(self.query(self._commands[&#39;get_error_position&#39;].get_cmd_string(axis=axis)))</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.get_fault"><code class="name flex">
<span>def <span class="ident">get_fault</span></span>(<span>self, axis)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_fault(self, axis):
    fault = self.query(self._commands[&#39;get_fault&#39;].get_cmd_string(axis=axis))
    return int(fault) &amp; 0xFFFFFFFF # turn into unsigned</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.get_parameter"><code class="name flex">
<span>def <span class="ident">get_parameter</span></span>(<span>self, paramId: <a title="egse.stages.aerotech.ensemble_parameters.EnsembleParameter" href="ensemble_parameters.html#egse.stages.aerotech.ensemble_parameters.EnsembleParameter">EnsembleParameter</a>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_parameter(self, paramId: EnsembleParameter):
    return int(self.query(self._commands[&#39;get_parameter&#39;].get_cmd_string(index=paramId)))</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.get_status"><code class="name flex">
<span>def <span class="ident">get_status</span></span>(<span>self, axis)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_status(self, axis):
    status = self.query(self._commands[&#39;get_status&#39;].get_cmd_string(axis=axis))
    return int(status) &amp; 0xFFFFFFFF # turn into unsigned</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.home_axes"><code class="name flex">
<span>def <span class="ident">home_axes</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def home_axes(self):
    if self.is_homed(&#39;Y&#39;) and self.is_homed(&#39;X&#39;):
        logger.info(&#34;Gimbal was already homed&#34;)
        return

    logger.info(f&#34;Homing both axis&#34;)

    self.query(f&#34;HOME Y\n&#34;)

    self.query(f&#34;HOME X\n&#34;)

    logger.info(f&#34;Homing complete&#34;)</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.home_axis"><code class="name flex">
<span>def <span class="ident">home_axis</span></span>(<span>self, axis)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def home_axis(self, axis):
    if self.is_homed(axis):
        logger.info(&#34;Gimbal has already been homed&#34;)
        return

    logger.info(f&#34;Homing the {axis} axis...&#34;)

    self.query(f&#34;HOME {axis}\n&#34;)

    logger.info(f&#34;{axis} axis has been homed&#34;)</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.is_homed"><code class="name flex">
<span>def <span class="ident">is_homed</span></span>(<span>self, axis)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def is_homed(self, axis):
    return bool(self.get_status(axis) &amp; 0x02)</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.is_moving"><code class="name flex">
<span>def <span class="ident">is_moving</span></span>(<span>self, axis)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def is_moving(self, axis):
    return bool(self.get_status(axis) &amp; 0x08)</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.move_axes_degrees"><code class="name flex">
<span>def <span class="ident">move_axes_degrees</span></span>(<span>self, position_x, position_y)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def move_axes_degrees(self, position_x, position_y):
    if not self.is_homed(&#39;X&#39;) or not self.is_homed(&#39;Y&#39;):
        logger.warning(&#34;The gimbal has not been homed&#34;)
        raise EnsembleException(f&#39;not all axes are homed&#39;)

    if not (self.limits[&#39;X&#39;][0] &lt;= position_x &lt;= self.limits[&#39;X&#39;][1]):
        logger.warning(&#34;Move denied: X Position out of limit&#34;)
        raise EnsembleException(f&#34;position X outside limits \
            {self.limits[&#39;X&#39;][0]} &lt;= {position_x} &lt;= {self.limits[&#39;X&#39;][1]}&#34;)

    if not (self.limits[&#39;Y&#39;][0] &lt;= position_y &lt;= self.limits[&#39;Y&#39;][1]):
        logger.warning(&#34;Move denied: Y Position out of limit&#34;)
        raise EnsembleException(f&#34;position Y outside limits \
            {self.limits[&#39;Y&#39;][0]} &lt;= {position_y} &lt;= {self.limits[&#39;Y&#39;][1]}&#34;)

    radius = degrees(arccos(cos(radians(position_x)) * cos(radians(position_y))))

    # Due to rounding errors, we have to round the radius as well
    radius = round(radius, 6)
    
    logger.info(f&#34;Radial distance is: {radius}&#34;)
  
    if not (radius &lt;= self.limit):
        logger.warning(&#34;Move denied: radial distance out of limit&#34;)
        raise EnsembleException(f&#34;Command is outside allowed radial distance \
            {radius} &lt;= {self.limit}&#34;)                

    logger.info(f&#34;Moving Y to {position_y} and X to {position_x}&#34;)

    self.query(f&#34;MOVEABS X {position_x} Y {position_y} XF {self.speed} YF {self.speed}\n&#34;)</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.move_axis_degrees"><code class="name flex">
<span>def <span class="ident">move_axis_degrees</span></span>(<span>self, axis, position)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def move_axis_degrees(self, axis, position):
    if not self.is_homed(axis):
        logger.warning(&#34;The gimbal has not been homed&#34;)
        raise EnsembleException(f&#39;axis {axis} is not homed&#39;)

    if not (self.limits[axis][0] &lt;= position &lt;= self.limits[axis][1]):
        logger.warning(&#34;Move denied: Position out of limit&#34;)
        raise EnsembleException(f&#39;position {axis} outside limits\
            {self.limits[axis][0]} &lt;= {position} &lt;= {self.limits[axis][1]}&#39;)

    logger.info(f&#34;Moving {axis} axis to {position}&#34;)

    self.query(f&#34;MOVEABS {axis} {position} {axis}F {self.speed}\n&#34;)</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.print_status"><code class="name flex">
<span>def <span class="ident">print_status</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Pretty print the status word.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def print_status(self):
    &#34;&#34;&#34; Pretty print the status word. &#34;&#34;&#34;
    status = self.get_status(&#39;X&#39;)
    print(&#39;STATUS:&#39;)
    print(f&#39;\t{&#34;Enabled&#34;:20s}: {bool(status &amp; 0x00000001)}&#39;)
    print(f&#39;\t{&#34;Homed&#34;:20s}: {bool(status &amp; 0x00000002)}&#39;)
    print(f&#39;\t{&#34;InPosition&#34;:20s}: {bool(status &amp; 0x00000004)}&#39;)
    print(f&#39;\t{&#34;MoveActive&#34;:20s}: {bool(status &amp; 0x00000008)}&#39;)
    print(f&#39;\t{&#34;AccelPhase&#34;:20s}: {bool(status &amp; 0x00000010)}&#39;)
    print(f&#39;\t{&#34;DecelPhase&#34;:20s}: {bool(status &amp; 0x00000020)}&#39;)
    print(f&#39;\t{&#34;PositionCapture&#34;:20s}: {bool(status &amp; 0x00000040)}&#39;)
    print(f&#39;\t{&#34;CurrentClamp&#34;:20s}: {bool(status &amp; 0x00000080)}&#39;)
    print(f&#39;\t{&#34;BrakeOutput&#34;:20s}: {bool(status &amp; 0x00000100)}&#39;)
    print(f&#39;\t{&#34;MotionIsCw&#34;:20s}: {bool(status &amp; 0x00000200)}&#39;)
    print(f&#39;\t{&#34;MasterSlaveControl&#34;:20s}: {bool(status &amp; 0x0000400)}&#39;)
    print(f&#39;\t{&#34;CalActive&#34;:20s}: {bool(status &amp; 0x00000800)}&#39;)
    print(f&#39;\t{&#34;CallEnabled&#34;:20s}: {bool(status &amp; 0x00001000)}&#39;)
    print(f&#39;\t{&#34;JoystickControl&#34;:20s}: {bool(status &amp; 0x0002000)}&#39;)
    print(f&#39;\t{&#34;Homing&#34;:20s}: {bool(status &amp; 0x00004000)}&#39;)
    print(f&#39;\t{&#34;MasterSupress&#34;:20s}: {bool(status &amp; 0x00008000)}&#39;)
    print(f&#39;\t{&#34;GantryActive&#34;:20s}: {bool(status &amp; 0x00010000)}&#39;)
    print(f&#39;\t{&#34;GantryMaster&#34;:20s}: {bool(status &amp; 0x00020000)}&#39;)
    print(f&#39;\t{&#34;AutoFocusActive&#34;:20s}: {bool(status &amp; 0x00040000)}&#39;)
    print(f&#39;\t{&#34;CommandFilterDone&#34;:20s}: {bool(status &amp; 0x00080000)}&#39;)
    print(f&#39;\t{&#34;InPosition2&#34;:20s}: {bool(status &amp; 0x00100000)}&#39;)
    print(f&#39;\t{&#34;ServoControl&#34;:20s}: {bool(status &amp; 0x002000000)}&#39;)
    print(f&#39;\t{&#34;CwEOTLimit&#34;:20s}: {bool(status &amp; 0x004000000)}&#39;)
    print(f&#39;\t{&#34;CcwEOTLimit&#34;:20s}: {bool(status &amp; 0x008000000)}&#39;)
    print(f&#39;\t{&#34;HomeLimit&#34;:20s}: {bool(status &amp; 0x01000000)}&#39;)
    print(f&#39;\t{&#34;MarkerInput&#34;:20s}: {bool(status &amp; 0x02000000)}&#39;)
    print(f&#39;\t{&#34;HallAInput&#34;:20s}: {bool(status &amp; 0x04000000)}&#39;)
    print(f&#39;\t{&#34;HallBInput&#34;:20s}: {bool(status &amp; 0x08000000)}&#39;)
    print(f&#39;\t{&#34;HallCInput&#34;:20s}: {bool(status &amp; 0x10000000)}&#39;)
    print(f&#39;\t{&#34;SineEncoderError&#34;:20s}: {bool(status &amp; 0x20000000)}&#39;)
    print(f&#39;\t{&#34;CosineEncoderError&#34;:20s}: {bool(status &amp; 0x40000000)}&#39;)
    print(f&#39;\t{&#34;ESTOPInput&#34;:20s}: {bool(status &amp; 0x80000000)}&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.query"><code class="name flex">
<span>def <span class="ident">query</span></span>(<span>self, command: str)</span>
</code></dt>
<dd>
<div class="desc"><p>Override the parent class to do some error checking on the response.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def query(self, command: str):
    &#34;&#34;&#34; Override the parent class to do some error checking on the response. &#34;&#34;&#34;

    # print(command)

    response = super().query(command)

    # print(response)

    if response[-1] != &#39;\n&#39;:
        raise ConnectionError(f&#34;Invalid termination character in response: {response}&#34;)
    elif response[0] == &#39;!&#39;:
        raise ConnectionError(f&#34;Command invalid error for command: {command}&#34;)
    elif response[0] == &#39;#&#39;:
        raise ConnectionError(f&#34;Command fault error for command: {command}&#34;)
    elif response[0] != &#39;%&#39;:
        raise ConnectionError(f&#34;Invalid starting character in response: {response}&#34;)
    elif len(response[:-1]) &gt; 1:
        return response[1:-1]
    else:
        return None</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.reset"><code class="name flex">
<span>def <span class="ident">reset</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def reset(self):
    return self.query(self._commands[&#39;reset&#39;].get_cmd_string())</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.set_absolute"><code class="name flex">
<span>def <span class="ident">set_absolute</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_absolute(self):
    return self.query(self._commands[&#39;set_absolute&#39;].get_cmd_string())</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.set_blocking"><code class="name flex">
<span>def <span class="ident">set_blocking</span></span>(<span>self, axis, enable)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_blocking(self, axis, enable):
    enable_string = &#39;ON&#39; if enable else &#39;OFF&#39;
    return self.query(self._commands[&#39;set_blocking&#39;].get_cmd_string(
        axis=axis, enable=enable_string))</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.set_incremental"><code class="name flex">
<span>def <span class="ident">set_incremental</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_incremental(self):
    return self.query(self._commands[&#39;set_incremental&#39;].get_cmd_string())</code></pre>
</details>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleController.set_parameter"><code class="name flex">
<span>def <span class="ident">set_parameter</span></span>(<span>self, paramId: <a title="egse.stages.aerotech.ensemble_parameters.EnsembleParameter" href="ensemble_parameters.html#egse.stages.aerotech.ensemble_parameters.EnsembleParameter">EnsembleParameter</a>, value)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_parameter(self, paramId: EnsembleParameter, value):
    return self.query(self._commands[&#39;set_parameter&#39;].get_cmd_string(index=paramId, value=value))</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="egse.socketdevice.SocketDevice" href="../../socketdevice.html#egse.socketdevice.SocketDevice">SocketDevice</a></b></code>:
<ul class="hlist">
<li><code><a title="egse.socketdevice.SocketDevice.add_observer" href="../../device.html#egse.device.DeviceConnectionObservable.add_observer">add_observer</a></code></li>
<li><code><a title="egse.socketdevice.SocketDevice.connect" href="../../socketdevice.html#egse.socketdevice.SocketDevice.connect">connect</a></code></li>
<li><code><a title="egse.socketdevice.SocketDevice.disconnect" href="../../socketdevice.html#egse.socketdevice.SocketDevice.disconnect">disconnect</a></code></li>
<li><code><a title="egse.socketdevice.SocketDevice.get_idn" href="../../socketdevice.html#egse.socketdevice.SocketDevice.get_idn">get_idn</a></code></li>
<li><code><a title="egse.socketdevice.SocketDevice.is_connected" href="../../socketdevice.html#egse.socketdevice.SocketDevice.is_connected">is_connected</a></code></li>
<li><code><a title="egse.socketdevice.SocketDevice.notify_observers" href="../../device.html#egse.device.DeviceConnectionObservable.notify_observers">notify_observers</a></code></li>
<li><code><a title="egse.socketdevice.SocketDevice.reconnect" href="../../socketdevice.html#egse.socketdevice.SocketDevice.reconnect">reconnect</a></code></li>
<li><code><a title="egse.socketdevice.SocketDevice.send_command" href="../../socketdevice.html#egse.socketdevice.SocketDevice.send_command">send_command</a></code></li>
</ul>
</li>
<li><code><b><a title="egse.stages.aerotech.ensemble_interface.EnsembleInterface" href="ensemble_interface.html#egse.stages.aerotech.ensemble_interface.EnsembleInterface">EnsembleInterface</a></b></code>:
<ul class="hlist">
<li><code><a title="egse.stages.aerotech.ensemble_interface.EnsembleInterface.is_simulator" href="../../device.html#egse.device.DeviceInterface.is_simulator">is_simulator</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="egse.stages.aerotech.ensemble_controller.EnsembleException"><code class="flex name class">
<span>class <span class="ident">EnsembleException</span></span>
<span>(</span><span>*args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class EnsembleException(Exception):
    pass</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="egse.stages.aerotech" href="index.html">egse.stages.aerotech</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController" href="#egse.stages.aerotech.ensemble_controller.EnsembleController">EnsembleController</a></code></h4>
<ul class="">
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.abort" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.abort">abort</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.clear_errors" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.clear_errors">clear_errors</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.disable_axis" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.disable_axis">disable_axis</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.enable_axis" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.enable_axis">enable_axis</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.get_actual_current" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.get_actual_current">get_actual_current</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.get_actual_position" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.get_actual_position">get_actual_position</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.get_actual_velocity" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.get_actual_velocity">get_actual_velocity</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.get_command_current" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.get_command_current">get_command_current</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.get_command_position" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.get_command_position">get_command_position</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.get_command_velocity" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.get_command_velocity">get_command_velocity</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.get_error_position" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.get_error_position">get_error_position</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.get_fault" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.get_fault">get_fault</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.get_parameter" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.get_parameter">get_parameter</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.get_status" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.get_status">get_status</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.home_axes" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.home_axes">home_axes</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.home_axis" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.home_axis">home_axis</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.is_homed" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.is_homed">is_homed</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.is_moving" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.is_moving">is_moving</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.move_axes_degrees" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.move_axes_degrees">move_axes_degrees</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.move_axis_degrees" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.move_axis_degrees">move_axis_degrees</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.print_status" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.print_status">print_status</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.query" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.query">query</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.reset" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.reset">reset</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.set_absolute" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.set_absolute">set_absolute</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.set_blocking" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.set_blocking">set_blocking</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.set_incremental" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.set_incremental">set_incremental</a></code></li>
<li><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleController.set_parameter" href="#egse.stages.aerotech.ensemble_controller.EnsembleController.set_parameter">set_parameter</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.stages.aerotech.ensemble_controller.EnsembleException" href="#egse.stages.aerotech.ensemble_controller.EnsembleException">EnsembleException</a></code></h4>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>