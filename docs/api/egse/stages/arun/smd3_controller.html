<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>egse.stages.arun.smd3_controller API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>egse.stages.arun.smd3_controller</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import logging
import time
import os
from threading import Thread
import threading 
import rich

from egse.serialdevice import SerialDevice
from egse.command import Command
from egse.settings import Settings
from egse.stages.arun.smd3_interface import Smd3Interface

logger = logging.getLogger(&#39;smd3_controller&#39;)

# Load the device settings from the global common-egse config file
DEVICE_SETTINGS = Settings.load(&#34;Arun SMD3 Controller&#34;)

# Load the device protocol
# DEVICE_PROTOCOL = Settings.load(filename=&#39;smd3.yaml&#39;)[&#39;Commands&#39;]


class Smd3Exception(Exception):
    pass


class Smd3Mode:
    STEP                    = 0
    STEP_TRIGGERED_VELOCITY = 1
    REMOTE                  = 2
    JOYSTICK                = 3
    BAKE                    = 4
    HOME                    = 5

EFLAGS = {
    0: &#34;TSHORT&#34;,
    1: &#34;TOPEN&#34;,
    2: &#34;TOVR&#34;,
    3: &#34;MOTORSHORT&#34;,
    4: &#34;EXTERNALDISABLE&#34;,
    5: &#34;EMERGENCYSTOP&#34;,
    6: &#34;CONFIGURATIONERROR&#34;
}

SFLAGS = {
    0: &#34;JSCON&#34;,
    1: &#34;LIMITNEGATIVE&#34;,
    2: &#34;LIMITPOSITIVE&#34;,
    3: &#34;EXTEN&#34;,
    4: &#34;IDENT&#34;,
    6: &#34;STANDBY&#34;,
    7: &#34;BAKE&#34;,
    8: &#34;ATSPEED&#34;
}

class Smd3Controller(SerialDevice, Smd3Interface):
    STEP_SIZE_MM        = 5E-3 # step size (5um) but in mm
    IN_FOV_POSITION     = 37800
    def __init__(self, port=&#39;/dev/smd3&#39;, baudrate=115200):
        # Load device configuration from the common-egse global config file
        self._port              = DEVICE_SETTINGS.PORT if port is None else port
        self._baudrate          = DEVICE_SETTINGS.BAUDRATE if baudrate is None else baudrate

        self.status = {}
        self.fault  = {}
        self.homed  = False
        self.limits = {&#39;positive&#39;:None, 
                       &#39;negative&#39;:None}
        
        super().__init__(port=self._port, baudrate=self._baudrate, terminator=&#39;\r\n&#39;)
        self.connect()
        
        self.emergency_stop()
        # Clear any triggered flags
        self.clear_flags()
        
        # Attempt to home the hartmann mask
        home_thread = Thread(target=self.homing_procedure, daemon=True)
        home_thread.start()
        
    # General methods
    def get_idn(self):
        return self._query(&#39;SER\r\n&#39;)
    
    def get_version(self):
        return self._query(&#39;FW\r\n&#39;)
    
    def clear_flags(self):
        return self._query(&#39;CLR\r\n&#39;)
    
    def load_configuration(self):
        return self._query(&#39;LOAD\r\n&#39;)
    
    def store_configuration(self):
        return self._query(&#39;STORE\r\n&#39;)
    
    def load_factory_defaults(self):
        return self._query(&#39;LOADFD\r\n&#39;)
    
    def select_mode(self, mode: Smd3Mode):
        return self._query(&#39;MODE,{}\r\n&#39;.format(mode))
    
    def get_status(self):
        return self._query(&#39;FLAGS\r\n&#39;)
    
    
    # Command movement methods
    def velocity_move(self, direction: str):
        if direction in [&#39;-&#39;, &#39;+&#39;]:
            return self._query(&#39;RUNV,{}\r\n&#39;.format(direction))
        else:
            raise Smd3Exception(&#34;Direction can only be &#39;-&#39; or &#39;+&#39;&#34;)
    
    def absolute_move(self, absolute_position: float):
        return self._query(&#39;RUNA,{}\r\n&#39;.format(absolute_position))
    
    def relative_move(self, relative_position: float):
        return self._query(&#39;RUNR,{}\r\n&#39;.format(relative_position))
    
    def bake(self):
        return self._query(&#39;RUNB\r\n&#39;)
    
    def home(self, direction: str):
        if direction in [&#39;-&#39;, &#39;+&#39;]:
            return self._query(&#39;RUNH,{}\r\n&#39;.format(direction))
        else:
            raise Smd3Exception(&#34;Direction can only be &#39;-&#39; or &#39;+&#39;&#34;)
    
    def stop(self):
        return self._query(&#39;STOP\r\n&#39;)
    
    def quick_stop(self):
        return self._query(&#39;SSTOP\r\n&#39;)
    
    def emergency_stop(self):
        return self._query(&#39;ESTOP\r\n&#39;)
    
    
    # Motor methods
    def select_tsensor(self, sensor_type=None):
        if sensor_type == None:
            return self._query(&#39;TSEL\r\n&#39;)
        else:
            return self._query(&#39;TSEL,{}\r\n&#39;.format(sensor_type))
    
    def get_temperature(self):
        return self._query(&#39;TMOT\r\n&#39;)
    
    def run_current(self, current=None):
        if current != None:
            return self._query(&#39;IR,{}\r\n&#39;.format(current))
        else:
            return self._query(&#39;IR\r\n&#39;)
    
    def acceleration_current(self, current=None):
        if current != None:
            return self._query(&#39;IA,{}\r\n&#39;.format(current))
        else:
            return self._query(&#39;IA\r\n&#39;)
            
    
    def hold_current(self, current=None):
        if current != None:
            return self._query(&#39;IH,{}\r\n&#39;.format(current))
        else:
            return self._query(&#39;IH\r\n&#39;)
    
    def power_down_delay(self, delay=None):
        if delay != None:
            return self._query(&#39;PDDEL\r\n&#39;)
        else:
            return self._query(&#39;PDDEL,{}\r\n&#39;.format(delay))
    
    def power_down_ramp_delay(self, delay):
        pass
    
    def set_freewheel(self, fw=None):
        if fw != None:
            return self._query(&#39;FW,{}\r\n&#39;.format(fw))
        else:
            return self._query(&#39;FW\r\n&#39;)
    
    def resolution(self, res=None):
        if res != None:
            return self._query(&#39;RES,{}\r\n&#39;.format(res))
        else:
            return self._query(&#39;RES\r\n&#39;)
    
    
    # Limit input methods
    def global_limit(self, enable=None):
        if enable != None:
            return self._query(&#39;L,{}\r\n&#39;.format(enable))
        else:
            return self._query(&#39;L\r\n&#39;)
    
    def positive_limit(self, enable=None):
        if enable != None:
            return self._query(&#39;L+,{}\r\n&#39;.format(enable))
        else:
            return self._query(&#39;L+\r\n&#39;)
        
    def negative_limit(self, enable=None):
        if enable != None:
            return self._query(&#39;L-,{}\r\n&#39;.format(enable))
        else:
            return self._query(&#39;L-\r\n&#39;.format(enable))
    
    def positive_limit_polarity(self, polarity=None):
        if polarity != None:
            return self._query(&#39;LP+,{}\r\n&#39;.format(polarity))
        else:
            return self._query(&#39;LP+\r\n&#39;)
        
    def negative_limit_polarity(self, polarity=None):
        if polarity != None:
            return self._query(&#39;LP-,{}\r\n&#39;.format(polarity))
        else:
            return self._query(&#39;LP-\r\n&#39;)
        
    def limit_polarity(self, polarity):
        return self.query(&#39;LP,{}\r\n&#39;.format(polarity))
    
    def limit_stop_mode(self, stop_mode):
        return self._query(&#39;LSM,{}\r\n&#39;.format(stop_mode))
    
    
    # Profile methods
    def acceleration(self, acceleration=None):
        if acceleration != None:
            return self._query(&#39;AMAX,{}\r\n&#39;.format(acceleration))
        else:
            return self._query(&#39;AMAX\r\n&#39;)
    
    def deceleration(self, deceleration=None):
        if deceleration != None:
            return self._query(&#39;DMAX,{}\r\n&#39;.format(deceleration))
        else:
            return self._query(&#39;DMAX\r\n&#39;)
    
    def start_frequency(self, frequency=None):
        if frequency != None:
            return self._query(&#39;VSTART,{}\r\n&#39;.format(frequency))
        else:
            return self._query(&#39;VSTART\r\n&#39;)
    
    def stop_frequency(self, frequency=None):
        if frequency != None:
            return self._query(&#39;VSTOP,{}\r\n&#39;.format(frequency))
        else:
            return self._query(&#39;VSTOP\r\n&#39;)
    
    def target_frequency(self, frequency=None):
        if frequency != None:
            return self._query(&#39;VMAX,{}\r\n&#39;.format(frequency))
        else:
            return self._query(&#39;VMAX\r\n&#39;)
    
    def actual_frequency(self):
        return self._query(&#39;VACT\r\n&#39;)
    
    def actual_position(self, position=None):
        if position != None:
            return self._query(&#39;PACT,{}\r\n&#39;.format(position))
        else:
            return self._query(&#39;PACT\r\n&#39;)
    
    def relative_position(self, position=None):
        if position != None:
            return self._query(&#39;PREL,{}\r\n&#39;.format(position))
        else:
            return self._query(&#39;PREL\r\n&#39;)
    
    def time_stop_before_move(self, time):
        if time != None:
            return self._query(&#39;TZW,{}\r\n&#39;.format(time))
        else:
            return self._query(&#39;TZW\r\n&#39;)
    
    def full_step(self, step):
        if step != None:
            return self._query(&#39;THIGH,{}\r\n&#39;.format(step))
        else:
            return self._query(&#39;THIGH\r\n&#39;)
    
    
    # Step/Direction methods
    def step_edge(self, edge):
        if edge != None:
            return self._query(&#39;EDGE,{}\r\n&#39;.format(edge))
        else:
            return self._query(&#39;EDGE\r\n&#39;)
    
    def interpolate(self, enable):
        if enable != None:
            return self._query(&#39;INTERP,{}\r\n&#39;.format(enable))
        else:
            return self._query(&#39;INTERP\r\n&#39;)
 
    # Bake methods
    def bakeout_setpoint(self, setpoint):
        if setpoint != None:
            return self._query(&#39;BAKET,{}\r\n&#39;.format(setpoint))
        else:
            return self._query(&#39;BAKET\r\n&#39;)
    
    
    # Advanced methods
    def configure_limits(self):
        self.global_limit(1)
        self.positive_limit(1)
        self.negative_limit(1)
        self.limit_polarity(0)
        self.negative_limit_polarity(0)
        self.positive_limit_polarity(0)
        self.limit_stop_mode(0)
    
    def configure_homing(self):
        self.select_mode(Smd3Mode.HOME)
        self.acceleration(100)
        self.deceleration(100)
        self.acceleration_current(0.150)
        self.hold_current(0)
        self.run_current(0.150)
        self.start_frequency(10)
        self.target_frequency(1000)
    
    def configure_remote(self):
        self.select_mode(Smd3Mode.REMOTE)
        self.acceleration(100)
        self.deceleration(100)
        self.acceleration_current(0.150)
        self.hold_current(0)
        self.run_current(0.150)
        self.start_frequency(10)
        self.target_frequency(2000)
    
    def save_status(self, status_word):
        for bits, name in SFLAGS.items():
            self.status[name] = bool(int(status_word, 0) &amp; (1 &lt;&lt; bits))
    
    def save_fault(self, error_word):
        for bits, name in EFLAGS.items():
            self.fault[name]  = bool(int(error_word, 0) &amp; (1 &lt;&lt; bits))
    
    def homing_procedure(self):
        self.configure_homing()
        self.configure_limits()
        logger.info(&#34;Starting homing procedure...&#34;)

        # Negative homing procedure
        # Home negative side
        self.home(&#39;-&#39;)

        # Wait until we stat moving
        time.sleep(0.1)
        _, _, velocity = self.actual_frequency()
        while float(velocity) != 0.0:
            _, _, velocity = self.actual_frequency()
            time.sleep(1)
        
        # Wait a little bit until we actually stopped    
        time.sleep(0.1)
        
         # Reset actual position
        self.actual_position(0.0)
        self.limits[&#39;negative&#39;] = 0
        logger.info(&#34;Negative home found! Negative home at: 0&#34;)

        # Positive homing procedure
        # Home postive side
        self.home(&#39;+&#39;)

        # Wait until we start moving
        time.sleep(0.1)
        _, _, velocity = self.actual_frequency()
        while float(velocity) != 0.0:
            _, _, velocity = self.actual_frequency()
            time.sleep(1)

        # Wait a little bit until we actually stopped
        time.sleep(0.1)
        
        _, _, position = self.actual_position()
        self.limits[&#39;positive&#39;] = float(position)
        logger.info(&#34;Positive home found!. Positive home at: {}&#34;.format(position))

        self.homed = True
        
        logger.info(&#34;Homing procedure completed!&#34;)
        
        self.configure_remote()
    
    def move_mask_fov(self, enable: bool):
        if self.homed:
            if enable:
                self.absolute_move(self.IN_FOV_POSITION)
            else:
                self.absolute_move(self.limits[&#39;negative&#39;])
        else:
            raise Smd3Exception(&#34;SMD3 has not been homed. Move has been ignored&#34;)
    
    def mask_in_fov(self):
        if self.homed:
            _, _, position = self.actual_position()
            if self.limits[&#39;positive&#39;] - 1 &lt;= round(float(position)) &lt;= self.limits[&#39;positive&#39;] + 1:
                return True
            else:
                return False
        else:
            return False
            
    def actual_position_mm(self):
        _, _, position = self.actual_position()
        return float(position)  * self.STEP_SIZE_MM
    
    def _query(self, command):
        &#34;&#34;&#34; Uses the parent query function and adds some sanity checks. &#34;&#34;&#34;
        response = super().query(command)

        if response[-2:] != &#39;\r\n&#39;:
            raise ConnectionError(f&#34;Missing termination characters in response: {response}&#34;)

        msg_parts = response.strip().split(&#39;,&#39;)

        if len(msg_parts) &lt; 2:
            raise ConnectionError(f&#34;Reveived malformed response: {response}&#34;)

        status_word = msg_parts[0]
        error_word = msg_parts[1]

        self.save_status(status_word)
        self.save_fault(error_word)
        
        if len(msg_parts) &gt;= 3 and msg_parts[2][:3] == &#39;ERR&#39;:
            raise ConnectionError(f&#34;Reveived error response. Error flags: {msg_parts[1]}, &#34; +
                                  f&#34;Error code: {msg_parts[2]}&#34;)

        # return a list if multiple return values are received
        
        if len(msg_parts) == 2:
            return status_word, error_word, None
        elif len(msg_parts) &gt; 3:
            return status_word, error_word, msg_parts[2:]
        else:
            return status_word, error_word, msg_parts[2]   
    
def main():
    dev = Smd3Controller()
    while not dev.homed:
        _, _, velocity = dev.actual_frequency()
        _, _, position = dev.actual_position()
        _, _, temperature = dev.get_temperature()
        rich.print(&#34;Position: {}, Velocity: {}, Temperature: {}&#34;
              .format(position, velocity, temperature))
        time.sleep(1)
        
    dev.move_mask_fov(True)
    
    while not dev.mask_in_fov():
        _, _, velocity = dev.actual_frequency()
        _, _, position = dev.actual_position()
        _, _, temperature = dev.get_temperature()
        rich.print(&#34;Position: {}, Position(rounded): {}, Position(inted): {}, Velocity: {}, Temperature: {}&#34;
              .format(position, round(float(position)), int(float(position)), velocity, temperature))
        rich.print(&#39;Negative: {}, Positive: {}&#39;.format(dev.limits[&#39;negative&#39;], dev.limits[&#39;positive&#39;]))
        time.sleep(1)
    
    print(&#34;Hartmann Mask has been enabed&#34;)

if __name__ == &#39;__main__&#39;:
    main()
    
    
    
    
    </code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="egse.stages.arun.smd3_controller.main"><code class="name flex">
<span>def <span class="ident">main</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def main():
    dev = Smd3Controller()
    while not dev.homed:
        _, _, velocity = dev.actual_frequency()
        _, _, position = dev.actual_position()
        _, _, temperature = dev.get_temperature()
        rich.print(&#34;Position: {}, Velocity: {}, Temperature: {}&#34;
              .format(position, velocity, temperature))
        time.sleep(1)
        
    dev.move_mask_fov(True)
    
    while not dev.mask_in_fov():
        _, _, velocity = dev.actual_frequency()
        _, _, position = dev.actual_position()
        _, _, temperature = dev.get_temperature()
        rich.print(&#34;Position: {}, Position(rounded): {}, Position(inted): {}, Velocity: {}, Temperature: {}&#34;
              .format(position, round(float(position)), int(float(position)), velocity, temperature))
        rich.print(&#39;Negative: {}, Positive: {}&#39;.format(dev.limits[&#39;negative&#39;], dev.limits[&#39;positive&#39;]))
        time.sleep(1)
    
    print(&#34;Hartmann Mask has been enabed&#34;)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller"><code class="flex name class">
<span>class <span class="ident">Smd3Controller</span></span>
<span>(</span><span>port='/dev/smd3', baudrate=115200)</span>
</code></dt>
<dd>
<div class="desc"><p>Generic base class for serial based device interface classes.</p>
<p>This base class handles the serial connection.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Smd3Controller(SerialDevice, Smd3Interface):
    STEP_SIZE_MM        = 5E-3 # step size (5um) but in mm
    IN_FOV_POSITION     = 37800
    def __init__(self, port=&#39;/dev/smd3&#39;, baudrate=115200):
        # Load device configuration from the common-egse global config file
        self._port              = DEVICE_SETTINGS.PORT if port is None else port
        self._baudrate          = DEVICE_SETTINGS.BAUDRATE if baudrate is None else baudrate

        self.status = {}
        self.fault  = {}
        self.homed  = False
        self.limits = {&#39;positive&#39;:None, 
                       &#39;negative&#39;:None}
        
        super().__init__(port=self._port, baudrate=self._baudrate, terminator=&#39;\r\n&#39;)
        self.connect()
        
        self.emergency_stop()
        # Clear any triggered flags
        self.clear_flags()
        
        # Attempt to home the hartmann mask
        home_thread = Thread(target=self.homing_procedure, daemon=True)
        home_thread.start()
        
    # General methods
    def get_idn(self):
        return self._query(&#39;SER\r\n&#39;)
    
    def get_version(self):
        return self._query(&#39;FW\r\n&#39;)
    
    def clear_flags(self):
        return self._query(&#39;CLR\r\n&#39;)
    
    def load_configuration(self):
        return self._query(&#39;LOAD\r\n&#39;)
    
    def store_configuration(self):
        return self._query(&#39;STORE\r\n&#39;)
    
    def load_factory_defaults(self):
        return self._query(&#39;LOADFD\r\n&#39;)
    
    def select_mode(self, mode: Smd3Mode):
        return self._query(&#39;MODE,{}\r\n&#39;.format(mode))
    
    def get_status(self):
        return self._query(&#39;FLAGS\r\n&#39;)
    
    
    # Command movement methods
    def velocity_move(self, direction: str):
        if direction in [&#39;-&#39;, &#39;+&#39;]:
            return self._query(&#39;RUNV,{}\r\n&#39;.format(direction))
        else:
            raise Smd3Exception(&#34;Direction can only be &#39;-&#39; or &#39;+&#39;&#34;)
    
    def absolute_move(self, absolute_position: float):
        return self._query(&#39;RUNA,{}\r\n&#39;.format(absolute_position))
    
    def relative_move(self, relative_position: float):
        return self._query(&#39;RUNR,{}\r\n&#39;.format(relative_position))
    
    def bake(self):
        return self._query(&#39;RUNB\r\n&#39;)
    
    def home(self, direction: str):
        if direction in [&#39;-&#39;, &#39;+&#39;]:
            return self._query(&#39;RUNH,{}\r\n&#39;.format(direction))
        else:
            raise Smd3Exception(&#34;Direction can only be &#39;-&#39; or &#39;+&#39;&#34;)
    
    def stop(self):
        return self._query(&#39;STOP\r\n&#39;)
    
    def quick_stop(self):
        return self._query(&#39;SSTOP\r\n&#39;)
    
    def emergency_stop(self):
        return self._query(&#39;ESTOP\r\n&#39;)
    
    
    # Motor methods
    def select_tsensor(self, sensor_type=None):
        if sensor_type == None:
            return self._query(&#39;TSEL\r\n&#39;)
        else:
            return self._query(&#39;TSEL,{}\r\n&#39;.format(sensor_type))
    
    def get_temperature(self):
        return self._query(&#39;TMOT\r\n&#39;)
    
    def run_current(self, current=None):
        if current != None:
            return self._query(&#39;IR,{}\r\n&#39;.format(current))
        else:
            return self._query(&#39;IR\r\n&#39;)
    
    def acceleration_current(self, current=None):
        if current != None:
            return self._query(&#39;IA,{}\r\n&#39;.format(current))
        else:
            return self._query(&#39;IA\r\n&#39;)
            
    
    def hold_current(self, current=None):
        if current != None:
            return self._query(&#39;IH,{}\r\n&#39;.format(current))
        else:
            return self._query(&#39;IH\r\n&#39;)
    
    def power_down_delay(self, delay=None):
        if delay != None:
            return self._query(&#39;PDDEL\r\n&#39;)
        else:
            return self._query(&#39;PDDEL,{}\r\n&#39;.format(delay))
    
    def power_down_ramp_delay(self, delay):
        pass
    
    def set_freewheel(self, fw=None):
        if fw != None:
            return self._query(&#39;FW,{}\r\n&#39;.format(fw))
        else:
            return self._query(&#39;FW\r\n&#39;)
    
    def resolution(self, res=None):
        if res != None:
            return self._query(&#39;RES,{}\r\n&#39;.format(res))
        else:
            return self._query(&#39;RES\r\n&#39;)
    
    
    # Limit input methods
    def global_limit(self, enable=None):
        if enable != None:
            return self._query(&#39;L,{}\r\n&#39;.format(enable))
        else:
            return self._query(&#39;L\r\n&#39;)
    
    def positive_limit(self, enable=None):
        if enable != None:
            return self._query(&#39;L+,{}\r\n&#39;.format(enable))
        else:
            return self._query(&#39;L+\r\n&#39;)
        
    def negative_limit(self, enable=None):
        if enable != None:
            return self._query(&#39;L-,{}\r\n&#39;.format(enable))
        else:
            return self._query(&#39;L-\r\n&#39;.format(enable))
    
    def positive_limit_polarity(self, polarity=None):
        if polarity != None:
            return self._query(&#39;LP+,{}\r\n&#39;.format(polarity))
        else:
            return self._query(&#39;LP+\r\n&#39;)
        
    def negative_limit_polarity(self, polarity=None):
        if polarity != None:
            return self._query(&#39;LP-,{}\r\n&#39;.format(polarity))
        else:
            return self._query(&#39;LP-\r\n&#39;)
        
    def limit_polarity(self, polarity):
        return self.query(&#39;LP,{}\r\n&#39;.format(polarity))
    
    def limit_stop_mode(self, stop_mode):
        return self._query(&#39;LSM,{}\r\n&#39;.format(stop_mode))
    
    
    # Profile methods
    def acceleration(self, acceleration=None):
        if acceleration != None:
            return self._query(&#39;AMAX,{}\r\n&#39;.format(acceleration))
        else:
            return self._query(&#39;AMAX\r\n&#39;)
    
    def deceleration(self, deceleration=None):
        if deceleration != None:
            return self._query(&#39;DMAX,{}\r\n&#39;.format(deceleration))
        else:
            return self._query(&#39;DMAX\r\n&#39;)
    
    def start_frequency(self, frequency=None):
        if frequency != None:
            return self._query(&#39;VSTART,{}\r\n&#39;.format(frequency))
        else:
            return self._query(&#39;VSTART\r\n&#39;)
    
    def stop_frequency(self, frequency=None):
        if frequency != None:
            return self._query(&#39;VSTOP,{}\r\n&#39;.format(frequency))
        else:
            return self._query(&#39;VSTOP\r\n&#39;)
    
    def target_frequency(self, frequency=None):
        if frequency != None:
            return self._query(&#39;VMAX,{}\r\n&#39;.format(frequency))
        else:
            return self._query(&#39;VMAX\r\n&#39;)
    
    def actual_frequency(self):
        return self._query(&#39;VACT\r\n&#39;)
    
    def actual_position(self, position=None):
        if position != None:
            return self._query(&#39;PACT,{}\r\n&#39;.format(position))
        else:
            return self._query(&#39;PACT\r\n&#39;)
    
    def relative_position(self, position=None):
        if position != None:
            return self._query(&#39;PREL,{}\r\n&#39;.format(position))
        else:
            return self._query(&#39;PREL\r\n&#39;)
    
    def time_stop_before_move(self, time):
        if time != None:
            return self._query(&#39;TZW,{}\r\n&#39;.format(time))
        else:
            return self._query(&#39;TZW\r\n&#39;)
    
    def full_step(self, step):
        if step != None:
            return self._query(&#39;THIGH,{}\r\n&#39;.format(step))
        else:
            return self._query(&#39;THIGH\r\n&#39;)
    
    
    # Step/Direction methods
    def step_edge(self, edge):
        if edge != None:
            return self._query(&#39;EDGE,{}\r\n&#39;.format(edge))
        else:
            return self._query(&#39;EDGE\r\n&#39;)
    
    def interpolate(self, enable):
        if enable != None:
            return self._query(&#39;INTERP,{}\r\n&#39;.format(enable))
        else:
            return self._query(&#39;INTERP\r\n&#39;)
 
    # Bake methods
    def bakeout_setpoint(self, setpoint):
        if setpoint != None:
            return self._query(&#39;BAKET,{}\r\n&#39;.format(setpoint))
        else:
            return self._query(&#39;BAKET\r\n&#39;)
    
    
    # Advanced methods
    def configure_limits(self):
        self.global_limit(1)
        self.positive_limit(1)
        self.negative_limit(1)
        self.limit_polarity(0)
        self.negative_limit_polarity(0)
        self.positive_limit_polarity(0)
        self.limit_stop_mode(0)
    
    def configure_homing(self):
        self.select_mode(Smd3Mode.HOME)
        self.acceleration(100)
        self.deceleration(100)
        self.acceleration_current(0.150)
        self.hold_current(0)
        self.run_current(0.150)
        self.start_frequency(10)
        self.target_frequency(1000)
    
    def configure_remote(self):
        self.select_mode(Smd3Mode.REMOTE)
        self.acceleration(100)
        self.deceleration(100)
        self.acceleration_current(0.150)
        self.hold_current(0)
        self.run_current(0.150)
        self.start_frequency(10)
        self.target_frequency(2000)
    
    def save_status(self, status_word):
        for bits, name in SFLAGS.items():
            self.status[name] = bool(int(status_word, 0) &amp; (1 &lt;&lt; bits))
    
    def save_fault(self, error_word):
        for bits, name in EFLAGS.items():
            self.fault[name]  = bool(int(error_word, 0) &amp; (1 &lt;&lt; bits))
    
    def homing_procedure(self):
        self.configure_homing()
        self.configure_limits()
        logger.info(&#34;Starting homing procedure...&#34;)

        # Negative homing procedure
        # Home negative side
        self.home(&#39;-&#39;)

        # Wait until we stat moving
        time.sleep(0.1)
        _, _, velocity = self.actual_frequency()
        while float(velocity) != 0.0:
            _, _, velocity = self.actual_frequency()
            time.sleep(1)
        
        # Wait a little bit until we actually stopped    
        time.sleep(0.1)
        
         # Reset actual position
        self.actual_position(0.0)
        self.limits[&#39;negative&#39;] = 0
        logger.info(&#34;Negative home found! Negative home at: 0&#34;)

        # Positive homing procedure
        # Home postive side
        self.home(&#39;+&#39;)

        # Wait until we start moving
        time.sleep(0.1)
        _, _, velocity = self.actual_frequency()
        while float(velocity) != 0.0:
            _, _, velocity = self.actual_frequency()
            time.sleep(1)

        # Wait a little bit until we actually stopped
        time.sleep(0.1)
        
        _, _, position = self.actual_position()
        self.limits[&#39;positive&#39;] = float(position)
        logger.info(&#34;Positive home found!. Positive home at: {}&#34;.format(position))

        self.homed = True
        
        logger.info(&#34;Homing procedure completed!&#34;)
        
        self.configure_remote()
    
    def move_mask_fov(self, enable: bool):
        if self.homed:
            if enable:
                self.absolute_move(self.IN_FOV_POSITION)
            else:
                self.absolute_move(self.limits[&#39;negative&#39;])
        else:
            raise Smd3Exception(&#34;SMD3 has not been homed. Move has been ignored&#34;)
    
    def mask_in_fov(self):
        if self.homed:
            _, _, position = self.actual_position()
            if self.limits[&#39;positive&#39;] - 1 &lt;= round(float(position)) &lt;= self.limits[&#39;positive&#39;] + 1:
                return True
            else:
                return False
        else:
            return False
            
    def actual_position_mm(self):
        _, _, position = self.actual_position()
        return float(position)  * self.STEP_SIZE_MM
    
    def _query(self, command):
        &#34;&#34;&#34; Uses the parent query function and adds some sanity checks. &#34;&#34;&#34;
        response = super().query(command)

        if response[-2:] != &#39;\r\n&#39;:
            raise ConnectionError(f&#34;Missing termination characters in response: {response}&#34;)

        msg_parts = response.strip().split(&#39;,&#39;)

        if len(msg_parts) &lt; 2:
            raise ConnectionError(f&#34;Reveived malformed response: {response}&#34;)

        status_word = msg_parts[0]
        error_word = msg_parts[1]

        self.save_status(status_word)
        self.save_fault(error_word)
        
        if len(msg_parts) &gt;= 3 and msg_parts[2][:3] == &#39;ERR&#39;:
            raise ConnectionError(f&#34;Reveived error response. Error flags: {msg_parts[1]}, &#34; +
                                  f&#34;Error code: {msg_parts[2]}&#34;)

        # return a list if multiple return values are received
        
        if len(msg_parts) == 2:
            return status_word, error_word, None
        elif len(msg_parts) &gt; 3:
            return status_word, error_word, msg_parts[2:]
        else:
            return status_word, error_word, msg_parts[2]   </code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="egse.serialdevice.SerialDevice" href="../../serialdevice.html#egse.serialdevice.SerialDevice">SerialDevice</a></li>
<li><a title="egse.stages.arun.smd3_interface.Smd3Interface" href="smd3_interface.html#egse.stages.arun.smd3_interface.Smd3Interface">Smd3Interface</a></li>
<li><a title="egse.device.DeviceInterface" href="../../device.html#egse.device.DeviceInterface">DeviceInterface</a></li>
<li><a title="egse.device.DeviceConnectionInterface" href="../../device.html#egse.device.DeviceConnectionInterface">DeviceConnectionInterface</a></li>
<li><a title="egse.device.DeviceConnectionObservable" href="../../device.html#egse.device.DeviceConnectionObservable">DeviceConnectionObservable</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.IN_FOV_POSITION"><code class="name">var <span class="ident">IN_FOV_POSITION</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.STEP_SIZE_MM"><code class="name">var <span class="ident">STEP_SIZE_MM</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.absolute_move"><code class="name flex">
<span>def <span class="ident">absolute_move</span></span>(<span>self, absolute_position: float)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def absolute_move(self, absolute_position: float):
    return self._query(&#39;RUNA,{}\r\n&#39;.format(absolute_position))</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.acceleration"><code class="name flex">
<span>def <span class="ident">acceleration</span></span>(<span>self, acceleration=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def acceleration(self, acceleration=None):
    if acceleration != None:
        return self._query(&#39;AMAX,{}\r\n&#39;.format(acceleration))
    else:
        return self._query(&#39;AMAX\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.acceleration_current"><code class="name flex">
<span>def <span class="ident">acceleration_current</span></span>(<span>self, current=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def acceleration_current(self, current=None):
    if current != None:
        return self._query(&#39;IA,{}\r\n&#39;.format(current))
    else:
        return self._query(&#39;IA\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.actual_frequency"><code class="name flex">
<span>def <span class="ident">actual_frequency</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def actual_frequency(self):
    return self._query(&#39;VACT\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.actual_position"><code class="name flex">
<span>def <span class="ident">actual_position</span></span>(<span>self, position=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def actual_position(self, position=None):
    if position != None:
        return self._query(&#39;PACT,{}\r\n&#39;.format(position))
    else:
        return self._query(&#39;PACT\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.actual_position_mm"><code class="name flex">
<span>def <span class="ident">actual_position_mm</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def actual_position_mm(self):
    _, _, position = self.actual_position()
    return float(position)  * self.STEP_SIZE_MM</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.bake"><code class="name flex">
<span>def <span class="ident">bake</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def bake(self):
    return self._query(&#39;RUNB\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.bakeout_setpoint"><code class="name flex">
<span>def <span class="ident">bakeout_setpoint</span></span>(<span>self, setpoint)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def bakeout_setpoint(self, setpoint):
    if setpoint != None:
        return self._query(&#39;BAKET,{}\r\n&#39;.format(setpoint))
    else:
        return self._query(&#39;BAKET\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.clear_flags"><code class="name flex">
<span>def <span class="ident">clear_flags</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def clear_flags(self):
    return self._query(&#39;CLR\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.configure_homing"><code class="name flex">
<span>def <span class="ident">configure_homing</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def configure_homing(self):
    self.select_mode(Smd3Mode.HOME)
    self.acceleration(100)
    self.deceleration(100)
    self.acceleration_current(0.150)
    self.hold_current(0)
    self.run_current(0.150)
    self.start_frequency(10)
    self.target_frequency(1000)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.configure_limits"><code class="name flex">
<span>def <span class="ident">configure_limits</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def configure_limits(self):
    self.global_limit(1)
    self.positive_limit(1)
    self.negative_limit(1)
    self.limit_polarity(0)
    self.negative_limit_polarity(0)
    self.positive_limit_polarity(0)
    self.limit_stop_mode(0)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.configure_remote"><code class="name flex">
<span>def <span class="ident">configure_remote</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def configure_remote(self):
    self.select_mode(Smd3Mode.REMOTE)
    self.acceleration(100)
    self.deceleration(100)
    self.acceleration_current(0.150)
    self.hold_current(0)
    self.run_current(0.150)
    self.start_frequency(10)
    self.target_frequency(2000)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.deceleration"><code class="name flex">
<span>def <span class="ident">deceleration</span></span>(<span>self, deceleration=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def deceleration(self, deceleration=None):
    if deceleration != None:
        return self._query(&#39;DMAX,{}\r\n&#39;.format(deceleration))
    else:
        return self._query(&#39;DMAX\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.emergency_stop"><code class="name flex">
<span>def <span class="ident">emergency_stop</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def emergency_stop(self):
    return self._query(&#39;ESTOP\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.full_step"><code class="name flex">
<span>def <span class="ident">full_step</span></span>(<span>self, step)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def full_step(self, step):
    if step != None:
        return self._query(&#39;THIGH,{}\r\n&#39;.format(step))
    else:
        return self._query(&#39;THIGH\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.get_status"><code class="name flex">
<span>def <span class="ident">get_status</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_status(self):
    return self._query(&#39;FLAGS\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.get_temperature"><code class="name flex">
<span>def <span class="ident">get_temperature</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_temperature(self):
    return self._query(&#39;TMOT\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.get_version"><code class="name flex">
<span>def <span class="ident">get_version</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_version(self):
    return self._query(&#39;FW\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.global_limit"><code class="name flex">
<span>def <span class="ident">global_limit</span></span>(<span>self, enable=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def global_limit(self, enable=None):
    if enable != None:
        return self._query(&#39;L,{}\r\n&#39;.format(enable))
    else:
        return self._query(&#39;L\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.hold_current"><code class="name flex">
<span>def <span class="ident">hold_current</span></span>(<span>self, current=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def hold_current(self, current=None):
    if current != None:
        return self._query(&#39;IH,{}\r\n&#39;.format(current))
    else:
        return self._query(&#39;IH\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.home"><code class="name flex">
<span>def <span class="ident">home</span></span>(<span>self, direction: str)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def home(self, direction: str):
    if direction in [&#39;-&#39;, &#39;+&#39;]:
        return self._query(&#39;RUNH,{}\r\n&#39;.format(direction))
    else:
        raise Smd3Exception(&#34;Direction can only be &#39;-&#39; or &#39;+&#39;&#34;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.homing_procedure"><code class="name flex">
<span>def <span class="ident">homing_procedure</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def homing_procedure(self):
    self.configure_homing()
    self.configure_limits()
    logger.info(&#34;Starting homing procedure...&#34;)

    # Negative homing procedure
    # Home negative side
    self.home(&#39;-&#39;)

    # Wait until we stat moving
    time.sleep(0.1)
    _, _, velocity = self.actual_frequency()
    while float(velocity) != 0.0:
        _, _, velocity = self.actual_frequency()
        time.sleep(1)
    
    # Wait a little bit until we actually stopped    
    time.sleep(0.1)
    
     # Reset actual position
    self.actual_position(0.0)
    self.limits[&#39;negative&#39;] = 0
    logger.info(&#34;Negative home found! Negative home at: 0&#34;)

    # Positive homing procedure
    # Home postive side
    self.home(&#39;+&#39;)

    # Wait until we start moving
    time.sleep(0.1)
    _, _, velocity = self.actual_frequency()
    while float(velocity) != 0.0:
        _, _, velocity = self.actual_frequency()
        time.sleep(1)

    # Wait a little bit until we actually stopped
    time.sleep(0.1)
    
    _, _, position = self.actual_position()
    self.limits[&#39;positive&#39;] = float(position)
    logger.info(&#34;Positive home found!. Positive home at: {}&#34;.format(position))

    self.homed = True
    
    logger.info(&#34;Homing procedure completed!&#34;)
    
    self.configure_remote()</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.interpolate"><code class="name flex">
<span>def <span class="ident">interpolate</span></span>(<span>self, enable)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def interpolate(self, enable):
    if enable != None:
        return self._query(&#39;INTERP,{}\r\n&#39;.format(enable))
    else:
        return self._query(&#39;INTERP\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.limit_polarity"><code class="name flex">
<span>def <span class="ident">limit_polarity</span></span>(<span>self, polarity)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def limit_polarity(self, polarity):
    return self.query(&#39;LP,{}\r\n&#39;.format(polarity))</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.limit_stop_mode"><code class="name flex">
<span>def <span class="ident">limit_stop_mode</span></span>(<span>self, stop_mode)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def limit_stop_mode(self, stop_mode):
    return self._query(&#39;LSM,{}\r\n&#39;.format(stop_mode))</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.load_configuration"><code class="name flex">
<span>def <span class="ident">load_configuration</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def load_configuration(self):
    return self._query(&#39;LOAD\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.load_factory_defaults"><code class="name flex">
<span>def <span class="ident">load_factory_defaults</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def load_factory_defaults(self):
    return self._query(&#39;LOADFD\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.mask_in_fov"><code class="name flex">
<span>def <span class="ident">mask_in_fov</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def mask_in_fov(self):
    if self.homed:
        _, _, position = self.actual_position()
        if self.limits[&#39;positive&#39;] - 1 &lt;= round(float(position)) &lt;= self.limits[&#39;positive&#39;] + 1:
            return True
        else:
            return False
    else:
        return False</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.move_mask_fov"><code class="name flex">
<span>def <span class="ident">move_mask_fov</span></span>(<span>self, enable: bool)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def move_mask_fov(self, enable: bool):
    if self.homed:
        if enable:
            self.absolute_move(self.IN_FOV_POSITION)
        else:
            self.absolute_move(self.limits[&#39;negative&#39;])
    else:
        raise Smd3Exception(&#34;SMD3 has not been homed. Move has been ignored&#34;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.negative_limit"><code class="name flex">
<span>def <span class="ident">negative_limit</span></span>(<span>self, enable=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def negative_limit(self, enable=None):
    if enable != None:
        return self._query(&#39;L-,{}\r\n&#39;.format(enable))
    else:
        return self._query(&#39;L-\r\n&#39;.format(enable))</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.negative_limit_polarity"><code class="name flex">
<span>def <span class="ident">negative_limit_polarity</span></span>(<span>self, polarity=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def negative_limit_polarity(self, polarity=None):
    if polarity != None:
        return self._query(&#39;LP-,{}\r\n&#39;.format(polarity))
    else:
        return self._query(&#39;LP-\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.positive_limit"><code class="name flex">
<span>def <span class="ident">positive_limit</span></span>(<span>self, enable=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def positive_limit(self, enable=None):
    if enable != None:
        return self._query(&#39;L+,{}\r\n&#39;.format(enable))
    else:
        return self._query(&#39;L+\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.positive_limit_polarity"><code class="name flex">
<span>def <span class="ident">positive_limit_polarity</span></span>(<span>self, polarity=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def positive_limit_polarity(self, polarity=None):
    if polarity != None:
        return self._query(&#39;LP+,{}\r\n&#39;.format(polarity))
    else:
        return self._query(&#39;LP+\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.power_down_delay"><code class="name flex">
<span>def <span class="ident">power_down_delay</span></span>(<span>self, delay=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def power_down_delay(self, delay=None):
    if delay != None:
        return self._query(&#39;PDDEL\r\n&#39;)
    else:
        return self._query(&#39;PDDEL,{}\r\n&#39;.format(delay))</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.power_down_ramp_delay"><code class="name flex">
<span>def <span class="ident">power_down_ramp_delay</span></span>(<span>self, delay)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def power_down_ramp_delay(self, delay):
    pass</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.quick_stop"><code class="name flex">
<span>def <span class="ident">quick_stop</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def quick_stop(self):
    return self._query(&#39;SSTOP\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.relative_move"><code class="name flex">
<span>def <span class="ident">relative_move</span></span>(<span>self, relative_position: float)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def relative_move(self, relative_position: float):
    return self._query(&#39;RUNR,{}\r\n&#39;.format(relative_position))</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.relative_position"><code class="name flex">
<span>def <span class="ident">relative_position</span></span>(<span>self, position=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def relative_position(self, position=None):
    if position != None:
        return self._query(&#39;PREL,{}\r\n&#39;.format(position))
    else:
        return self._query(&#39;PREL\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.resolution"><code class="name flex">
<span>def <span class="ident">resolution</span></span>(<span>self, res=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def resolution(self, res=None):
    if res != None:
        return self._query(&#39;RES,{}\r\n&#39;.format(res))
    else:
        return self._query(&#39;RES\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.run_current"><code class="name flex">
<span>def <span class="ident">run_current</span></span>(<span>self, current=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def run_current(self, current=None):
    if current != None:
        return self._query(&#39;IR,{}\r\n&#39;.format(current))
    else:
        return self._query(&#39;IR\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.save_fault"><code class="name flex">
<span>def <span class="ident">save_fault</span></span>(<span>self, error_word)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def save_fault(self, error_word):
    for bits, name in EFLAGS.items():
        self.fault[name]  = bool(int(error_word, 0) &amp; (1 &lt;&lt; bits))</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.save_status"><code class="name flex">
<span>def <span class="ident">save_status</span></span>(<span>self, status_word)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def save_status(self, status_word):
    for bits, name in SFLAGS.items():
        self.status[name] = bool(int(status_word, 0) &amp; (1 &lt;&lt; bits))</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.select_mode"><code class="name flex">
<span>def <span class="ident">select_mode</span></span>(<span>self, mode: <a title="egse.stages.arun.smd3_controller.Smd3Mode" href="#egse.stages.arun.smd3_controller.Smd3Mode">Smd3Mode</a>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def select_mode(self, mode: Smd3Mode):
    return self._query(&#39;MODE,{}\r\n&#39;.format(mode))</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.select_tsensor"><code class="name flex">
<span>def <span class="ident">select_tsensor</span></span>(<span>self, sensor_type=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def select_tsensor(self, sensor_type=None):
    if sensor_type == None:
        return self._query(&#39;TSEL\r\n&#39;)
    else:
        return self._query(&#39;TSEL,{}\r\n&#39;.format(sensor_type))</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.set_freewheel"><code class="name flex">
<span>def <span class="ident">set_freewheel</span></span>(<span>self, fw=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_freewheel(self, fw=None):
    if fw != None:
        return self._query(&#39;FW,{}\r\n&#39;.format(fw))
    else:
        return self._query(&#39;FW\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.start_frequency"><code class="name flex">
<span>def <span class="ident">start_frequency</span></span>(<span>self, frequency=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def start_frequency(self, frequency=None):
    if frequency != None:
        return self._query(&#39;VSTART,{}\r\n&#39;.format(frequency))
    else:
        return self._query(&#39;VSTART\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.step_edge"><code class="name flex">
<span>def <span class="ident">step_edge</span></span>(<span>self, edge)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def step_edge(self, edge):
    if edge != None:
        return self._query(&#39;EDGE,{}\r\n&#39;.format(edge))
    else:
        return self._query(&#39;EDGE\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.stop"><code class="name flex">
<span>def <span class="ident">stop</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def stop(self):
    return self._query(&#39;STOP\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.stop_frequency"><code class="name flex">
<span>def <span class="ident">stop_frequency</span></span>(<span>self, frequency=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def stop_frequency(self, frequency=None):
    if frequency != None:
        return self._query(&#39;VSTOP,{}\r\n&#39;.format(frequency))
    else:
        return self._query(&#39;VSTOP\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.store_configuration"><code class="name flex">
<span>def <span class="ident">store_configuration</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def store_configuration(self):
    return self._query(&#39;STORE\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.target_frequency"><code class="name flex">
<span>def <span class="ident">target_frequency</span></span>(<span>self, frequency=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def target_frequency(self, frequency=None):
    if frequency != None:
        return self._query(&#39;VMAX,{}\r\n&#39;.format(frequency))
    else:
        return self._query(&#39;VMAX\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.time_stop_before_move"><code class="name flex">
<span>def <span class="ident">time_stop_before_move</span></span>(<span>self, time)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def time_stop_before_move(self, time):
    if time != None:
        return self._query(&#39;TZW,{}\r\n&#39;.format(time))
    else:
        return self._query(&#39;TZW\r\n&#39;)</code></pre>
</details>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Controller.velocity_move"><code class="name flex">
<span>def <span class="ident">velocity_move</span></span>(<span>self, direction: str)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def velocity_move(self, direction: str):
    if direction in [&#39;-&#39;, &#39;+&#39;]:
        return self._query(&#39;RUNV,{}\r\n&#39;.format(direction))
    else:
        raise Smd3Exception(&#34;Direction can only be &#39;-&#39; or &#39;+&#39;&#34;)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="egse.serialdevice.SerialDevice" href="../../serialdevice.html#egse.serialdevice.SerialDevice">SerialDevice</a></b></code>:
<ul class="hlist">
<li><code><a title="egse.serialdevice.SerialDevice.add_observer" href="../../device.html#egse.device.DeviceConnectionObservable.add_observer">add_observer</a></code></li>
<li><code><a title="egse.serialdevice.SerialDevice.connect" href="../../serialdevice.html#egse.serialdevice.SerialDevice.connect">connect</a></code></li>
<li><code><a title="egse.serialdevice.SerialDevice.disconnect" href="../../serialdevice.html#egse.serialdevice.SerialDevice.disconnect">disconnect</a></code></li>
<li><code><a title="egse.serialdevice.SerialDevice.get_idn" href="../../serialdevice.html#egse.serialdevice.SerialDevice.get_idn">get_idn</a></code></li>
<li><code><a title="egse.serialdevice.SerialDevice.is_connected" href="../../serialdevice.html#egse.serialdevice.SerialDevice.is_connected">is_connected</a></code></li>
<li><code><a title="egse.serialdevice.SerialDevice.notify_observers" href="../../device.html#egse.device.DeviceConnectionObservable.notify_observers">notify_observers</a></code></li>
<li><code><a title="egse.serialdevice.SerialDevice.query" href="../../serialdevice.html#egse.serialdevice.SerialDevice.query">query</a></code></li>
<li><code><a title="egse.serialdevice.SerialDevice.read" href="../../serialdevice.html#egse.serialdevice.SerialDevice.read">read</a></code></li>
<li><code><a title="egse.serialdevice.SerialDevice.reconnect" href="../../serialdevice.html#egse.serialdevice.SerialDevice.reconnect">reconnect</a></code></li>
<li><code><a title="egse.serialdevice.SerialDevice.send_command" href="../../serialdevice.html#egse.serialdevice.SerialDevice.send_command">send_command</a></code></li>
</ul>
</li>
<li><code><b><a title="egse.stages.arun.smd3_interface.Smd3Interface" href="smd3_interface.html#egse.stages.arun.smd3_interface.Smd3Interface">Smd3Interface</a></b></code>:
<ul class="hlist">
<li><code><a title="egse.stages.arun.smd3_interface.Smd3Interface.is_simulator" href="../../device.html#egse.device.DeviceInterface.is_simulator">is_simulator</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Exception"><code class="flex name class">
<span>class <span class="ident">Smd3Exception</span></span>
<span>(</span><span>*args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Smd3Exception(Exception):
    pass</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
</ul>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Mode"><code class="flex name class">
<span>class <span class="ident">Smd3Mode</span></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Smd3Mode:
    STEP                    = 0
    STEP_TRIGGERED_VELOCITY = 1
    REMOTE                  = 2
    JOYSTICK                = 3
    BAKE                    = 4
    HOME                    = 5</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="egse.stages.arun.smd3_controller.Smd3Mode.BAKE"><code class="name">var <span class="ident">BAKE</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Mode.HOME"><code class="name">var <span class="ident">HOME</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Mode.JOYSTICK"><code class="name">var <span class="ident">JOYSTICK</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Mode.REMOTE"><code class="name">var <span class="ident">REMOTE</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Mode.STEP"><code class="name">var <span class="ident">STEP</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="egse.stages.arun.smd3_controller.Smd3Mode.STEP_TRIGGERED_VELOCITY"><code class="name">var <span class="ident">STEP_TRIGGERED_VELOCITY</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="egse.stages.arun" href="index.html">egse.stages.arun</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="egse.stages.arun.smd3_controller.main" href="#egse.stages.arun.smd3_controller.main">main</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="egse.stages.arun.smd3_controller.Smd3Controller" href="#egse.stages.arun.smd3_controller.Smd3Controller">Smd3Controller</a></code></h4>
<ul class="">
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.IN_FOV_POSITION" href="#egse.stages.arun.smd3_controller.Smd3Controller.IN_FOV_POSITION">IN_FOV_POSITION</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.STEP_SIZE_MM" href="#egse.stages.arun.smd3_controller.Smd3Controller.STEP_SIZE_MM">STEP_SIZE_MM</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.absolute_move" href="#egse.stages.arun.smd3_controller.Smd3Controller.absolute_move">absolute_move</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.acceleration" href="#egse.stages.arun.smd3_controller.Smd3Controller.acceleration">acceleration</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.acceleration_current" href="#egse.stages.arun.smd3_controller.Smd3Controller.acceleration_current">acceleration_current</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.actual_frequency" href="#egse.stages.arun.smd3_controller.Smd3Controller.actual_frequency">actual_frequency</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.actual_position" href="#egse.stages.arun.smd3_controller.Smd3Controller.actual_position">actual_position</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.actual_position_mm" href="#egse.stages.arun.smd3_controller.Smd3Controller.actual_position_mm">actual_position_mm</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.bake" href="#egse.stages.arun.smd3_controller.Smd3Controller.bake">bake</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.bakeout_setpoint" href="#egse.stages.arun.smd3_controller.Smd3Controller.bakeout_setpoint">bakeout_setpoint</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.clear_flags" href="#egse.stages.arun.smd3_controller.Smd3Controller.clear_flags">clear_flags</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.configure_homing" href="#egse.stages.arun.smd3_controller.Smd3Controller.configure_homing">configure_homing</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.configure_limits" href="#egse.stages.arun.smd3_controller.Smd3Controller.configure_limits">configure_limits</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.configure_remote" href="#egse.stages.arun.smd3_controller.Smd3Controller.configure_remote">configure_remote</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.deceleration" href="#egse.stages.arun.smd3_controller.Smd3Controller.deceleration">deceleration</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.emergency_stop" href="#egse.stages.arun.smd3_controller.Smd3Controller.emergency_stop">emergency_stop</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.full_step" href="#egse.stages.arun.smd3_controller.Smd3Controller.full_step">full_step</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.get_status" href="#egse.stages.arun.smd3_controller.Smd3Controller.get_status">get_status</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.get_temperature" href="#egse.stages.arun.smd3_controller.Smd3Controller.get_temperature">get_temperature</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.get_version" href="#egse.stages.arun.smd3_controller.Smd3Controller.get_version">get_version</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.global_limit" href="#egse.stages.arun.smd3_controller.Smd3Controller.global_limit">global_limit</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.hold_current" href="#egse.stages.arun.smd3_controller.Smd3Controller.hold_current">hold_current</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.home" href="#egse.stages.arun.smd3_controller.Smd3Controller.home">home</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.homing_procedure" href="#egse.stages.arun.smd3_controller.Smd3Controller.homing_procedure">homing_procedure</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.interpolate" href="#egse.stages.arun.smd3_controller.Smd3Controller.interpolate">interpolate</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.limit_polarity" href="#egse.stages.arun.smd3_controller.Smd3Controller.limit_polarity">limit_polarity</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.limit_stop_mode" href="#egse.stages.arun.smd3_controller.Smd3Controller.limit_stop_mode">limit_stop_mode</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.load_configuration" href="#egse.stages.arun.smd3_controller.Smd3Controller.load_configuration">load_configuration</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.load_factory_defaults" href="#egse.stages.arun.smd3_controller.Smd3Controller.load_factory_defaults">load_factory_defaults</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.mask_in_fov" href="#egse.stages.arun.smd3_controller.Smd3Controller.mask_in_fov">mask_in_fov</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.move_mask_fov" href="#egse.stages.arun.smd3_controller.Smd3Controller.move_mask_fov">move_mask_fov</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.negative_limit" href="#egse.stages.arun.smd3_controller.Smd3Controller.negative_limit">negative_limit</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.negative_limit_polarity" href="#egse.stages.arun.smd3_controller.Smd3Controller.negative_limit_polarity">negative_limit_polarity</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.positive_limit" href="#egse.stages.arun.smd3_controller.Smd3Controller.positive_limit">positive_limit</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.positive_limit_polarity" href="#egse.stages.arun.smd3_controller.Smd3Controller.positive_limit_polarity">positive_limit_polarity</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.power_down_delay" href="#egse.stages.arun.smd3_controller.Smd3Controller.power_down_delay">power_down_delay</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.power_down_ramp_delay" href="#egse.stages.arun.smd3_controller.Smd3Controller.power_down_ramp_delay">power_down_ramp_delay</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.quick_stop" href="#egse.stages.arun.smd3_controller.Smd3Controller.quick_stop">quick_stop</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.relative_move" href="#egse.stages.arun.smd3_controller.Smd3Controller.relative_move">relative_move</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.relative_position" href="#egse.stages.arun.smd3_controller.Smd3Controller.relative_position">relative_position</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.resolution" href="#egse.stages.arun.smd3_controller.Smd3Controller.resolution">resolution</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.run_current" href="#egse.stages.arun.smd3_controller.Smd3Controller.run_current">run_current</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.save_fault" href="#egse.stages.arun.smd3_controller.Smd3Controller.save_fault">save_fault</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.save_status" href="#egse.stages.arun.smd3_controller.Smd3Controller.save_status">save_status</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.select_mode" href="#egse.stages.arun.smd3_controller.Smd3Controller.select_mode">select_mode</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.select_tsensor" href="#egse.stages.arun.smd3_controller.Smd3Controller.select_tsensor">select_tsensor</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.set_freewheel" href="#egse.stages.arun.smd3_controller.Smd3Controller.set_freewheel">set_freewheel</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.start_frequency" href="#egse.stages.arun.smd3_controller.Smd3Controller.start_frequency">start_frequency</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.step_edge" href="#egse.stages.arun.smd3_controller.Smd3Controller.step_edge">step_edge</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.stop" href="#egse.stages.arun.smd3_controller.Smd3Controller.stop">stop</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.stop_frequency" href="#egse.stages.arun.smd3_controller.Smd3Controller.stop_frequency">stop_frequency</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.store_configuration" href="#egse.stages.arun.smd3_controller.Smd3Controller.store_configuration">store_configuration</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.target_frequency" href="#egse.stages.arun.smd3_controller.Smd3Controller.target_frequency">target_frequency</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.time_stop_before_move" href="#egse.stages.arun.smd3_controller.Smd3Controller.time_stop_before_move">time_stop_before_move</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Controller.velocity_move" href="#egse.stages.arun.smd3_controller.Smd3Controller.velocity_move">velocity_move</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="egse.stages.arun.smd3_controller.Smd3Exception" href="#egse.stages.arun.smd3_controller.Smd3Exception">Smd3Exception</a></code></h4>
</li>
<li>
<h4><code><a title="egse.stages.arun.smd3_controller.Smd3Mode" href="#egse.stages.arun.smd3_controller.Smd3Mode">Smd3Mode</a></code></h4>
<ul class="">
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Mode.BAKE" href="#egse.stages.arun.smd3_controller.Smd3Mode.BAKE">BAKE</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Mode.HOME" href="#egse.stages.arun.smd3_controller.Smd3Mode.HOME">HOME</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Mode.JOYSTICK" href="#egse.stages.arun.smd3_controller.Smd3Mode.JOYSTICK">JOYSTICK</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Mode.REMOTE" href="#egse.stages.arun.smd3_controller.Smd3Mode.REMOTE">REMOTE</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Mode.STEP" href="#egse.stages.arun.smd3_controller.Smd3Mode.STEP">STEP</a></code></li>
<li><code><a title="egse.stages.arun.smd3_controller.Smd3Mode.STEP_TRIGGERED_VELOCITY" href="#egse.stages.arun.smd3_controller.Smd3Mode.STEP_TRIGGERED_VELOCITY">STEP_TRIGGERED_VELOCITY</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>